<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .map {
    position: absolute;
}
.itemMap {
    position: absolute;
}
.colorButton {
    background: #1b4d83 !important;
    color: #3a51ff !important;
}
.divDe {
    position: absolute;
    border: 1px solid #000;
}
.divKhung {
    position: absolute;
    border: 1px solid #000;
}
.divAnh {
    position: absolute;
    border: 1px solid #000;
}
/* .html {
    width: 10px;
    height: 10px;
} */

.nameBoxDe {
    min-width: 3.5rem;
    min-height: 1rem;
    background: black;
    color: white;
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    font-size: 0.7rem;
    line-height: 1rem;
    padding: 0rem 0.7rem 0rem 0.7rem;
    text-align: center;
    top: -5.5rem;
}
.i4 {
    z-index: 4 ;
}
.doiMauTime {
    background-color: #009bff !important;
}
.absolute {
    position: absolute;
}

    </style>
</head>
<body>
    <style>
        * {
            margin: 0;
            padding: 0;
        }
    
        .wrap {
            /* width: 320px;
            height: 650px; */
            position: relative;
            background-color: red;
        }
    
        .body {
            /* width: 95%;
                height: 97.8%; */
            width: 14.2rem;
            height: 29.8rem;
            margin-left: 0.4rem;
            margin-top: 0.4rem;
            position: absolute;
            background-color: blue;
        }
    
        .box1 {
            width: 60px;
            height: 60px;
            position: absolute;
            background-color: blue;
        }
    
        .screen {
            /* width: 100%;
                height: 100%; */
                width: 14.2rem;
            height: 29.8rem;
            /* background: yellow; */
            /* margin-left: 2.5%;
                margin-top: 2.1%; */
            pointer-events: none;
            border: 1px solid #000;
    
        }
    </style>
    <div class="wrap">
        <div class="body">
            <div class="haha">
    
            </div>
            <style>
                .screen {
                    z-index: 3;
                    position: absolute;
                }
    
                .haha {
                    position: absolute;
                    width: 4rem;
                    height: 3rem;
                    top: 2rem;
                    background-color: yellow;
                    left: 2rem;
                }
            </style>
            <div class="screen">
                <style>
                    .keyBoard {
                        width: 41.33%;
                        height: 15.09%;
                        background-color: #10a17691;
                        position: absolute;
                        bottom: 1.5rem;
                        left: 50%;
                        border-radius: 0.5rem;
                        transform: translateX(-50%);
                        border: 2px solid #000;
                    }
    
                    .ac {
                        left: 13px;
                        background: #4a008b;
                        top: -100px;
                        font-size: 37px;
                        min-width: 251px;
                        height: 72px;
                        line-height: 72px;
                        position: absolute;
                        text-align: center;
                        box-sizing: border-box;
                        border-radius: 20px;
                        border: 3px solid #000000b5;
                    }
    
                    .ad {
                        text-align: center;
                        box-sizing: border-box;
                        border-radius: 20px;
                        border: 3px solid #000000b5;
                        right: 0px;
                        background: #ff375e;
                        top: -100px;
                        font-size: 35px;
                        min-width: 77px;
                        height: 72px;
                        line-height: 72px;
                        position: absolute;
                    }
    
                    .focusKey {
                        width: 1.9rem;
                        height: 1.9rem;
                        position: absolute;
                        font-size: 10px;
                        line-height: 1.9rem;
                        text-align: center;
                        box-sizing: border-box;
                        background-color: #00d49b;
                        border-radius: 0.4rem;
                        border: 2px solid #000000b5;
                    }
    
                    .aa {
                        left: 126px;
                        background: #4a008b;
                        top: -129px;
                        font-size: 37px;
                    }
    
                    .upKey {
                        margin-left: 5px;
                        margin-top: 5px;
                        cursor: pointer;
                    }
    
                    .downKey {
                        top: 0;
                        right: 0;
                        margin-right: 5px;
                        margin-top: 5px;
                        cursor: pointer;
                    }
    
                    .leftKey {
                        bottom: 0;
                        margin-left: 5px;
                        margin-bottom: 5px;
                        cursor: pointer;
                    }
    
                    /* .rightkey {
                                                                            bottom: 0;
                                                            right: 0;
                                                            margin-right: 5px;
                                                            margin-bottom: 5px;
                                                            cursor: pointer;
                                                                        } */
                    .rightKey.focusKey {
                        bottom: 0;
                        right: 0;
                        margin-right: 5px;
                        margin-bottom: 5px;
                        cursor: pointer;
                    }
    
                    .okKey {
                        transform: translateY(-50%);
                        top: 51%;
                        right: -66%;
                        margin-right: 125px;
                        background: #ed030d;
                        /* border-radius: 20px; */
                        cursor: pointer;
                    }
    
                    .optionLocation1 {
                        left: 36px;
                    }
    
    
    
    
    
                    .infor {
                        line-height: 54px;
                        font-size: 39px;
                        top: 0;
                        min-width: 558px;
                        height: 242px;
                        /* background: red;#ff000057 */
                        background: #ff000057;
                        position: absolute;
                        padding: 23px;
                    }
    
                    .none {
                        display: none;
                    }
                </style>
                <style>
                    /* hi·ªáu ·ª©ng g·∫∑p ƒë·ªãch */
.doiDich {
    left: 76%;
    background: #ff375e;
    top: -2rem;
    font-size: 0.7rem;
    min-width: 2rem;
    height: 1.5rem;
    line-height: 1.5rem;
    position: absolute;
    text-align: center;
    box-sizing: border-box;
    border-radius: 20px;
    /* transform: translateX(-50%); */
    border: 0.1rem solid #000000b5;
    border-radius: 0.6rem;
}
.tancongDaDich {
   
    left: -4%;
    background: #4a008b;
    top: -2rem;
    font-size: 0.7rem;
    min-width: 4.5rem;
    height: 1.5rem;
    line-height: 1.5rem;
    position: absolute;
    text-align: center;
    box-sizing: border-box;
    border-radius: 20px;
    /* transform: translateX(-50%); */
    border: 0.1rem solid #000000b5;
    border-radius: 0.6rem;
    
}
.vaoMap {
    background: #4a008b !important;
    left: 50%;
    top: -2.4rem;
    font-size: 0.7rem;
    min-width: 2rem;
    height: 1.8rem;
    line-height: 1.8rem;
    position: absolute;
    text-align: center;
    box-sizing: border-box;
    transform: translateX(-50%);
    border: 0.1rem solid #000000b5;
    border-radius: 0.5rem;
}
.vaoMap2 {
    left: 126px;
    background: #4a008b !important;
    top: -223px;
    font-size: 37px;
}

.tancong1Dich {
   
    left: 50%;
    background: #4a008b;
    top: -2rem;
    font-size: 0.7rem;
    min-width: 6rem;
    height: 1.5rem;
    line-height: 1.5rem;
    position: absolute;
    text-align: center;
    box-sizing: border-box;
    border-radius: 20px;
    transform: translateX(-50%);
    border: 0.1rem solid #000000b5;
    border-radius: 0.6rem;

}
                </style>
                <div class="keyBoard">
                     <div class="tancongDaDich none">T·∫•n c√¥ng (<span class="tancongDaDich_Number"></span>)</div>
                    <div class="doiDich none">ƒê·ªïi</div>
                    <div class="focusKey vaoMap none">V√†o</div> 
                    <div class="tancong1Dich none">T·∫•n c√¥ng (<span class="tancong1Dich_Number"></span>)</div> 
                    
                    <div class="upKey focusKey">L√äN</div>
                    <div class="downKey  focusKey">XU·ªêNG</div>
                    <div class="leftKey focusKey">TR√ÅI</div>
                    <div class="rightKey focusKey">PH·∫¢I</div>
                    <div class="okKey focusKey">OK</div>
                </div>


                <div class="blackLayout none"></div>
                <div class="infor_battle none">
                    <style>
                        .blackLayout {
                            z-index: 1;
                            width: 100%;
                            height: 100%;
                            background-color: #000000b5;
                            position: absolute;
                        }
                    
                        .timeEnemy {
                            right: 18%;
                        }
                    
                        .timeMe {
                            left: 18%;
                        }
                    
                        .timee {
                            min-width: 139px;
                            position: absolute;
                            background: red;
                            /* min-height: 78px; */
                            line-height: 78px;
                            font-size: 52px;
                            top: 1243px;
                            transform: translateX(-50%);
                            text-align: center;
                        }
                    
                        .boardPoint {
                            min-width: 6rem;
                            position: absolute;
                            /* background: red; */
                            min-height: 6rem;
                            /* line-height: 70px; */
                            font-size: 0.8rem;
                            top: 19rem;
                            transform: translateX(-50%);
                            left: 50%;
                            /* padding: 0 30px 0 30px; */
                            z-index: 3;
                        }
                    
                        .turn {
                            line-height: 2rem;
                            height: 2rem;
                            min-width: 6rem;
                            /* bottom: 83px; */
                            top: 0rem;
                            left: 7rem;
                            font-size: .8rem;
                        }
                    
                        .option {
                            min-width: 150px;
                            height: 150px;
                            background: red;
                            position: absolute;
                            bottom: 60px;
                            font-size: 49px;
                            text-align: center;
                            line-height: 140px;
                        }
                    
                        .Skill {
                            line-height: 2rem;
                            height: 2rem;
                            min-width: 2rem;
                            /* bottom: 83px; */
                            top: 2rem;
                            left: -2rem;
                            font-size: .8rem;
                        }
                    
                        .timeMe {
                            line-height: 2rem;
                            height: 2rem;
                            min-width: 2rem;
                            left: 2rem;
                            top: 0rem;
                            /* display: none; */
                            font-size: 0.8rem;
                        }
                    
                        .timeEnemy {
                            line-height: 2rem;
                            height: 2rem;
                            min-width: 2rem;
                            right: 2rem;
                            top: 0rem;
                            /* display: none; */
                            font-size: 0.8rem;
                        }
                    
                        .outGame {
                            line-height: 2rem;
                            height: 2rem;
                            min-width: 2rem;
                            /* bottom: 83px; */
                            top: 2rem;
                            right: -2rem;
                            font-size: .8rem;
                        }
                    
                        .starEnemy {
                            line-height: 2rem;
                            height: 2rem;
                            min-width: 2rem;
                            right: 2rem;
                            top: 2rem;
                            /* display: none; */
                            font-size: 0.8rem;
                        }
                    
                        .starEnemy1 {
                            line-height: 66px;
                            height: 40px;
                            min-width: calc(40px * 9);
                            right: 7px;
                            /* display: none; */
                            top: 139px;
                            font-size: 43px;
                        }
                    
                        .starMe1 {
                            line-height: 66px;
                            height: 40px;
                            min-width: calc(40px * 9);
                            left: 7px;
                            /* display: none; */
                            top: 139px;
                            font-size: 43px;
                        }
                    
                        .starMe {
                            line-height: 2rem;
                            height: 2rem;
                            min-width: 2rem;
                            left: 2rem;
                            top: 2rem;
                            /* display: none; */
                            font-size: 0.8rem;
                        }
                    
                        #board {
                            width: 13.5rem;
                            height: 13.5rem;
                            background-color: red;
                            border: 2px solid slategray;
                            left: 50%;
                            top: 4rem;
                            transform: translateX(-50%);
                            position: absolute;
                            /* overflow: hidden; */
                        }
                    
                      
                    
                        .petMe {
                            line-height: 2rem;
                            height: 2rem;
                            min-width: 2rem;
                            left: 2rem;
                            bottom: 2rem;
                            font-size: 0.8rem;
                        }
                    
                        .petEnemy {
                            line-height: 2rem;
                            height: 2rem;
                            min-width: 2rem;
                            right: 2rem;
                            bottom: 2rem;
                            font-size: 0.8rem;
                        }
                    
                        .manaMe {
                            line-height: 2rem;
                            height: 2rem;
                            min-width: 2rem;
                            left: 0rem;
                            bottom: 6rem;
                            font-size: 0.8rem;
                        }
                    
                        .manaEnemy {
                            line-height: 2rem;
                            height: 2rem;
                            min-width: 2rem;
                            right: 0rem;
                            bottom: 6rem;
                            font-size: 0.8rem;
                        }
                    
                        .vangMe {
                            line-height: 2rem;
                            height: 2rem;
                            min-width: 2rem;
                            left: 0rem;
                            bottom: 0rem;
                            font-size: 0.8rem;
                        }
                    
                        .vangEnemy {
                            line-height: 2rem;
                            height: 2rem;
                            min-width: 2rem;
                            right: 0rem;
                            bottom: 0rem;
                            font-size: 0.8rem;
                        }
                    
                        .GiapMe {
                            line-height: 2rem;
                            height: 2rem;
                            min-width: 2rem;
                            left: 0rem;
                            bottom: 8rem;
                            font-size: 0.8rem;
                    
                        }
                    
                        .GiapEnemy {
                            line-height: 2rem;
                            height: 2rem;
                            min-width: 2rem;
                            right: 0rem;
                            bottom: 8rem;
                            font-size: 0.8rem;
                        }
                    
                        .hpEnemy {
                            line-height: 2rem;
                            height: 2rem;
                            min-width: 2rem;
                            right: 0rem;
                            bottom: 4rem;
                            font-size: 0.8rem;
                        }
                    
                        .hpMe {
                            line-height: 2rem;
                            height: 2rem;
                            min-width: 2rem;
                            left: 0rem;
                            bottom: 4rem;
                            font-size: 0.8rem;
                        }
                    
                        .focus {
                            border: 13px solid #14842f;
                            box-sizing: border-box;
                        }
                    
                        .outFocus {
                            border: 13px solid #eb0808;
                            box-sizing: border-box;
                        }
                    </style>
                    
                    <style>
                        .boxOut {
                    
                            min-width: 713px;
                            min-height: 447px;
                            top: 500px;
                            z-index: 3;
                            left: 50%;
                            transform: translateX(-50%);
                            /* box-sizing: content-box; */
                            border: 20px solid #f64e4ea8;
                            /* border: 20px solid black; */
                    
                        }
                    
                        .askOut {
                            position: absolute;
                            top: 60px;
                            font-size: 39px;
                            text-align: center;
                            line-height: 129px;
                            min-width: 500px;
                            min-height: 133px;
                            left: 50%;
                            text-align: center;
                            transform: translateX(-50%);
                            background: yellow;
                            padding: 0 30px 0 30px;
                            color: blue;
                        }
                    
                        .yesOut {
                            position: absolute;
                            top: 234px;
                            font-size: 39px;
                            text-align: center;
                            line-height: 129px;
                            min-width: 170px;
                            min-height: 133px;
                            left: 11%;
                            text-align: center;
                            /* transform: translateX(-50%); */
                            background: yellow;
                            padding: 0 30px 0 30px;
                            color: blue;
                        }
                    
                        .noOut {
                            position: absolute;
                            top: 234px;
                            font-size: 39px;
                            text-align: center;
                            line-height: 129px;
                            min-width: 170px;
                            min-height: 133px;
                            right: 11%;
                            text-align: center;
                            /* transform: translateX(-50%); */
                            background: yellow;
                            padding: 0 30px 0 30px;
                            color: blue;
                        }
                    </style>
                    <div class="option boxOut none">
                        <div class="askOut">B·∫°n C√≥ Mu·ªën Tho√°t Tr·∫≠n?</div>
                    
                        <div class="yesOut">
                            C√≥
                        </div>
                        <div class="noOut">
                            Kh√¥ng
                        </div>
                    </div>
                    <div class="option timeMe none"><span class="timeMe1"></span>s</div>
                    <div class="option timeEnemy none"><span class="timeEnemy1"></span>s</div>
                    <div class="option petMe ">PetMe</div>
                    <div class="option petEnemy  ">PetDemon</div>
            
                    <!-- <div class="meI">
                    
                       
                    
                        
                        <div class="informMe dame">dame: <span class="dameMe1">0</span></div>
                    </div> -->

                    <style>
                        .io {
                            display: inline-block;
                        }
                    </style>
                    <div class="boardPoint">
                        <div class="informMe mana">Mana + <div class="manaBoard1 io">0</div></div>
                        <div class="informMe hp">M√°u + <div class="hpBoard1 io">0</div></div>
                        <div class="informMe vang">V√†ng: + <div class="vangBoard1 io">0</div></div>
                        <div class="informMe HongNgoc">H·ªìng Ng·ªçc + <div class="HNBoard1 io">0</div></div>
                        <div class="informMe giap">Gi√°p + <div class="giapBoard1 io">0</div></div>
                    
                        <div class="informMe dame">Dame - <div class="dameBoard1 io">0</div> M√°u</div>
                    </div> 
                    
                        <div class="timee turn none">C√≤n <span class="turnNumber">0</span> l∆∞·ª£t</div>
                    
                    
                    <!-- l∆∞u -->
                    <!-- <div class="option starMe  ">99</div>
                    <div class="option starEnemy  ">0</div>
                    <div class="option starMe1  "></div>
                    <div class="option starEnemy1  "></div> -->
            
                    <!-- <div class="timee timeMe none"><span class="timeMe1"></span>s</div>
                    <div class="timee timeEnemy none"><span class="timeEnemy1"></span>s</div> -->
                    <div class="option hpMe  ">‚ù§Ô∏è: <div class="io hpMe1">0</div>/<div class="io hpMe2">0</div></div>
                    <div class="option hpEnemy ">‚ù§Ô∏è: <div class="io hpEnemy1">0</div>/<div class="io hpEnemy2">0</div></div>
            
                    <div class="option manaMe ">üíô: <div class="io manaMe1">0</div>/<div class="io manaMe2">0</div></div>
                    <div class="option manaEnemy ">üíô: <div class="io manaEnemy1">0</div>/<div class="io manaEnemy2">0</div></div>
                    
            
            
            
                    <!-- <div class="option vangMe ">LV 0 (81%)</div>
                    <div class="option vangEnemy ">LV 0 (81%)</div> -->
                    <div class="option starMe HongNgoc">üç¨: <div class="io HNMe1">0</div></div>
                    <div class="option starEnemy HongNgoc">üç¨: <div class="io HNEnemy1">0</div></div>

                    <div class="option vangMe vang">ü•á: <div class="io vangMe1">0</div></div>
                    <div class="option vangEnemy vang">ü•á: <div class="io vangEnemy1">0</div></div>



                    <div class="option GiapMe ">üõ°Ô∏è: <div class="io giapMe1">0</div></div>
                    <div class="option GiapEnemy">üõ°Ô∏è: <div class="io giapEnemy1">0</div></div>
            
            
                    <div class="option Button  outGame">ƒê·∫ßu H√†ng</div>
                    <div class="option Button  Skill">T√πy Ch·ªçn</div>
            
                    <!-- cho c·ªù -->
                    <style>
                       
                        #board img {
                            width: calc(13.5rem / 9);
                            height: calc(13.5rem / 9);
                            padding: 0px;
                            margin: 0px 
                        }
                
                        .focus {
                            border: 5px solid #14842f;
                            box-sizing: border-box;
                        }
                        .i3 {
                            z-index: 3;
                        }
                
                        .outFocus {
                            border: 5px solid #eb0808;
                            box-sizing: border-box;
                        }
                        .Blur {
                           
                            animation-name: tangHinh;
                            animation-duration: 0.500s;
                        }
                
                        @keyframes tangHinh {
                            0% {
                                opacity: 1;
                            }
                
                            100% {
                                opacity: 0;
                                /* display: none */
                            }
                        }
                
                    /* #board {
                            width: 450px;
                            top: 28px;
                            height: 450px;
                            background-color: lightblue;
                            border: 5px solid slategray;
                            border-radius: 10px;
                            margin: 0 auto;
                            display: flex;
                            flex-wrap: wrap;
                            position: relative; 
                        } */
                
                        .board2 {
                            width: 450px;
                            top: 0px;
                            left: 0px;
                            height: 450px;
                            position: absolute;
                        }
                
                    </style>
                    <div class="board " id="board"></div>
                    <style>
                        .meMe {
                            background: none;
                            width: 160px;
                            height: 260px;
                            bottom: 25px;
                            /* background-color: black; */
                        }
                    
                        .meMe_Anh {
                            width: 400px;
                            height: 400px;
                          
                            position: absolute;
                            top: -70px;
                            left: -120px;
                         
                        }
                    
                        .mePosition {
                            bottom: 64px;
                            left: 23px;
                            /* z-index: -1; */
                        }
                    
                        .enemyPosition {
                            bottom: 64px;
                            right: 23px;
                            /* z-index: -1; */
                        }
                    </style>
                    <div class="option  meMe mePosition none">
                        <div class="meMe_Anh meMe_Me"></div>
                    </div>
                    <div class="option  meMe enemyPosition none">
                        <div class="meMe_Anh meMe_Enemy"></div>
                    </div>
            
            
            
                </div>

                <style>
                    .keyBoard2 {
                        width: 26.6%;
                        height: 12.6%;
                        background-color: #10a17691;
                        position: absolute;
                        bottom: 1.85rem;
                        right: -1.79rem;
                        border-radius: 0.5rem;
                        transform: translateX(-50%);
                        border: 2px solid #000;
                    }
                
                
                    .focusKey2 {
                        width: 1.7rem;
                        height: 1.7rem;
                        position: absolute;
                        font-size: 8.5px;
                        line-height: 1.7rem;
                        text-align: center;
                        box-sizing: border-box;
                        background-color: #00d49b;
                        border-radius: 0.5rem;
                        border: 2px solid #000000b5;
                    }
                
                
                
                    .upKey2 {
                        margin-left: 3px;
                        margin-top: 3px;
                        cursor: pointer;
                    }
                
                    .downKey2 {
                        top: 0;
                        right: 0;
                        margin-right: 3px;
                        margin-top: 3px;
                        cursor: pointer;
                    }
                
                    .leftKey2 {
                        bottom: 0;
                        margin-left: 3px;
                        margin-bottom: 3px;
                        cursor: pointer;
                    }
                
                    /* .rightkey {
                                                                                        bottom: 0;
                                                                        right: 0;
                                                                        margin-right: 3px;
                                                                        margin-bottom: 3px;
                                                                        cursor: pointer;
                                                                                    } */
                    .rightKey2.focusKey2 {
                        bottom: 0;
                        right: 0;
                        margin-right: 3px;
                        margin-bottom: 3px;
                        cursor: pointer;
                    }
                
                    .okKey2 {
                        transform: translateY(-50%);
                        top: 52%;
                        right: -67%;
                        margin-right: 125px;
                        background: #ed030d;
                        /* border-radius: 20px; */
                        cursor: pointer;
                    }
                </style>
                <div class="keyBoard2">
                    <div class="upKey2 focusKey2">L√äN</div>
                    <div class="downKey2  focusKey2">XU·ªêNG</div>
                    <div class="leftKey2 focusKey2">TR√ÅI</div>
                    <div class="rightKey2 focusKey2">PH·∫¢I</div>
                </div>
            </div>
           
            <!-- end: b√†n ph√≠m -->
    
            <!-- mini map -->
            <style>
                .miniMap {
                    width: 39%;
                    height: 14%;
                    position: absolute;
                    right: 0px;
                    /* background: #0093ffa3; */
                    border: 1px solid #000;
                }
            
                .miniM {
                    position: absolute;
                    z-index: 2;
                }
                .miniExit {
                    position: absolute;
                }
                .khungMap {
                    width: 100%;
                    height: 100%;
                    position: absolute;
                   
                    /* background: #0093ffa3; */
                    z-index: 5;
                    border: 1px solid #000;
                    pointer-events: none;
                }
            </style>
            <div class="miniMap">
    
            </div>
             <!-- end: mini map  -->
        </div>
       
    </div>
</body>

<script>
    
// 1. C√°c bi·∫øn cho vi√™n ƒë·∫∑c bi·ªát
if ('bi·∫øn c·ªù') {
    var melonNgang = 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/melonNgang.png?raw=true'
    var melonDoc = 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/melonDoc.png?raw=true'

    var heartNgang = 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/heartNgang.png?raw=true'
    var heartDoc = 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/heartDoc.png?raw=true'

    var waterNgang = 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/waterNgang.png?raw=true'
    var waterDoc = 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/waterDoc.png?raw=true'

    var yingyangNgang = 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/yinyangNgang.png?raw=true'
    var yingyangDoc = 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/yinyangDoc.png?raw=true'

    var swordNgang = 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/swordNgang.png?raw=true'
    var swordDoc = 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/swordDoc.png?raw=true'

    var starNgang = 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/starNgang.png?raw=true'
    var starDoc = 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/starDoc.png?raw=true'

    var fiveBlock = 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/bomb5.png?raw=true'
    var melon3x3 = 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/melon33.png?raw=true'
    var heart3x3 = 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/heart33.png?raw=true'
    var sword3x3 = 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/sword33.png?raw=true'
    var yingyang3x3 = 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/yinyang33.png?raw=true'
    var star3x3 = 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/star33.png?raw=true'
    var water3x3 = 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/water33.png?raw=true'

    var heart3x2 = 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/New%20folder/heart333.png?raw=true'
    var melon3x2 = 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/New%20folder/melon333.png?raw=true'
    var sword3x2 = 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/New%20folder/sword333.png?raw=true'
    var yingyang3x2 = 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/New%20folder/yinyang333.png?raw=true'
    var star3x2 = 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/New%20folder/star333.png?raw=true'
    var water3x2 = 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/New%20folder/water333.png?raw=true'


    // c√°c bi·∫øn cho c√°c vi√™n b√¨nh th∆∞·ªùng 
    var star = 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/star.png?raw=true'
    var yingyang = 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/yingyang.png?raw=true'
    var sword = 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/sword.png?raw=true'
    var water = 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/water.png?raw=true'
    var heart = 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/heart.png?raw=true'
    var melon = 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/melon.png?raw=true'
    var blank = 'https://github.com/ImKennyYip/candy-crush/blob/master/images/blank.png?raw=true'

}
// 2.
function crush_Xong_R∆°i(xx) {
    if (yyy) {c·ªôngƒêi·ªÉmSauCrush(0)}; create4x_and3x();
    setTimeout(function () {
        otherTile = 0; currTile = 0; create4x_and3x();// cho 2 click v·ªÅ 0 
        checkClass(); listOfArrays = []; slide1()
    }, xx) // 200ms sau m·ªõi r∆°i c·ªù
}
// 3.
function m·∫£ng_C√≥_Vi√™n_N·ªï() {
    var m·∫£ng_Ko_Tr√πng = Array.from(new Set(specialArraymini)); specialArraymini = []; 
    for (var i = 0; i < m·∫£ng_Ko_Tr√πng.length; i++) {
    if (_6_Class_Ngang.includes(m·∫£ng_Ko_Tr√πng[i].classList[2])) { boomNgang(m·∫£ng_Ko_Tr√πng[i]); /*x.push(m·∫£ng_Ko_Tr√πng[i])*/ }
    else if (_6_Class_D·ªçc.includes(m·∫£ng_Ko_Tr√πng[i].classList[2])) { boomDoc(m·∫£ng_Ko_Tr√πng[i]); /*x.push(m·∫£ng_Ko_Tr√πng[i])*/ }
    else if (_6_Class_3x3.includes(m·∫£ng_Ko_Tr√πng[i].classList[2])) { boom3x3(m·∫£ng_Ko_Tr√πng[i]); /*x.push(m·∫£ng_Ko_Tr√πng[i])*/ }
    }
    // m·∫£ng_Ko_Tr√πng = m·∫£ng_Ko_Tr√πng.filter(item => !x.includes(item));
}
// 4.
function x√≥a_2_√î_ƒê·∫∑c_Bi·ªát_K·ªÅ_Nhau(x, y) {
    // x√≥a cho √¥ Ngang/D·ªçc v√† Ngang/D·ªçc
    if (_12_Class_Ngang_D·ªçc.includes(y.classList[2]) && _12_Class_Ngang_D·ªçc.includes(x.classList[2])) {setTime(x√≥a_Ngang_D·ªçc, 0)}
    // ---------------
    // x√≥a cho √¥ 3x3 v√† Ngang/D·ªçc     
    if (_6_Class_3x3.includes(y.classList[2]) || _6_Class_3x3.includes(x.classList[2])) {
        if (_6_Class_Ngang.includes(y.classList[2]) || _6_Class_Ngang.includes(x.classList[2])) {setTime(xoaNgang3x3, "Ngang")}
        else if (_6_Class_D·ªçc.includes(y.classList[2]) || _6_Class_D·ªçc.includes(x.classList[2])) {setTime(xoaNgang3x3, "Doc")}
    }
    // x√≥a cho √¥ 3x3 v√† 3x3
    if (_6_Class_3x3.includes(y.classList[2]) && _6_Class_3x3.includes(x.classList[2])) {setTime(xoa3x3vs3x3, 0)}
    // ---------------
    // x√≥a cho √¥ 5x v√† √¥ th∆∞·ªùng (Xclass)
    if ((x.classList[2] == "fiveBlock" || y.classList[2] == "fiveBlock") && (x.classList[2] == "Xclass" || y.classList[2] == "Xclass")) {
        if (x.classList[2] == 'fiveBlock') {setTime(xoa5xThuong, y)} else {setTime(xoa5xThuong, x)}
    } 
    // x√≥a cho √¥ 5x v√† √¥ ƒë·∫∑c bi·ªát (3x3, ngang, d·ªçc)
    if ((x.classList[2] == "fiveBlock"|| y.classList[2] == "fiveBlock") && (m∆∞·ªùi_T√°m_Class.includes(y.classList[2])||m∆∞·ªùi_T√°m_Class.includes(x.classList[2]))) {
        if (x.classList[2] == "fiveBlock") { setTime(xoa5xDacbiet, y)} else {setTime(xoa5xDacbiet, x)}
        console.log(x.classList[2], y.classList[2])
    }
    // khi c·∫£ 2 ƒë·ªÅu l√† 5x
    if (y.classList[2] == "fiveBlock" && x.classList[2] == "fiveBlock") {console.log("r·ªõt 5x5x");setTime(xoa5x5x, 0)} 
    function setTime(x, y) {setTimeout(function () { x(y) }, 300); return go = false}
}

// function x√≥a_2_√î_ƒê·∫∑c_Bi·ªát_K·ªÅ_Nhau(x, y) {
//     var classNames = [x.classList[2], y.classList[2]]; var classNames2 = [x.classList[0], y.classList[0]];
//     var isNgangDoc = classNames.every(x => _12_Class_Ngang_D·ªçc.includes(x));
//     var is3x3=classNames.some(x=>_6_Class_3x3.includes(x)),is3x3Two=classNames.every(x=>_6_Class_3x3.includes(x));
//     var isFiveBlock = classNames.includes("fiveBlock");
//     var isSpecial = classNames.some(x => m∆∞·ªùi_T√°m_Class.includes(x));
//     var isBassic = classNames2.some(x => s√°u_Class_Th∆∞·ªùng.includes(x));

//     if (isNgangDoc) { setTime(xoa_Ngang_D·ªçc, 0)}
//     else if (is3x3) {  //setTime(xoa_Ngang3x3, _6_Class_Ngang.includes(classNames[0]) ? "Ngang" : "Doc");
//         if (_6_Class_Ngang.includes(y.classList[2]) || _6_Class_Ngang.includes(x.classList[2])) {setTime(xoaNgang3x3, "Ngang")}
//         else if (_6_Class_D·ªçc.includes(y.classList[2]) || _6_Class_D·ªçc.includes(x.classList[2])) {setTime(xoaNgang3x3, "Doc")}}
//     else if (is3x3Two) {setTime(xoa_3x3_vs_3x3, 0)}
//     if (isFiveBlock && (classNames.includes("Xclass") || isSpecial)) {
//         setTime(isSpecial ? xoa5xDacbiet : xoa5xThuong, isFiveBlock ? y : x);
//     }
//     else if (isFiveBlock && isSpecial) {setTime(xoa5xDacbiet,  classNames[] == 'fiveBlock' ? y : x)}
//     else if (classNames.every(x => x == "fiveBlock")) {setTime(xoa5x5x, 0)}
// }


// 5.
function l·∫•y_Ph·∫ßn_T·ª≠_Chung(arr) {
    let set = new Set();
    let duplicates = [];

    for (let num of arr) {
        if (!set.has(num)) {
            set.add(num);
        } else {
            duplicates.push(num);
        }
    }

    return Array.from(new Set(duplicates)); // Lo·∫°i b·ªè c√°c ph·∫ßn t·ª≠ tr√πng l·∫∑p trong m·∫£ng duplicates
}
// 6.
function test_C√≥_T·∫°o_4x_V√†_5x_ko() {
    for (var i = 0; i < listOfArrays.length; i++) {
        if (listOfArrays[i].length == 4) {m·∫£ng_4_√î.push(listOfArrays[i])}
        if (listOfArrays[i].length >= 5) {m·∫£ng_5_√î.push(listOfArrays[i])}
    }

}
// 7. th·ª±c hi·ªán t·∫°o √¥ ƒë·∫∑c bi·ªát
function create4x_and3x() {
    setTimeout(function () {
        for (var i = 0; i < m·∫£ng_5_√î.length; i++) {
            if (m·∫£ng_5_√î[i].indexOf(otherTile) != -1 || m·∫£ng_5_√î[i].indexOf(currTile) != -1) {
                for (var d = 0; d < m·∫£ng_5_√î[i].length; d++) {
                    if (m·∫£ng_5_√î[i][d].id == otherTile.id || m·∫£ng_5_√î[i][d].id == currTile.id) {
                        m·∫£ng_5_√î[i][d].src = fiveBlock
                    }
                }
            } else {
                var d = Math.floor(Math.random() * m·∫£ng_5_√î[i].length)
                m·∫£ng_5_√î[i][d].src = fiveBlock
            }
        }
        m·∫£ng_5_√î = []
    }, 30)
    setTimeout(function () {
        function m4(x, y) {
            for (var j = 0; j < s√°u_Class_Th∆∞·ªùng.length; j++) {
                if (x.classList[0] == s√°u_Class_Th∆∞·ªùng[j]) { x.src = y[j] }
            }
        }
        for (var i = 0; i < m·∫£ng_4_√î.length; i++) {
            if (m·∫£ng_4_√î[i].indexOf(otherTile) != -1 || m·∫£ng_4_√î[i].indexOf(currTile) != -1) {
                for (var d = 0; d < m·∫£ng_4_√î[i].length; d++) {
                    if (m·∫£ng_4_√î[i][d].id == otherTile.id || m·∫£ng_4_√î[i][d].id == currTile.id) {
                        var k = m·∫£ng_4_√î[i][1].id.split("-"); a = Number(k[0])
                        var k2 = m·∫£ng_4_√î[i][2].id.split("-"); a2 = Number(k2[0])
                        var k3 = m·∫£ng_4_√î[i][3].id.split("-"); a3 = Number(k3[0])
                        if (a == a2 && a2 == a3) { m4(m·∫£ng_4_√î[i][d], s√°u_Bi·∫øn_D·ªçc) }
                        else { m4(m·∫£ng_4_√î[i][d], s√°u_Bi·∫øn_Ngang) }
                    }
                }
            } else {
                var d = Math.floor(Math.random() * m·∫£ng_4_√î[i].length)
                var k = m·∫£ng_4_√î[i][0].id.split("-"); a = Number(k[0])
                var k2 = m·∫£ng_4_√î[i][1].id.split("-"); a2 = Number(k2[0])
                var k3 = m·∫£ng_4_√î[i][2].id.split("-"); a3 = Number(k3[0])
                if (a == a2 && a2 == a3) { m4(m·∫£ng_4_√î[i][d], s√°u_Bi·∫øn_D·ªçc) }
                else { m4(m·∫£ng_4_√î[i][d], s√°u_Bi·∫øn_Ngang) }
            }
        }
        m·∫£ng_4_√î = []
    }, 25)
    if (√î_T·∫°o_Boom_3x3.length > 0) {
        setTimeout(function () {
            for (var i = 0; i < √î_T·∫°o_Boom_3x3.length; i++) {
                for (var j = 0; j < s√°u_Class_Th∆∞·ªùng.length; j++) {
                    if (√î_T·∫°o_Boom_3x3[i].classList[0] == s√°u_Class_Th∆∞·ªùng[j]) {
                        √î_T·∫°o_Boom_3x3[i].src = s√°u_Bi·∫øn_Boom_3x[j]
                    }
                } // cho class v√†o c·ªù. v√≠ d·ª• c·ªù melon class "melon"
            }
            √î_T·∫°o_Boom_3x3 = []
        }, 20)
    }
    setTimeout(function () { dayTh = 0;  }, 40)
}
// 8. ki·ªÉm tra xem c√≥ vi√™n ƒë·∫∑c bi·ªát ko
function test_C√≥_Vi√™n_ƒê·∫∑c_Bi·ªát_Ko() {
    var u = 0
    for (var i = 0; i < listOfArrays.length; i++) {
        for (var d = 0; d < listOfArrays[i].length; d++) {
            for (var j = 0; j < m∆∞·ªùi_T√°m_Class.length; j++) {
                if (listOfArrays[i][d].classList[2] == m∆∞·ªùi_T√°m_Class[j]) { u++ }
            }
        }
    }
    return u
}
// 9.
function ƒëem_C·ªù_ƒê·∫∑c_Bi·ªát_L·∫•y_M·∫£ng_N·ªï() {
    for (var i = 0; i < listOfArrays.length; i++) {
        for (var d = 0; d < listOfArrays[i].length; d++) {
            var mm = 0
            for (var j = 0; j < _6_Class_Ngang.length; j++) { if (listOfArrays[i][d].classList[2] == _6_Class_Ngang[j]) {mm++; boomNgang(listOfArrays[i][d]) }}
            if (mm == 0) {
            for (var j = 0; j < _6_Class_D·ªçc.length; j++) { if (listOfArrays[i][d].classList[2] == _6_Class_D·ªçc[j]) {mm++; boomDoc(listOfArrays[i][d])}} }
            if (mm == 0) {
            for (var j = 0; j < _6_Class_3x3.length; j++) { if (listOfArrays[i][d].classList[2] == _6_Class_3x3[j]) {/*specialArraymini3x2.push(listOfArrays[i][d]);*/ boom3x3(listOfArrays[i][d]) }}
            }
        }
    }
}
// 10.
function x√≥a_Vi√™n_N·ªï(x, dd, xx) {
    var opacity = 1;
    var mimi = setInterval(function () {opacity -= 0.1; x.style.opacity = opacity;
        if (opacity <= 0) {
            x.src = blank; x.style.opacity = '1'; clearInterval(mimi); abcm--; 
            if (abcm == 0 && dd > 0) {crushCandy()}
            else if (abcm == 0 ) {clearInterval(mimi);m·∫£ng_N·ªï=[];
                if(specialArraymini.length>0 || specialArraymini5.length > 0){x·ª≠_Array_Mini()}else{crush_Xong_R∆°i(xx)}
            }
        }
    }, 40);
}
// 11.
function checkValid() {
    //check h√†ng
    for (let i = 0; i < h√†ng; i++) {
        for (let j = 0; j < c·ªôt - 2; j++) {
            let candy1 = board[i][j]; let candy2 = board[i][j + 1]; let candy3 = board[i][j + 2];
            if (candy1.classList[0] == candy2.classList[0] && candy2.classList[0] == candy3.classList[0] && !candy1.src.includes(blank)) {
                return true;
            }
        }
    }

    //check c·ªôt
    for (let j = 0; j < c·ªôt; j++) {
        for (let i = 0; i < h√†ng - 2; i++) {
            let candy1 = board[i][j]; let candy2 = board[i + 1][j]; let candy3 = board[i + 2][j];
            if (candy1.classList[0] == candy2.classList[0] && candy2.classList[0] == candy3.classList[0] && !candy1.src.includes(blank)) {
                return true;
            }
        }
    }
    return false;
}
// 12.
function haha(cot, id_Ne) {
    function randomChess(b) {
        var x = Math.floor(Math.random() * s√°u_Bi·∫øn_Th∆∞·ªùng.length)
        document.getElementById(b).src = s√°u_Bi·∫øn_Th∆∞·ªùng[x] 
    }

    var mm = 0
    for (var i = cot.length - 1; i >= 0; i--) {
        if (cot[i].src == blank) {
            mm++
            randomChess(id_Ne)
            var n = 0; var ii = i; var arrayTop = []
            for (var j = 0; j < ii; j++) {
                arrayTop.push(cot[j].style.top)
            }
            function goo() {
                n++; 
                for (var j = 0; j < ii; j++) {
                    cot[j].classList.replace(cot[j].classList[4], "i4")
                    cot[j].style.top = Number(cot[j].style.top.slice(0, -3)) + nammuoi / 5 + 'rem'
                }
                if (n < 5) { setTimeout(function () { goo() }, timeX) }
                else {
                    for (var j = ii; j >= 0; j--) {
                        if (j > 0) { cot[j].src = cot[j - 1].src }
                        if (j == 0) { cot[0].src = '' }
                        cot[j].classList.replace(cot[j].classList[4], "i3")
                    }
                    for (var j = 0; j < ii; j++) {cot[j].style.top = arrayTop[j]}
                    haha(cot, id_Ne)
                }
            }
            setTimeout(function () { goo() }, timeX); break;
        }
    }
    if (mm == 0) { abcn++ }
}
// 13.
function xem_Gh√©p_C·ªù_C√≥_K·ªÅ_Kh√¥ng() {
    let currCoords = currTile.id.split("-"); // id="0-0" -> ["0", "0"]
    let r = parseInt(currCoords[0]);
    let c = parseInt(currCoords[1]);

    let otherCoords = otherTile.id.split("-");
    let r2 = parseInt(otherCoords[0]);
    let c2 = parseInt(otherCoords[1]);

    let moveLeft = c2 == c - 1 && r == r2;
    let moveRight = c2 == c + 1 && r == r2; 
    let moveUp = r2 == r - 1 && c == c2;
    let moveDown = r2 == r + 1 && c == c2;

    let isAdjacent = moveLeft || moveRight || moveUp || moveDown;
    return isAdjacent
}
// 14.
function l·∫•y_ListArray() {
    //check h√†ng
    for (let r = 0; r < h√†ng; r++) {
        let array = [], candy1 = board[r][0]; array.push(candy1);

        for (let c = 1; c < c·ªôt; c++) {
            if (candy1.classList[0] == board[r][c].classList[0]) {
                array.push(board[r][c]);
            } else {
                candy1 = board[r][c];
                if (array.length >= 3) { listOfArrays.push(array) }
                array = []; array.push(candy1);
            }
            if (c == (c·ªôt - 1)) { if (array.length >= 3) { listOfArrays.push(array) } }
        }
    }
    //check c·ªôt
    for (let c = 0; c < c·ªôt; c++) {
        let candy1 = board[0][c], array = []; array.push(candy1);
        for (let r = 1; r < h√†ng; r++) {
            if (candy1.classList[0] == board[r][c].classList[0]) {
                array.push(board[r][c]);
            } else {
                candy1 = board[r][c];
                if (array.length >= 3) { listOfArrays.push(array) }
                array = []; array.push(candy1);
            }
            if (r == (h√†ng - 1)) { if (array.length >= 3) { listOfArrays.push(array) } }
        }
    }
}
// 16.
function l√†m_Tr√≤n(number, decimalPlaces) {
    var factor = Math.pow(10, decimalPlaces);
    return Math.round(number * factor) / factor;
}
// 17.
function inforBattlee(hp, hpMax, mana, manaMax, xu, lv, lvPercent, gi√°p, h·ªìng_ng·ªçc /*dame*/) {
    // c·ªông tr·ª´ ƒëi·ªÉm
    {
        // x = 1 l√† tr·ª´ m√°u, 2 l√† c·ªông, y l√† s·ªë m√°u c·ªông tr·ª´
        this.hp = function (x, y) {
            if (x == 1) { // (1) tr·ª´ m√°u
                if (gi√°p > 0) { // a) n·∫øu gi√°p > 0 
                    gi√°p = l√†m_Tr√≤n(gi√°p - y, 2)  // gi√°p = 35 gi√°p - 4 st
                    if (gi√°p < 0) { // tr·ª´ m√°u l·ªë v√†o gi√°p
                        var aa = Math.abs(gi√°p); hp = l√†m_Tr√≤n(hp - aa, 2); gi√°p = 0  // (-35)
                        if (hp <= 0) { hp = 0; /*this.lv(2)*/ }; return hp  
                    }; return hp  
                } else {
                    hp = l√†m_Tr√≤n(hp - y, 2); if (hp <= 0) { hp = 0; /*this.lv(2)*/ }; return hp  
                }
                
            } else if (x == 2) { //(2) c·ªông m√°u
                hp = l√†m_Tr√≤n(hp + y, 2)
                if (hp > lvPoint(this.lvInfor())[0]) { hp = lvPoint(this.lvInfor())[0] }; return hp 
            }
        }
        this.mana = function (x, y) {
            if (x == 1) {if (y <= mana) { return mana = l√†m_Tr√≤n(mana - y, 2) } else { return false }} 
            else {mana = l√†m_Tr√≤n(mana + y, 2); if (mana > 300) mana = 300; return mana}
        }
        this.gi√°p = function (x, y) {
            if (x == 1) { quai.hp(1, y) } else { mee.hp(1, y) }
            return gi√°p = l√†m_Tr√≤n(gi√°p + y, 2)
        }
        this.xu = function (x, y) {
            if (x == 1) { if (y <= xu) {return xu = l√†m_Tr√≤n(xu - y, 2) } else { return false }} // tr·ª´ ti·ªÅn 
            else { return xu = l√†m_Tr√≤n(xu + y, 2) } // c·ªông ti·ªÅn
        }
        this.h·ªìng_ng·ªçc = function (x, y) {
            if (x == 1) {
                if(y<=h·ªìng_ng·ªçc){return h·ªìng_ng·ªçc=l√†m_Tr√≤n(h·ªìng_ng·ªçc-y,2)}else{return false }
            } else {return h·ªìng_ng·ªçc = l√†m_Tr√≤n(h·ªìng_ng·ªçc + y, 2) }
        }
        this.lv = function (x) {
            if (x == 1) {
                lvPercent = lvPercent + 2
                if (lvPercent >= 100) {
                    lv = lv + 1; lvPercent = 0;
                    hp = lvPoint(this.lvInfor())[0]; hpMax = lvPoint(this.lvInfor())[0]
                }
            } else {
                lvPercent = lvPercent - 4
                hp = lvPoint(this.lvInfor())[0]; hpMax = lvPoint(this.lvInfor())[0]
                if (lvPercent < 0) {
                    lv = lv - 1; i = Math.abs(lvPercent)
                    lvPercent = 100 - i
    
                    hp = lvPoint(this.lvInfor())[0]; hpMax = lvPoint(this.lvInfor())[0]
                        ; if (lv < 0) {
                            lv = 0; lvPercent = 0
                            hp = lvPoint(this.lvInfor())[0]; hpMax = lvPoint(this.lvInfor())[0]
                        }
                }
            }
        }
    }
    // l·∫•y th√¥ng tin
    {
        this.hpInfor = function () { return hp = l√†m_Tr√≤n(hp, 2) }           /*hp*/
        this.hpMaxInfor = function () { return hpMax }
        this.hpMa = function (xx) { hp = xx; hpMax = xx }                    
        this.manaInfor = function () { return mana }                         /*mana*/
        this.manaMaxInfor = function () { return manaMax }
        this.xuInfor = function () { return xu }                             /*xu*/
        this.lvInfor = function () { return lv }                             /*lv*/
        this.lvPercentInfor = function () { return lvPercent }               /* % */
        this.gi√°pInfor = function () { return gi√°p = l√†m_Tr√≤n(gi√°p, 2) }     /*gi√°p*/
        this.h·ªìng_ng·ªçcInfor = function () { return h·ªìng_ng·ªçc }               /*h·ªìng ng·ªçc*/
    }
    hp = lvPoint(this.lvInfor())[0]; hpMax = lvPoint(this.lvInfor())[0]  //console.log(this.lvInfor()) qu√°i v√† me
}
// 18.
function inforMee(namee, lv, lvPercent, xu, kim_c∆∞∆°ng, h·ªìng_ng·ªçc) {
    /*1. t√™n NV*/this.namee = function () { return namee }
    /*2. c·∫•p*/this.lvInfor = function () { return lv }
    /*3. % */this.lvPercentInfor = function () { return lvPercent }
    /*4. v√†ng*/this.xuInfor = function () { return xu }
    /*5. kim c∆∞∆°ng*/this.kim_c∆∞∆°ngInfor = function () { return kim_c∆∞∆°ng }
    /*6. h·ªìng ng·ªçc*/this.kim_c∆∞∆°ngInfor = function () { return h·ªìng_ng·ªçc }
}

// var aaa = [
//     [1, 0],
//     [1, 8],
//     [1, 0],
//     [2, 5], [2, 9], [3, 0], [4, 0], [4,1]
// ];
function l·∫•y_special5(a) {
    // T·∫°o m·ªôt ƒë·ªëi t∆∞·ª£ng ƒë·ªÉ l∆∞u tr·ªØ m·∫£ng con ƒë·∫ßu ti√™n c·ªßa m·ªói ph·∫ßn t·ª≠ ƒë·∫ßu
    const firstElements = {};

    // Duy·ªát qua m·∫£ng a v√† l·∫•y m·∫£ng con ƒë·∫ßu ti√™n c·ªßa m·ªói ph·∫ßn t·ª≠ ƒë·∫ßu
    a.forEach(subArray => {
        const firstElement = subArray[0];
        if (!firstElements[firstElement]) {
            firstElements[firstElement] = subArray;
        }
    });

    // Chuy·ªÉn c√°c m·∫£ng con t·ª´ ƒë·ªëi t∆∞·ª£ng th√†nh m·∫£ng v√† l∆∞u v√†o m·∫£ng k·∫øt qu·∫£
    return result = Object.values(firstElements);

    //console.log(result); // Output: [[1, 0], [2, 5], [3, 0]]
}











// //r√°c
// {  function x√≥a_Ngang_D·ªçc() {
//     var k = otherTile.id.split("-"); a = Number(k[0]); b = Number(k[1])
//     var k2 = currTile.id.split("-"); a2 = Number(k2[0]); b2 = Number(k2[1])

//     function mimi(xx, y, z) { 
//         if (yy) {
//             if (xx) { add_blur_3x22(board[a + y][b + z], otherTile.classList[0]) }
//         }
//         if (xx) m·∫£ng_N·ªï.push(board[a + y][b + z])
//     } // add
//     mimi(a + 2 <=/*8*/h√†ng - 1, 2, 0); mimi(a + 3 <=/*8*/h√†ng - 1, 3, 0); mimi(a - 2 >= 0, -2, 0); mimi(a - 3 >= 0, -3, 0)
//     mimi(b + 2 <=/*8*/c·ªôt - 1, 0, 2); mimi(b + 3 <=/*8*/c·ªôt - 1, 0, 3); mimi(b - 2 >= 0, 0, -2); mimi(b - 3 >= 0, 0, -3)

//     if (b - 1 != b2 ) { mimi(b - 1 >= 0 , 0, -1)}; if (b + 1 != b2) { mimi(b + 1 <=/*8*/c·ªôt - 1, 0, 1)}
//     if (a - 1 != a2) { mimi(a - 1 >= 0, -1, 0)}; if (a + 1 != a2) { mimi(a + 1 <=/*8*/h√†ng - 1, 1, 0)}

//     function mi(xx, y, z) { if (xx) { m·∫£ng_N·ªï.push(board[a + y][b + z]) } } // x√≥a
//     mi(a + 1 <= 8, 1, 0); mi(a + 2 <= 8, 2, 0); mi(a + 3 <= 8, 3, 0); mi(a - 1 >= 0, -1, 0); mi(a - 2 >= 0, -2, 0); mi(a - 3 >= 0, -3, 0)
//     mi(b + 1 <= 8, 0, 1); mi(b + 2 <= 8, 0, 2); mi(b + 3 <= 8, 0, 3); mi(b - 1 >= 0, 0, -1); mi(b - 2 >= 0, 0, -2); mi(b - 3 >= 0, 0, -3)
//     m·∫£ng_N·ªï.push(board[a][b])
//     x·ª≠_Array_Mini(200)
// }}

//7. Qu√°i l·ª±a c·∫•p ƒë·ªô kh√≥ ƒë·ªÉ ƒë√°nh 
    // function auto_Fight() {
    //     //m√¥ h√¨nh: (0)auto_Boom5x, (1)N3D, (2)li√™n5, (3)li√™n4, (4)li√™n3
    //     var m·∫£ng_Auto = [auto_Boom5x, auto_N3D, auto_5x, auto_4x, auto_3x]
    //     var m·∫£ng_ƒêi_5_H∆∞·ªõng = see_Chess(), m·∫£ng_True = []
    //     for (var i = 0; i < m·∫£ng_ƒêi_5_H∆∞·ªõng.length; i++) {
    //         if (m·∫£ng_ƒêi_5_H∆∞·ªõng[i] == true) { m·∫£ng_True.push(m·∫£ng_ƒêi_5_H∆∞·ªõng.indexOf(i)) }
    //     } // coi n√†o true, l·∫•y id c·ªßa n√≥ v√¥ m·∫£ng_True ||  vd: true 0, true 1, false 2  ==>  0, 1
    //     var y = Math.floor(Math.random() * m·∫£ng_True.length) 
    //     // var nn = m·∫£ng_True[y] // l·∫•y ƒëc random id
    //     m·∫£ng_Auto[y]
    //     function endd(xx) {
    //         currTile.classList.replace(currTile.classList[3], 'focus')// m·ªü focus Cur
    //         setTimeout(function () { 
    //             currTile.classList.replace(currTile.classList[3], 'fc')
    //         }, 900)// t·∫Øt focus Cur
    //         setTimeout(function () {
    //             let currImg = currTile.src; let otherImg = otherTile.src;
    //             currTile.src = otherImg; otherTile.src = currImg
    //             otherTile.classList.replace(otherTile.classList[3], 'outFocus')// m·ªü focus Other
    //             // x√≥a 2 √¥ ƒë·∫∑c bi·ªát
    //             setTimeout(function(){otherTile.classList.replace(otherTile.classList[3],'fc')},400)//t·∫Øt focus Other
    //             if (xx == 1) {setTimeout(function () {readycrush()}, 700)} 
    //             else {setTimeout(function () {x√≥a_2_√î_ƒê·∫∑c_Bi·ªát_K·ªÅ_Nhau(currTile, otherTile)}, 700)}
    //         }, 1100)
    //     }
    //     function startt(yy) {
    //         if (yy < 5) {
    //             // yy l√† v·ªã tr√≠ √¥ ƒë·∫∑c bi·ªát, rd l√† n c·∫∑p √¥ ƒë·∫∑c bi·ªát, 0 1 l√† √¥ c·∫ßn t√¨m
    //             var rd = Math.floor(Math.random() * auto_Boom5x()[yy].length)  
    //             var random = Math.floor(Math.random() * 2) + 1 
    //             if (random == 1) {currTile = auto_Boom5x()[yy][rd][0]; otherTile = auto_Boom5x()[yy][rd][1]} 
    //             else {currTile = auto_Boom5x()[yy][rd][1]; otherTile = auto_Boom5x()[yy][rd][0]}
    //         } else {
    //             var rd = Math.floor(Math.random() * auto_N3D()[1].length)  
    //             var random = Math.floor(Math.random() * 2) + 1 
    //             if (random == 1) {currTile = auto_N3D()[1][rd][0]; otherTile = auto_N3D()[1][rd][1]} 
    //             else {currTile = auto_N3D()[1][rd][1]; otherTile = auto_N3D()[1][rd][0]}
    //         }
    //     }

    //     function mi(x) {
    //         var randomm = Math.floor(Math.random() * a[x].length) 
    //         var random1_2 = Math.floor(Math.random() * 2) + 1
    //         if (random1_2 == 1) {currTile = a[x][randomm][0]; otherTile = a[x][randomm][1]}
    //         else {currTile = a[x][randomm][1]; otherTile = a[x][randomm][0]}
    //     }
    //     function mimi(yy) {
    //         var a = yy(1), N_Vi√™n_ƒêB = [], N_Nh√°nh = [],n = 0 //a[1] l·∫•y all m·∫£ng|
    //         for(var i=0;i<a[1].length;i++){N_Vi√™n_ƒêB.push(a[1][i][2]);N_Nh√°nh.push(a[1][i][3]);if(a[1][i][2]>0){n++}}
    //         if (n > 0) { mi(N_Vi√™n_ƒêB)} else {mi(N_Nh√°nh)}  // a[1][0]|[2],  a[1][1]|[2]   |[0] v√† [1] l·∫•y g·ªëc
    //         function mi(xx) { //N_Vi√™n_ƒêB, xx
    //             var maxInNumbers = Math.max.apply(Math, xx), indexes = [];
    //             for (var j = 0; j < xx.length; j++) { if (xx[j] === maxInNumbers) { indexes.push(j); } }
    //             var randomm = Math.floor(Math.random()*indexes.length),random1_2 = Math.floor(Math.random()*2)+1
    //             if (random1_2 == 1) { currTile = a[1][randomm][0]; otherTile = a[1][randomm][1] }
    //             else { currTile = a[1][randomm][1]; otherTile = a[1][randomm][0] }
    //         } // ƒëem cu·ªëi: console.log(currTile.id, otherTile.id)
    //     }
        
    //     if (nn == 0) {
    //         var a=auto_Boom5x();if(a[1].length>0){mi(1)} else if(a[2].length>0){mi(2)} else if(a[3].length>0){mi(3)}} 
    //     else if (nn == 1) { var a = auto_N3D(); mi(1)}
    //     else if (nn = 2) {mimi(auto_5x)} else if (nn = 3) {mimi(auto_4x)} else if (nn = 3) {mimi(auto_3x)}
        
    //     else if (/**auto_5x()[0]*/ nn == 2) {    
    //         // 0, 1 , 2/readycrush2(5)[1], 3/readycrush2(5)[2]]
    //         var array_N3D = [], array_N3D_id = [], array_N3D_Max = [], array_N3D_id_Max = []
    //         for (var y of auto_5x_array) {
    //             if (y[2] > 0) {array_N3D.push(y[2]); array_N3D_id.push([y[0], y[1]])} 
    //         }
    //         if (array_N3D.length > 0) {
    //             var maxInNumbers = Math.max.apply(Math, array_N3D)
    //             for (var i = 0; i < array_N3D.length; i++) {
    //                 if (array_N3D[i] == maxInNumbers) {
    //                     array_N3D_Max.push(array_N3D[i])
    //                     array_N3D_id_Max.push(array_N3D_id[i])
    //                 }
    //             }
    //             var random = Math.floor(Math.random() * array_N3D_Max.length)
    //             currTile = array_N3D_id_Max[random][0]
    //             otherTile = array_N3D_id_Max[random][1]
    //         } else {
    //             for (var y of auto_5x_array) {array_N3D.push(y[3]); array_N3D_id.push([y[0], y[1]])}
    //             var maxInNumbers = Math.max.apply(Math, array_N3D)
    //             for (var i = 0; i < array_N3D.length; i++) {
    //                 if (array_N3D[i] == maxInNumbers) {
    //                     array_N3D_Max.push(array_N3D[i])
    //                     array_N3D_id_Max.push(array_N3D_id[i])
    //                 }
    //             }
    //             var random = Math.floor(Math.random() * array_N3D_Max.length)
    //             currTile = array_N3D_id_Max[random][0]
    //             otherTile = array_N3D_id_Max[random][1]
    //         }
    //         endd(1) // console.log(array_N3D_Max, array_N3D_id_Max)
    //     }
    //     else if (/**auto_4x()[0]*/ nn == 3) {    
    //         // 0, 1 , 2/readycrush2(5)[1], 3/readycrush2(5)[2]]
    //         var array_N3D = [], array_N3D_id = [], array_N3D_Max = [], array_N3D_id_Max = []
    //         for (var y of auto_4x_array) {
    //             if (y[2] > 0) {array_N3D.push(y[2]); array_N3D_id.push([y[0], y[1]])} 
    //         }
    //         if (array_N3D.length > 0) {
    //             var maxInNumbers = Math.max.apply(Math, array_N3D)
    //             for (var i = 0; i < array_N3D.length; i++) {
    //                 if (array_N3D[i] == maxInNumbers) {
    //                     array_N3D_Max.push(array_N3D[i]); array_N3D_id_Max.push(array_N3D_id[i])
    //                 }
    //             }
    //             var random = Math.floor(Math.random() * array_N3D_Max.length)
    //             currTile = array_N3D_id_Max[random][0]; otherTile = array_N3D_id_Max[random][1]
    //         } else {
    //             for (var y of auto_4x_array) {
    //                 array_N3D.push(y[3])
    //                 array_N3D_id.push([y[0], y[1]])
    //             }
    //             var maxInNumbers = Math.max.apply(Math, array_N3D)
    //             for (var i = 0; i < array_N3D.length; i++) {
    //                 if (array_N3D[i] == maxInNumbers) {
    //                     array_N3D_Max.push(array_N3D[i])
    //                     array_N3D_id_Max.push(array_N3D_id[i])
    //                 }
    //             }
    //             var random = Math.floor(Math.random() * array_N3D_Max.length)
    //             currTile = array_N3D_id_Max[random][0]
    //             otherTile = array_N3D_id_Max[random][1]
    //         }
    //         endd(1) // console.log(array_N3D_Max, array_N3D_id_Max)
    //     } 
    //     else if (/**auto_3x()[0]*/ nn == 4) {    
    //         // 0, 1 , 2/readycrush2(5)[1], 3/readycrush2(5)[2]]
    //         var array_N3D = [], array_N3D_id = [], array_N3D_Max = [], array_N3D_id_Max = []
    //         for (var y of auto_3x_array) {
    //             if (y[2] > 0) {
    //                 array_N3D.push(y[2]); array_N3D_id.push([y[0], y[1]])
    //             } 
    //         }
    //         if (array_N3D.length > 0) {
    //             var maxInNumbers = Math.max.apply(Math, array_N3D)
    //             for (var i = 0; i < array_N3D.length; i++) {
    //                 if (array_N3D[i] == maxInNumbers) {
    //                     array_N3D_Max.push(array_N3D[i])
    //                     array_N3D_id_Max.push(array_N3D_id[i])
    //                 }
    //             }
    //                     var random = Math.floor(Math.random() * array_N3D_Max.length) 
    //                     currTile = array_N3D_id_Max[random][0]
    //                     otherTile = array_N3D_id_Max[random][1]
    //         } else {
    //             for (var y of auto_3x_array) {
    //                     array_N3D.push(y[3])
    //                     array_N3D_id.push([y[0], y[1]])
    //             }

    //             var maxInNumbers = Math.max.apply(Math, array_N3D)

    //             for (var i = 0; i < array_N3D.length; i++) {
    //                 if (array_N3D[i] == maxInNumbers) {
    //                     array_N3D_Max.push(array_N3D[i])
    //                     array_N3D_id_Max.push(array_N3D_id[i])
    //                 }
    //             }
    //                     var random = Math.floor(Math.random() * array_N3D_Max.length) 
    //                     currTile = array_N3D_id_Max[random][0]
    //                     otherTile = array_N3D_id_Max[random][1]
    //         }
    //         endd(1)
    //     }
    // }



    // var tableContainer = document.getElementById("board"); // L·∫•y th·∫ª div ƒë·ªÉ ch·ª©a b·∫£ng
    // var table = document.createElement("table"); // T·∫°o b·∫£ng
    // // T·∫°o √¥ v√† th√™m v√†o b·∫£ng
    // for (var i = 0; i < h√†ng; i++) {
    //     var row = document.createElement("tr"); // T·∫°o m·ªôt h√†ng m·ªõi
    //     for (var j = 0; j < c·ªôt; j++) {
    //         var cell = document.createElement("td"); // T·∫°o m·ªôt √¥ m·ªõi
    //         let tile = document.createElement("img");//<img id="0-0" src="./images/Red.png">.T·∫°o m·ªôt th·∫ª h√¨nh ·∫£nh m·ªõi
    //         tile.src = randomCandy(); tile.style.opacity = "1" // th√™m ·∫£nh v√† ƒë·ªô m·ªù 1
    //         tile.className = s√°u_Class_Th∆∞·ªùng[s√°u_Bi·∫øn_Th∆∞·ªùng.indexOf(tile.src)]
    //         tile.classList.add("ch-Chess", "Xclass", "fc", "i3", "absolute")
    //         tile.addEventListener("click", click_Other); tile.addEventListener("click", click_Curr);
    //         tile.id = i.toString() + "-" + j.toString(); // set id     
    //         // board_table.append(tile); row.push(tile);// !!! append th√™m nhi·ªÅu con 1 l√∫c ƒëc
    //         cell.append(tile); row.append(cell); // Th√™m h√¨nh ·∫£nh v√†o √¥. Th√™m √¥ v√†o h√†ng
    //     }
    //     table.append(row); board.push(row)// Th√™m h√†ng v√†o b·∫£ng
    // }

    // // Th√™m b·∫£ng v√†o th·∫ª div
    // tableContainer.appendChild(table);


    // var board_table = document.getElementById("board"); //L·∫•y th·∫ª t·ª´ HTML v√† l∆∞u tr·ªØ v√†o bi·∫øn board_table.
    // for (let r = 0; r < h√†ng; r++) { let row = []; // Kh·ªüi t·∫°o m·ªôt m·∫£ng r·ªóng ƒë·ªÉ l∆∞u tr·ªØ c√°c √¥ c·ªßa h√†ng
    //     for (let c = 0; c < c·ªôt; c++) {
    //         let tile = document.createElement("img"); // <img id="0-0" src="./images/Red.png"> T·∫°o m·ªôt th·∫ª <img> m·ªõi
    //         tile.src = randomCandy(); tile.style.opacity = "1" // th√™m ·∫£nh v√† ƒë·ªô m·ªù 1
    //         tile.className = s√°u_Class_Th∆∞·ªùng[s√°u_Bi·∫øn_Th∆∞·ªùng.indexOf(tile.src)]
    //         tile.classList.add("ch-Chess", "Xclass", "fc", "i3", "absolute")
    //         tile.addEventListener("click", click_Other); tile.addEventListener("click", click_Curr);
    //         tile.id = r.toString() + "-" + c.toString(); // set id     
    //         board_table.append(tile); row.push(tile);// !!! append th√™m nhi·ªÅu con 1 l√∫c ƒëc
    //         // Th√™m ·∫£nh v√†o th·∫ª <div> ch·ª©a b·∫£ng | Th√™m ·∫£nh v√†o m·∫£ng h√†ng hi·ªán t·∫°i
    //     }; board.push(row); // Th√™m m·∫£ng h√†ng v√†o m·∫£ng l∆∞u tr·ªØ to√†n b·ªô b·∫£ng
    // }

    // function createE(x, b) {
    //     x = document.createElement("img"); board_table.append(x) // table.append(x)
    //     x.style.top = (-nammuoi) + 'rem'; x.style.left = nammuoi * b + 'rem'
    //     x.classList.add("absolute"); x.id = 0 + "-" + '*' + b;
    // }
    // for (var i = 0; i < c·ªôt; i++) { let tile; createE(tile, i) }
    // for (var i = 0; i < h√†ng; i++) { // c√†i v·ªã tr√≠. √¥ n√†y top 50rem left 20rem
    //     for (var e = 0; e < c·ªôt; e++) {
    //         var b=nammuoi*i, c=nammuoi*e; board[i][e].style.top = b + 'rem'; board[i][e].style.left = c + 'rem'
    //     }
    // }
</script>
<script >
    if ('khai b√°o') {
    var a_Focus, b_Focus, √î_T·∫°o_Boom_3x3 = []
    var board = [], h√†ng = 9, c·ªôt = 9; m·∫£ng_N·ªï = []
    var currTile = undefined, otherTile = undefined, othersTile = undefined; // ???
    var abcm = 0, numbGo = 0

    var slideLoop, timeX = 70, zeroArray = [], cotArray = [], m·∫£ng_Bom_3x2 = []

    var dame , hpPoint , gi√°pPoint , hpMax, manaPoint = 9, manaMax = 300
    var meeArray = [150, 150],dam=[9.6, 10, 10.4],hpPo=[8.8, 9, 9.2], gi√°pPo =[4.6, 4.8, 5, 5.2, 5.4],hpMaxPo = [150]
    var specialArraymini3x2 = []
    var timeEnemyPlay = 0, yyy = 0
    var h·ªôp_TimeMe = document.querySelector(".timeMe"), h·ªôp_TimeEn = document.querySelector(".timeEnemy")
    var gi·ªù_TimeMe = document.querySelector(".timeMe1"), gi·ªù_TimeEn = document.querySelector(".timeEnemy1")


    var so_Luot = document.querySelector(".turnNumber")
    var time_Me = document.querySelector(".timeMe")
    var time_Enemy = document.querySelector(".timeEnemy")
    var th·∫ª_Cha_L∆∞·ª£t = document.querySelector(".turn")
    var damet = 0, hpt = 0, gi√°pt = 0

    var auto_Boom5x_N3D = [], auto_Boom5x_5x = [], auto_Boom5x_Thuong = [], auto_N3D_last = []
    var auto_5x_array = [], auto_4x_array = [], auto_3x_array = []
    var nammuoi = 13.5 / 9
    var specialFirstArray = [], listOfArrays = [], listOfArraysC = [], diSlide = true
    var tiep = 0, dayTh = 0, specialArraymini = [], slide5 = false
    var specialArraymini2 = [], yyy = 0, tiPlay = 0, click1 = true, click2 = true
    var go = true, abcn = 0, specialArraymini5 = []
    var m·∫£ng_5_√î = [], m·∫£ng_4_√î = []
    var mee, quai, meIn

    var meePoit = [document.querySelector(".manaMe1"), document.querySelector(".hpMe1"), document.querySelector(".vangMe1"), document.querySelector(".HNMe1"), document.querySelector(".gi√°pMe1"), document.querySelector(".hpEnemy1")]
    var theyyPoit = [document.querySelector(".manaEnemy1"), document.querySelector(".hpEnemy1"), document.querySelector(".vangEnemy1"), document.querySelector(".HNEnemy1"), document.querySelector(".gi√°pEnemy1"), document.querySelector(".hpMe1")]
}

document.querySelector(".haha").addEventListener("click", function () {
    fightMot()
    meTurn = true
    // theyTurn = true

    ƒêi·ªÉm_Tr·∫≠t_T·ª±_Start()
    t·∫°o_C·ªôt_Slide()
    // bbbb() 
    readycrush()

//     var x  = document.querySelectorAll(".ch-Chess")
// var bbb = []

// bbb=¬†['https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/heart.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/heart.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/melon.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/star.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/water.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/melon.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/heart.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/sword.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/heart.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/star.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/yingyang.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/melon.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/melon.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/yingyang.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/melon.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/star.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/water.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/water.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/star.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/heart.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/sword.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/water.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/star.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/water.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/sword.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/heart.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/water.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/melon.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/water.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/star.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/heart.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/sword.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/melon.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/sword.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/sword.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/melon.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/heart.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/melon.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/heart.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/heart.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/melon.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/yingyang.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/star.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/heart.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/water.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/heart.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/heart.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/star.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/sword.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/melon.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/water.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/heart.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/heart.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/sword.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/melon.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/yingyang.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/star.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/water.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/yingyang.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/heart.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/melon.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/melon.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/sword.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/yingyang.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/yingyang.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/sword.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/heart.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/heart.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/water.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/water.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/swordDoc.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/star.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/star.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/melon.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/yingyang.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/melon.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/melon.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/water.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/yingyang.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/yingyang.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/sword33.png?raw=true']
// for (var i = 0; i < bbb.length; i++) {
//     x[i].src = bbb[i]
// }
})

// h√†m n√†y cho t·∫•t c·∫£ ƒëi·ªÉm s·ªë theo tr·∫≠t t·ª± (Kh·ªüi ƒë·∫ßu):
function ƒêi·ªÉm_Tr·∫≠t_T·ª±_Start() {
    // hp
    {
        document.querySelector(".hpMe1").innerHTML = mee.hpMaxInfor()
        // mee.hpMaxInfor()
        document.querySelector(".hpMe2").innerHTML = mee.hpMaxInfor()

        document.querySelector(".hpEnemy1").innerHTML = quai.hpMaxInfor()
        document.querySelector(".hpEnemy2").innerHTML = quai.hpMaxInfor()
    }

    // mana
    {
        document.querySelector(".manaMe1").innerHTML = mee.manaInfor()
        document.querySelector(".manaMe2").innerHTML = quai.manaMaxInfor()

        document.querySelector(".manaEnemy1").innerHTML = mee.manaInfor()
        document.querySelector(".manaEnemy2").innerHTML = quai.manaMaxInfor()
    }

    //gi√°p
    {
        document.querySelector(".giapMe1").innerHTML = mee.gi√°pInfor()
        document.querySelector(".giapEnemy1").innerHTML = quai.gi√°pInfor()
    }

}

mee = new inforBattlee(150, 150, 0, 300, 0/*xu*/, 5/*c·∫•p*/, 88/* % */, 10 /*gi√°p*/, 0/*h·ªìng_ng·ªçc*/)
quai = new inforBattlee(170, 150, 0, 300, 0/*xu*/, 0/*c·∫•p*/, 0/* % */, 20 /*gi√°p*/, 0/*h·ªìng_ng·ªçc*/)
//                         hp                                             mana          0 v√†ng, lv5.00     gi√°p
meIn = new inforMee('Kun1891'/*name*/, 3/*lv*/, 0/* % */, 0/*xu*/, 0 /*kim c∆∞∆°ng*/,0 /*h·ªìng ng·ªçc*/)
// 1. B·∫Øt ƒë·∫ßu: -----------------------------------------------------
function randomCandy(){/*‚ú®*/return s√°u_Bi·∫øn_Th∆∞·ªùng[Math.floor(Math.random()*s√°u_Bi·∫øn_Th∆∞·ªùng.length)];/*0-5.99*/}
function startGame() { // ‚ú® S·ª≠ d·ª•ng hai v√≤ng l·∫∑p for ƒë·ªÉ t·∫°o b·∫£ng, v·ªõi h√†ng v√† c·ªôt ƒë∆∞·ª£c x√°c ƒë·ªãnh tr∆∞·ªõc
    var board_table = document.getElementById("board"); // L·∫•y th·∫ª t·ª´ HTML v√† l∆∞u tr·ªØ v√†o bi·∫øn board_table.
    for (let r = 0; r < h√†ng; r++) {let row = []; // Kh·ªüi t·∫°o m·ªôt m·∫£ng r·ªóng ƒë·ªÉ l∆∞u tr·ªØ c√°c √¥ c·ªßa h√†ng
        for (let c = 0; c < c·ªôt; c++) {let tile = createTile(r, c); board_table.appendChild(tile); row.push(tile)}
        board.push(row); // Th√™m m·∫£ng h√†ng v√†o m·∫£ng l∆∞u tr·ªØ to√†n b·ªô b·∫£ng
    }  // Th√™m ·∫£nh v√†o th·∫ª <div> ch·ª©a b·∫£ng | Th√™m ·∫£nh v√†o m·∫£ng h√†ng hi·ªán t·∫°i | append th√™m nhi·ªÅu con 1 l√∫c ƒëc
    function createTile(r, c) {  // T·∫°o m·ªôt th·∫ª <img> m·ªõi
        let tile = document.createElement("img"); tile.src = randomCandy(); tile.style.opacity = "1";
        tile.className = s√°u_Class_Th∆∞·ªùng[s√°u_Bi·∫øn_Th∆∞·ªùng.indexOf(tile.src)]; 
        tile.classList.add("ch-Chess","Xclass","fc","i3","absolute");
        tile.addEventListener("click",click_Curr);tile.id=r+"-"+c;return tile;
    }
    function createE(b) { // T·∫°o m·ªôt th·∫ª <img> m·ªõi
        let x = document.createElement("img"); x.classList.add("absolute"); 
        x.style.top=(-nammuoi)+'rem';x.style.left=nammuoi*b+'rem';x.id =0+"-"+'*'+ b; board_table.appendChild(x);
    }; for (let i = 0; i < c·ªôt; i++) {createE(i)}
    for (let i = 0; i < h√†ng; i++) {
        for(let e=0;e<c·ªôt;e++){let b=nammuoi*i,c=nammuoi*e;board[i][e].style.top=b+'rem';board[i][e].style.left=c+'rem'}
    }
    // b√†i h·ªçc: {
        // M·ªói √¥ ƒë∆∞·ª£c t·∫°o ra b·∫±ng c√°ch t·∫°o m·ªôt th·∫ª <img> m·ªõi.
        // √î ƒë∆∞·ª£c th√™m v√†o th·∫ª <div> ch·ª©a b·∫£ng v√† ƒë∆∞·ª£c th√™m v√†o m·∫£ng h√†ng hi·ªán t·∫°i.

        // Ph·∫ßn t·∫°o √¥ b·∫£ng ƒë∆∞·ª£c ƒë√≥ng g√≥i v√†o h√†m createTile(r, c).
        // S·ª≠ d·ª•ng h√†m createTile(r, c) ƒë·ªÉ t·∫°o v√† tr·∫£ v·ªÅ m·ªôt √¥ m·ªõi.
        // S·ª≠ d·ª•ng h√†m createE(b) ƒë·ªÉ t·∫°o c√°c ·∫£nh ph·ª• v√† ƒë·∫∑t v·ªã tr√≠ c·ªßa ch√∫ng.
        // Lo·∫°i b·ªè s·ª± s·ª≠ d·ª•ng bi·∫øn kh√¥ng c·∫ßn thi·∫øt trong h√†m createE(x, b).
    // }
}
var click1 = true // Bi·∫øn ki·ªÉm tra l·∫ßn click ƒë·∫ßu ti√™n
function click_Curr() { // ‚ú® ph·∫ßn click c·ªù
    function mi(x, y) { document.getElementById(x).classList.replace(document.getElementById(x).classList[3], y) }
    if (click1 == 2) { click1 = false
        function mimi(a) { setTimeout(function () { mi(a, 'fc') }, 300) };
        otherTile = this; mi(currTile.id, 'fc'); mi(otherTile.id, 'outFocus'); dragEnd(); mimi(otherTile.id)
    }
    if (click1) { click1 = 2; currTile = this; mi(currTile.id, 'focus') }
}
function dragEnd() { // ‚ú®
    // if (currTile.src.includes(blank) || otherTile.src.includes(blank)) {return}
    var [r1, c1] = currTile.id.split("-").map(Number), [r2, c2] = otherTile.id.split("-").map(Number);
    const rowDiff = Math.abs(r1 - r2), colDiff = Math.abs(c1 - c2);
    let k·ªÅ = (rowDiff === 1 && colDiff === 0) || (rowDiff === 0 && colDiff === 1);
    if (k·ªÅ) {
        setTimeout(() => {
            [currTile.src, otherTile.src] = [otherTile.src, currTile.src];
            checkClass(); go = true; x√≥a_2_√î_ƒê·∫∑c_Bi·ªát_K·ªÅ_Nhau(currTile, otherTile);
      if(go) setTimeout(() =>{clearInterval(timeTogether);h·ªôp_TimeMe.classList.add("doiMauTime"); readycrush()},300)
        }, 100); //true
    } else { setTimeout(() => { click1 = true }, 200) }
}

function readycrush() {
    l·∫•y_ListArray(); let allC = listOfArrays.flat(); √î_T·∫°o_Boom_3x3 = l·∫•y_Ph·∫ßn_T·ª≠_Chung(allC); th√™m_L∆∞·ª£t();
    var array = [...new Set(allC)]; abcm = array.length;
    abcm > 0? array.forEach(item => x√≥a_Vi√™n_N·ªï(item, 1, 200)) : setTimeout(slide1, 300) // slide l·∫•y ƒëi·ªÉm
}
function th√™m_L∆∞·ª£t() { // ‚ú®
    if (yyy > 0) { var found
        for (var i = 0; i < listOfArrays.length; i++) {
            if (listOfArrays[i].length >= 4) {
                found=√î_T·∫°o_Boom_3x3.some(function(item){return listOfArrays[i].includes(item)});if(!found){numbGo++}  
            }
        }; numbGo += √î_T·∫°o_Boom_3x3.length // found l√† t√¨m th·∫•y b[1,2,3] trong m·∫£ng c [2]|[1] ko
    }
} // kh√¢u n√†y cho bi·∫øt cho bi·∫øt c√≥ ƒëc tƒÉng l∆∞·ª£t ko
function crushCandy() { // ‚ú®
    /*var m·∫£ng_5_√î = [], m·∫£ng_4_√î = []*/ test_C√≥_T·∫°o_4x_V√†_5x_ko()
    var u = test_C√≥_Vi√™n_ƒê·∫∑c_Bi·ªát_Ko(); 
    if (u > 0) { // kh√¢u n√†y n·∫øu special c·∫ßn n·ªï s·∫Ω l·ªçt v√†o
        ƒëem_C·ªù_ƒê·∫∑c_Bi·ªát_L·∫•y_M·∫£ng_N·ªï(); 
        var m·∫£ng_Ko_Tr√πng = Array.from(new Set(m·∫£ng_N·ªï));
        abcm = m·∫£ng_Ko_Tr√πng.length
        for (var i = 0; i < m·∫£ng_Ko_Tr√πng.length; i++) { x√≥a_Vi√™n_N·ªï(m·∫£ng_Ko_Tr√πng[i], 0, 200) }
    } else { crush_Xong_R∆°i(200) } //c·ªôngƒêi·ªÉmSauCrush(0)
}
function x·ª≠_Array_Mini(xx) { // ‚ú®
    specialArraymini5.length > 0 ? x·ª≠_Array_5(): 33; m·∫£ng_C√≥_Vi√™n_N·ªï(); 
    var m·∫£ng_Ko_Tr√πng = Array.from(new Set(m·∫£ng_N·ªï)); abcm = m·∫£ng_Ko_Tr√πng.length;
    if (abcm > 0) { for (var i = 0; i < m·∫£ng_Ko_Tr√πng.length; i++) { x√≥a_Vi√™n_N·ªï(m·∫£ng_Ko_Tr√πng[i], 0, xx) } }
    else { setTimeout(function () { crush_Xong_R∆°i(200) }, 300) }
}
function x·ª≠_Array_5() {
    specialArraymini5 = l·∫•y_special5(specialArraymini5)
    for (var y of specialArraymini5) {
        m·∫£ng_N·ªï.push(y[0]); 
        var xx =document.querySelectorAll("." + y[1].classList[0])
        for (var yy of xx) {
            if (yy.classList[2] == 'Xclass') {m·∫£ng_N·ªï.push(yy)} 
            else {add_blur_3x22(yy); m·∫£ng_N·ªï.push(yy) }// ???
        }
    }; specialArraymini5 = []
}
function t·∫°o_C·ªôt_Slide() { // ‚ú®
    for (var i = 0; i < c·ªôt; i++) {
        cotArray[i] = []; cotArray[i].push(document.getElementById("0-*" + i))
        for (var j = 0; j < h√†ng; j++) { cotArray[i].push(board[j][i]) }
    }
}
function slide1() { // ‚ú®
    abcn = 0
    for (var i = 0; i < c·ªôt; i++) { haha(cotArray[i], "0-*" + i) } // r·ªõt c·ªù
    slideLoop = setInterval(function () {
        if (abcn == c·ªôt) {
            checkClass(); clearInterval(slideLoop)
            if (checkValid()) { readycrush() } //1. ƒë·ªß c·ªù, ki·ªÉm tra xem crush ko
            else { //2. ko th√¨
                if (slide5 == true) { xoa5x5x(1) } // ki·ªÉm tra c√≥ 5x5x ko
                else if (test3x2() > 0) { ph√°_3x2() } //ki·ªÉm tra c√≥ 3x2 ko
                else { // ko th√¨:
                    if (yyy == 0) { yyy++; meTurn = true; timePlay = 10; timePlayy() }// m·ªõi v√¥, r·ªõt ngay ng·∫Øn, b·∫≠t time 
                    else { turnFight() } // nh·ªØng l·∫ßn b·∫≠t time sau:
                }
            }
        }
    }, 20)
}
// 2. B·ªï tr·ª£: --------------------------------------------
function checkClass() { // ‚ú®
    var allChess = document.querySelectorAll(".ch-Chess")
    for (var y of allChess) {
        if (s√°u_Bi·∫øn_Th∆∞·ªùng.includes(y.src)) {
            y.classList.replace(y.classList[0], s√°u_Class_Th∆∞·ªùng[s√°u_Bi·∫øn_Th∆∞·ªùng.indexOf(y.src)])
            y.classList.replace(y.classList[2], "Xclass")
        } else if (_25_Bi·∫øn_ƒê·∫∑c_Bi·ªát.includes(y.src)) {
            y.classList.replace(y.classList[0], _25_ClassList_0[_25_Bi·∫øn_ƒê·∫∑c_Bi·ªát.indexOf(y.src)])
            y.classList.replace(y.classList[2], _25_ClassList_2[_25_Bi·∫øn_ƒê·∫∑c_Bi·ªát.indexOf(y.src)])
        }
    }

} // m·ªói khi ƒë·ªïi c·ªù, class ko ƒë·ªïi. N√™n n√≥ d√πng d·ªïi class c·ªù
function x√≥a_Ngang_D·ªçc() { // ‚ú®
    var k = otherTile.id.split("-"); a = Number(k[0]); b = Number(k[1])
    var k2 = currTile.id.split("-"); a2 = Number(k2[0]); b2 = Number(k2[1])
    function mimi(xx, y, z, yy) {
        if (yy) { if (xx) add_blur_3x22(board[a + y][b + z], otherTile) }
        if (xx) m·∫£ng_N·ªï.push(board[a + y][b + z])
    }
    var m·∫£ng = [
        [true, a + 2 </*8*/h√†ng, 2, 0], [true, a + 3 </*8*/h√†ng, 3, 0], [true, a - 2 >= 0, -2, 0], [true, a - 3 >= 0, -3, 0],
        [true, b + 2 </*8*/c·ªôt, 0, 2], [true, b + 3 </*8*/c·ªôt, 0, 3], [true, b - 2 >= 0, 0, -2], [true, b - 3 >= 0, 0, -3],
        [b - 1 != b2, b - 1 >= 0, 0, -1], [b + 1 != b2, b + 1 </*8*/c·ªôt, 0, 1], [a - 1 != a2, a - 1 >= 0, -1, 0], [a + 1 != a2, a + 1 </*8*/h√†ng, 1, 0]
    ]
    for (var i = 0; i < m·∫£ng.length; i++) { mimi(m·∫£ng[i][1], m·∫£ng[i][2], m·∫£ng[i][3], m·∫£ng[i][0]) }
    m·∫£ng_N·ªï.push(board[a][b])
    x·ª≠_Array_Mini(500)
}
function xoaNgang3x3(otherT) { // ‚ú® 
    var k = otherTile.id.split("-"),a = +k[0], b= +k[1], k2 = currTile.id.split("-"), a2 = +k2[0], b2 = +k2[1]
    function mimi(xx, y, z) { if (xx) { add_blur_3x22(board[a + y][b + z], otherTile) } }
    if (otherT == 'Ngang') {
        mimi(a - 1 >= 0 && b + 2 <= 8, -1, 2, 0); mimi(a - 1 >= 0 && b - 2 >= 0, -1, -2, 0)
        mimi(a + 1 <= 8 && b - 2 >= 0, 1, -2, 0); mimi(a + 1 <= 8 && b + 2 <= 8, 1, 2, 0)
    } else if (otherT == 'Doc') {
        mimi(a - 2 >= 0 && b + 1 <= 8, -2, 1, 0); mimi(a - 2 >= 0 && b - 1 >= 0, -2, -1, 0)
        mimi(a + 2 <= 8 && b - 1 >= 0, 2, -1, 0); mimi(a + 2 <= 8 && b + 1 <= 8, 2, 1, 0)
    }
    if (b - 1 != b2) { mimi(b - 1 >= 0, 0, -1) }; if (b + 1 != b2) { mimi(b + 1 <=/*8*/c·ªôt - 1, 0, 1) }
    if (a - 1 != a2) { mimi(a - 1 >= 0, -1, 0) }; if (a + 1 != a2) { mimi(a + 1 <=/*8*/h√†ng - 1, 1, 0) }

    function mi(xx, y, z) { if (xx) { m·∫£ng_N·ªï.push(board[a + y][b + z]) } } // x√≥a
    if (otherT == 'Ngang') {
        mi(a + 1 <= 8 && b + 2 <= 8, 1, 2); mi(a - 1 >= 0 && b - 2 >= 0, -1, -2);
        mi(a + 1 <= 8 && b - 2 >= 0, 1, -2); mi(a - 1 >= 0 && b + 2 <= 8, -1, 2);
    } else if (otherT == 'Doc') {
        mi(a + 2 <= 8 && b + 1 <= 8, 2, 1); mi(a - 2 >= 0 && b - 1 >= 0, -2, -1);
        mi(a + 2 <= 8 && b - 1 >= 0, 2, -1); mi(a - 2 >= 0 && b + 1 <= 8, -2, 1);
    }
    mi(a + 1 <= 8, 1, 0); mi(a - 1 >= 0, -1, 0);
    mi(b + 1 <= 8, 0, 1); mi(b - 1 >= 0, 0, -1);
    create_3x2(board[a][b]); x·ª≠_Array_Mini(500)
}
function twoChessSpecial(xx, yy, zz) { // ‚ú®
    setTimeout(function () {
        otherTile = 0; currTile = 0
        if (specialArraymini.length > 0) {
            setTimeout(function () { dayChuyen() }, xx) //200
        } else {
            setTimeout(function () {
                checkClass(); slide1()
            }, yy) //200
        }
    }, zz) //460
} //  d√πng ƒë·ªÉ r·ªõt c·ªù khi gh√©p ƒë·∫∑c bi·ªát
function xoa3x3vs3x3() { // ‚ú®
    var k = otherTile.id.split("-"); a = Number(k[0]); b = Number(k[1])
    var k2 = currTile.id.split("-"); a2 = Number(k2[0]); b2 = Number(k2[1])
    function mimi(xx, y, z) { if (xx) { add_blur_3x22(board[a + y][b + z], otherTile) } }
    mimi(a - 2 >= 0 && b - 2 >= 0, -2, -2);/*tr√™n tr√°i*/ mimi(a - 2 >= 0 && b - 1 >= 0, -2, -1); mimi(a - 1 >= 0 && b - 2 >= 0, -1, -2);
    mimi(a - 2 >= 0 && b + 2 < c·ªôt, -2, 2);/*tr√™n ph·∫£i*/ mimi(a - 2 >= 0 && b + 1 < c·ªôt, -2, 1); mimi(a - 1 >= 0 && b + 2 < c·ªôt, -1, 2);
    mimi(a + 2 < h√†ng && b - 2 >= 0, 2, -2);/*d∆∞·ªõi tr√°i*/ mimi(a + 2 < h√†ng && b - 1 >= 0, 2, -1); mimi(a + 1 < h√†ng && b - 2 >= 0, 1, -2);
    mimi(a + 2 < h√†ng && b + 2 < c·ªôt, 2, 2);/*d∆∞·ªõi ph·∫£i*/ mimi(a + 2 < h√†ng && b + 1 < c·ªôt, 2, 1); mimi(a + 1 < h√†ng && b + 2 < c·ªôt, 1, 2);

    if (b - 1 != b2) { mimi(b - 1 >= 0, 0, -1) }; if (b + 1 != b2) { mimi(b + 1 <=/*8*/c·ªôt - 1, 0, 1) }
    if (a - 1 != a2) { mimi(a - 1 >= 0, -1, 0) }; if (a + 1 != a2) { mimi(a + 1 <=/*8*/h√†ng - 1, 1, 0) }

    function mi(xx, y, z) { if (xx) { m·∫£ng_N·ªï.push(board[a + y][b + z]) } } // x√≥a 
    // sao ko l√† other?
    mi(a - 2 >= 0 && b - 2 >= 0, -2, -2);/*tr√™n tr√°i*/ mi(a - 2 >= 0 && b - 1 >= 0, -2, -1); mi(a - 1 >= 0 && b - 2 >= 0, -1, -2);
    mi(a - 2 >= 0 && b + 2 < c·ªôt, -2, 2);/*tr√™n ph·∫£i*/ mi(a - 2 >= 0 && b + 1 < c·ªôt, -2, 1); mi(a - 1 >= 0 && b + 2 < c·ªôt, -1, 2);
    mi(a + 2 < h√†ng && b - 2 >= 0, 2, -2);/*d∆∞·ªõi tr√°i*/ mi(a + 2 < h√†ng && b - 1 >= 0, 2, -1); mi(a + 1 < h√†ng && b - 2 >= 0, 1, -2);
    mi(a + 2 < h√†ng && b + 2 < c·ªôt, 2, 2);/*d∆∞·ªõi ph·∫£i*/ mi(a + 2 < h√†ng && b + 1 < c·ªôt, 2, 1); mi(a + 1 < h√†ng && b + 2 < c·ªôt, 1, 2);

    mi(b - 1 >= 0, 0, -1); mi(b + 1 <=/*8*/c·ªôt - 1, 0, 1)
    mi(a - 1 >= 0, -1, 0); mi(a + 1 <=/*8*/h√†ng - 1, 1, 0)
    m·∫£ng_N·ªï.push(board[a][b])
    x·ª≠_Array_Mini(500)
}
function xoa5xThuong(otherT) { // ‚ú®
    var k = otherT.id.split("-"); a = Number(k[0]); b = Number(k[1])
    if (otherTile.classList[0] == otherT.classList[0]) { m·∫£ng_N·ªï.push(currTile) } else { m·∫£ng_N·ªï.push(otherTile) }
    var x = document.querySelectorAll("." + otherT.classList[0])
    var array_Khac_Xclass = []
    for (var y of x) { if (y.classList[2] != 'Xclass') { array_Khac_Xclass.push(y) } }
    for (var y of x) { m·∫£ng_N·ªï.push(y) }
    function mi(xx, y, z) { if (xx) { add_blur_3x22(board[a + y][b + z], otherTile); m·∫£ng_N·ªï.push(board[a + y][b + z]) } }
    for (var y of array_Khac_Xclass) {
        var k = y.id.split("-"); a = Number(k[0]); b = Number(k[1]);
        if (_6_Class_Ngang.includes(y.classList[2])) {
            mi(b + 1 < c·ªôt, 0, 1); mi(b - 1 >= 0, 0, -1); mi(b + 2 < c·ªôt, 0, 2); mi(b - 2 >= 0, 0, -2);
        } else if (_6_Class_D·ªçc.includes(y.classList[2])) {
            mi(a + 1 < h√†ng, 1, 0); mi(a - 1 >= 0, -1, 0); mi(a + 2 < h√†ng, 2, 0); mi(a - 2 >= 0, -2, 0);
        } else {
            mi(a + 1 < h√†ng, 1, 0); mi(a - 1 >= 0, -1, 0); mi(b - 1 >= 0, 0, -1); mi(b + 1 < c·ªôt, 0, 1);
        }
    }
    l·ªçc_SpecialMini_Tr√πng_Class_0(otherT)   // } 
    x·ª≠_Array_Mini(500)
}
function l·ªçc_SpecialMini_Tr√πng_Class_0(otherT) { // ‚ú®
    if (specialArraymini.length > 0) {
        var bbbb = []
        specialArraymini = specialArraymini.filter((item, index) => {
            return specialArraymini.indexOf(item) === index;
        });
        for (var i = 0; i < specialArraymini.length; i++) {
            if (specialArraymini[i].classList[0] == otherT.classList[0]) {
                // console.log(specialArraymini[i])
                bbbb.push(specialArraymini[i])
            }
        }
        specialArraymini = specialArraymini.filter(item => !bbbb.includes(item));
    }
}
function xoa5xDacbiet(otherT) { // ‚ú®
    var k = otherT.id.split("-"); a = Number(k[0]); b = Number(k[1])
    m·∫£ng_N·ªï.push(currTile, otherTile)
    var array_Xclass = [];
    var x = document.querySelectorAll("." + otherT.classList[0]); var b = Array.from(x)
    b.splice(b.indexOf(document.getElementById(otherT.id)), 1)
    for (var y of b) {
        if (y.classList[2] == 'Xclass') { array_Xclass.push(y) }
    }
    // Bi·∫øn h√¨nh
    function mi(xx) {
        for (var y of array_Xclass) {
            var x = Math.floor(Math.random() * 2) + 1
            if (x == 1) { y.src = s√°u_Bi·∫øn_D·ªçc[xx] } else { y.src = s√°u_Bi·∫øn_Ngang[xx] }
        }
    }
    if (_6_Class_Ngang.includes(otherT.classList[2])) {
        var i = _6_Class_Ngang.indexOf(otherT.classList[2]); mi(i)
    } else if (_6_Class_D·ªçc.includes(otherT.classList[2])) {
        var i = _6_Class_D·ªçc.indexOf(otherT.classList[2]); mi(i)
    } else {
        var i = _6_Class_3x3.indexOf(otherT.classList[2]);
        for (var y of array_Xclass) { y.src = s√°u_Bi·∫øn_Boom_3x[i] }
    }
    checkClass()

    for (var y of b) { m·∫£ng_N·ªï.push(y) }
    function mimi(xx, y, z) { if (xx) { add_blur_3x22(board[a + y][b + z], otherTile); m·∫£ng_N·ªï.push(board[a + y][b + z]) } }
    for (var y of b) {
        var k = y.id.split("-"); a = Number(k[0]); b = Number(k[1]);
        if (_6_Class_Ngang.includes(y.classList[2])) {
            mimi(b + 1 < c·ªôt, 0, 1); mimi(b - 1 >= 0, 0, -1); mimi(b + 2 < c·ªôt, 0, 2); mimi(b - 2 >= 0, 0, -2);
        } else if (_6_Class_D·ªçc.includes(y.classList[2])) {
            mimi(a + 1 < h√†ng, 1, 0); mimi(a - 1 >= 0, -1, 0); mimi(a + 2 < h√†ng, 2, 0); mimi(a - 2 >= 0, -2, 0);
        } else {
            mimi(a + 1 < h√†ng, 1, 0); mimi(a - 1 >= 0, -1, 0); mimi(b - 1 >= 0, 0, -1); mimi(b + 1 < c·ªôt, 0, 1);
        }
    }
    l·ªçc_SpecialMini_Tr√πng_Class_0(otherT); setTimeout(function () { /*console.log("r·ªõt")*/; x·ª≠_Array_Mini(300) }, 800)
}
function xoa5x5x(a) { // ‚ú®
    if (a == 0) {
        console.log("ƒë√£ r·ªõt 5x5x")
        m·∫£ng_N·ªï.push(otherTile, currTile); otherTile = 0; currTile = 0;
        slide5 = true; x·ª≠_Array_Mini(200)
    }
    if (a > 0) {
        slide5 = false
        var x = [board[0][0], board[0][8], board[8][8], board[8][0], board[0][4], board[4][8], board[4][0], board[8][4], board[1][1], board[1][7], board[7][1], board[7][7], board[2][3], board[3][2], board[2][5], board[3][6], board[5][2], board[6][3], board[6][5], board[5][6], board[3][4], board[4][3], board[5][4], board[4][5], board[4][4]]
        for (var y of x) { add_blur_3x22(y) }; for (var y of x) { m·∫£ng_N·ªï.push(y) }
        x·ª≠_Array_Mini(500)
    }
}
function test3x2() { // ‚ú®
    var x = document.querySelectorAll(".ch-Chess")
    for (var y of x) {
        for (var i = 0; i < _6_Class_3x2.length; i++) { if (y.classList[2] == _6_Class_3x2[i]) { m·∫£ng_Bom_3x2.push(y) } }
    };
    return m·∫£ng_Bom_3x2.length
}
function ph√°_3x2() { // ‚ú®
    for (var i = 0; i < m·∫£ng_Bom_3x2.length; i++) {
        var k = m·∫£ng_Bom_3x2[i].id.split("-"); a = Number(k[0]); b = Number(k[1])// add
        function mimi(xx, y, z) { if (xx) { add_blur_3x22(board[a + y][b + z], otherTile); m·∫£ng_N·ªï.push(board[a + y][b + z]) } }
        mimi(a - 1 >= 0 && b - 1 >= 0, -1, -1); mimi(a - 1 >= 0 && b + 1 < c·ªôt, -1, 1); mimi(a + 1 < h√†ng && b + 1 < c·ªôt, 1, 1); mimi(a + 1 < h√†ng && b - 1 >= 0, 1, -1);
        m·∫£ng_N·ªï.push(board[a][b])
    }
    m·∫£ng_Bom_3x2 = []; x·ª≠_Array_Mini(400)
}
function create_3x2(x) { // ‚ú® ? sao blank ta
    for (var i = 0; i < s√°u_Class_Th∆∞·ªùng.length; i++) {
        if (x.classList[0] == s√°u_Class_Th∆∞·ªùng[i]) { x.src = _6_Bi·∫øn_3x2[i] }
    }; checkClass()
} // th·ª±c hi·ªán t·∫°o h√†m cho vi√™n 3x2
function blur_3x22(x, othersTile) { // ‚ú®
    for (var j = 0; j < _6_Bi·∫øn_3x2.length; j++) {
        if (x.src != _6_Bi·∫øn_3x2[j] && x.src != blank) {
            var n = 10 // test kh√°c 3x2 v√† blank
            var mimi = setInterval(function () {
                if (n >= 0) {
                    n--
                    x.style.opacity = Number(x.style.opacity) - 0.1
                    if (Number(x.style.opacity) < 0) { x.style.opacity = 0 }
                } else { clearInterval(mimi) }
            }, 40)
            setTimeout(function () { x.src = blank; x.style.opacity = '1' }, 410)
        }
    }
    if (x.classList[2] == 'fiveBlock') {
        var xx = document.querySelectorAll("." + othersTile.classList[0])
        for (var y of xx) {
            if (y.src != blank && y.classList[2] != 'sword3x2' && y.classList[2] != 'yingyang3x2' && y.classList[2] != 'melon3x2' && y.classList[2] != 'heart3x2' && y.classList[2] != 'water3x2' && y.classList[2] != 'star3x2') {
                specialArraymini.push(y)
            }
        }
    }
}
function add_blur_3x22(x, y) { // ‚ú®
    if (m∆∞·ªùi_T√°m_Class.includes(x.classList[2]) && x.src != blank) { specialArraymini.push(x) }
    if (x.classList[2] == 'fiveBlock' && !specialArraymini5.includes(x) && x.src != blank) { specialArraymini5.push([x, y]) }
}
function boom3x3(√¥_N·ªï) { // ‚ú®
    var k = √¥_N·ªï.id.split("-"); a = Number(k[0]); b = Number(k[1]);
    function mi(xx, y, z) { if (xx) { add_blur_3x22(board[a + y][b + z], √¥_N·ªï); m·∫£ng_N·ªï.push(board[a + y][b + z]) } }
    mi(a + 1 < h√†ng, 1, 0); mi(a - 1 >= 0, -1, 0); mi(b + 1 < c·ªôt, 0, 1); mi(b - 1 >= 0, 0, -1);
    create_3x2(board[a][b])
} // a l√† h√†ng (D·ªçc)
function boomDoc(√¥_N·ªï) { // ‚ú®
    var k = √¥_N·ªï.id.split("-"), a = +k[0], b = +k[1], d = a
    function mi(x) {
        k = board[x][b].id.split("-"); a = +k[0]; m·∫£ng_N·ªï.push(board[x][b])
        if (a != d) {add_blur_3x22(board[x][b], √¥_N·ªï) }
    }
    for (var i = 0; i < h√†ng; i++) { mi(i) }
}
function boomNgang(√¥_N·ªï) { // ‚ú®
    var k = √¥_N·ªï.id.split("-"), a = +k[0], b = +k[1], d = b
    function mi(x) {
        k = board[a][x].id.split("-"); b = +k[1]; m·∫£ng_N·ªï.push(board[a][x])
        if (b != d) { add_blur_3x22(board[a][x], √¥_N·ªï) }
    }
    for (var i = 0; i < c·ªôt; i++) { mi(i) }
}
// 3. cho qu√°i ƒë√°nh: -----------------------------------------------
{ // üíõ
    function testValid() {
        var bi = 0
        function bii(xx, y, z) {
            if (xx) {
                let currImg = board[i][e].src; let otherImg = board[i + y][e + z].src;
                board[i][e].src = otherImg; board[i + y][e + z].src = currImg;
                checkClass(); if (checkValid()) { bi++ }
                board[i][e].src = currImg; board[i + y][e + z].src = otherImg;
            }
        }
        for (var i = 0; i <= h√†ng - 1; i++) {
            for (var e = 0; e <= c·ªôt - 1; e++) {
                var k = board[i][e].id.split("-"); a = Number(k[0]); b = Number(k[1])
                bii(a - 1 >= 0, -1, 0)/*l√™n*/; bii(a + 1 <= h√†ng - 1, 1, 0)/*xu·ªëng*/
                bii(b + 1 <= c·ªôt - 1, 0, 1)/*ph·∫£i*/; bii(b - 1 >= 0, 0, -1)/*tr√°i*/
            }
        }
        var mi = 0
        if (bi > 0) { return true }
        else if (bi == 0) {
            var x = document.querySelectorAll(".ch-Chess")
            for (y of x) {
                if (y.classList[2] != 'Xclass' && y.classList[2] != 'fivebBlock') {
                    var k = y.id.split("-"); a = Number(k[0]); b = Number(k[1])
                    function pi(xx, y, z) { if (xx) { if (board[a + y][b + z].classList[2] != "Xclass" && board[a + y][b + z].classList[2] != "fiveBlock") { mi++ } } }
                    pi(a - 1 >= 0, -1, 0)/*l√™n*/; pi(a + 1 <= h√†ng - 1, 1, 0)/*xu·ªëng*/
                    pi(b + 1 <= c·ªôt - 1, 0, 1)/*ph·∫£i*/; pi(b - 1 >= 0, 0, -1)/*tr√°i*/
                }
            }
            for (y of x) { if (y.classList[2] == 'fiveBlock') { mi++ } }
        }
        if (mi > 0) { return true } else { return false }

    } // ki·ªÉm tra xem b√†n c·ªù c√≥ ƒëi ƒëc ko?  
    function replay() {
        document.querySelector(".board").parentNode.removeChild(document.querySelector(".board"))

        board = []; listOfArrays = []
        var banCo = document.createElement('div')
        banCo.classList.add('board')
        banCo.id = 'board'
        // map.classList.add('mapBassic')
        var fullclassApp = document.querySelector(".wrap")
        fullclassApp.append(banCo);
        startGame()
    } // ƒë·ªïi c·ªù
} // ki·ªÉm tra xem b√†n c·ªù c√≥ ƒëi ƒëc ko?
{ // üíõ
    //1. ki·ªÉm tra xem c√≥ vi√™n boom5x ko
    function auto_Boom5x() {
        auto_Boom5x_Thuong = []; auto_Boom5x_N3D = []; auto_Boom5x_5x = []
        var mang5x = []
        var x = document.querySelectorAll(".ch-Chess")
    /** 1.*/for (var y of x) { if (y.classList[2] == 'fiveBlock') { mang5x.push(y) } }
        /**H√†m chung */
        function bii(xx, y, x, z) { // y l√† g·ªëc
            if (xx) {
                if (board[a + x][b + z].classList[2] == 'fiveBlock') {
                    auto_Boom5x_5x.push([mang5x[y], board[a + x][b + z]])
                } //n·∫øu g·ªëc v√† x ƒë·ªÅu l√† 5x
                else if (board[a + x][b + z].classList[2] != 'Xclass' && board[a + x][b + z].classList[2] != 'fiveBlock') {
                    auto_Boom5x_N3D.push([mang5x[y], board[a + x][b + z]])
                } // n·∫øu g·ªëc l√† 5x v√† x l√† N3D
                else if (board[a + x][b + z].classList[2] == 'Xclass') {
                    auto_Boom5x_Thuong.push([mang5x[y], board[a + x][b + z]])
                } // n·∫øu g·ªëc l√† 5x v√† x l√† th∆∞·ªùng
            }
        }
    /** 2.*/for (var i = 0; i < mang5x.length; i++) {
            var k = mang5x[i].id.split("-"); a = Number(k[0]); b = Number(k[1])
            bii(a - 1 >= 0, i, -1, 0);/**l√™n*/bii(b + 1 < c·ªôt, i, 0, 1); /**ph·∫£i */
            bii(a + 1 < h√†ng, i, 1, 0);/*xu·ªëng*/bii(b - 1 >= 0, i, 0, -1); /**tr√°i */
        }
        // (0)c√≥ 5x ko, (1)c√≥ 2 vi√™n 5x, (2)c√≥ 5x v√† N3D, (3) c√≥ 5x v√† th∆∞·ªùng
        return [mang5x.length > 0, auto_Boom5x_5x, auto_Boom5x_N3D, auto_Boom5x_Thuong]
    }
    //2. ki·ªÉm tra xem c√≥ 2 vi√™n N3D k·ªÅ nhau ko
    function auto_N3D() {
        var auto_N3D_first = []; auto_N3D_last = []
        var x = document.querySelectorAll(".ch-Chess")
        for (var y of x) {
            if (y.classList[2] != 'Xclass' && y.classList[2] != 'fiveBlock') { auto_N3D_first.push(y) }
        } // Ki·ªÉm tra xem c√≥ N3D ko
        function bii(xx, y, x, z) {
            if (xx) {
                if (board[a + x][b + z].classList[2] != 'Xclass' && board[a + x][b + z].classList[2] != 'fiveBlock') {
                    auto_N3D_last.push([auto_N3D_first[y], board[a + x][b + z]])
                }
            }
        }
        for (var i = 0; i < auto_N3D_first.length; i++) {
            var k = auto_N3D_first[i].id.split("-"); a = Number(k[0]); b = Number(k[1])
            bii(a - 1 >= 0, i, -1, 0);/**l√™n*/bii(b + 1 < c·ªôt, i, 0, 1); /**ph·∫£i */
            bii(a + 1 < h√†ng, i, 1, 0);/**xu·ªëng*/bii(b - 1 >= 0, i, 0, -1); /**tr√°i */
        } // Ki·ªÉm tra xem c√≥ N3D k·ªÅ nhau ko
        // (0) c√≥ N3D k·ªÅ nhau ko, (1)list k·ªÅ nhau
        return [auto_N3D_last.length > 0, auto_N3D_last]
    }
    //3. ki·ªÉm tra xem c√≥ t·∫°o ƒëc 5 vi√™n li√™n ti·∫øp ko
    function auto_5x(z) {
        auto_5x_array = []
        var bi5x = 0
        function bii(xx, x, y) {
            if (xx) {
                let currImg = board[i][e].src; let otherImg = board[i + x][e + y].src;
                board[i][e].src = otherImg; board[i + x][e + y].src = currImg; checkClass()
                if (checkValid()) {
                    if (readycrush2(5)[0] > 0) {
                        bi5x++
                        // g·ªëc, ƒë·ªïi, s·ªë vi√™n ƒë·∫∑c bi·ªát, s·ªë nh√°nh (vd 5 vi√™n A v√† 3 vi√™n B)
                        if (z > 0) { auto_5x_array.push([board[i][e], board[i + x][e + y], readycrush2(5)[1], readycrush2(5)[2]]) }
                    }
                }
                board[i][e].src = currImg; board[i + x][e + y].src = otherImg; checkClass()
            }
        }
        for (var i = 0; i <= 8; i++) {
            for (var e = 0; e <= 8; e++) {
                var k = board[i][e].id.split("-"); a = Number(k[0]); b = Number(k[1])
                // bii(a - 1 >= 0, -1, 0);/**l√™n*/ bii(b - 1 >= 0, 0, -1); /**tr√°i */
                bii(a + 1 < h√†ng, 1, 0, z);/**xu·ªëng*/bii(b + 1 < c·ªôt, 0, 1, z); /**ph·∫£i */
            }
        }// (0)c√≥ t·∫°o 5 √¥ li√™n ti·∫øp ko?, (1) m·∫£ng 5 vi√™n li√™n ti·∫øp
        return [bi5x > 0, auto_5x_array]
    }
    //4. ki·ªÉm tra xem c√≥ t·∫°o ƒëc 4 vi√™n li√™n ti·∫øp ko
    function auto_4x(z) {
        auto_4x_array = []; var bi4x = 0
        function bii(xx, x, y) {
            if (xx) {
                let currImg = board[i][e].src; let otherImg = board[i + x][e + y].src;
                board[i][e].src = otherImg; board[i + x][e + y].src = currImg; checkClass()
                if (checkValid()) {
                    if (readycrush2(4)[0] > 0) {
                        bi4x++
                        // g·ªëc, ƒë·ªïi, s·ªë vi√™n ƒë·∫∑c bi·ªát, s·ªë nh√°nh (vd 4 vi√™n A v√† 3 vi√™n B)
                        if (z > 0) { auto_4x_array.push([board[i][e], board[i + x][e + y], readycrush2(4)[1], readycrush2(4)[2]]) }
                    }
                }
                board[i][e].src = currImg; board[i + x][e + y].src = otherImg; checkClass()
            }
        }
        for (var i = 0; i <= 8; i++) {
            for (var e = 0; e <= 8; e++) {
                var k = board[i][e].id.split("-"); a = Number(k[0]); b = Number(k[1])
                // bii(a - 1 >= 0, -1, 0);/**l√™n*/ bii(b - 1 >= 0, 0, -1); /**tr√°i */
                bii(a + 1 < h√†ng, 1, 0, z);/**xu·ªëng*/bii(b + 1 < c·ªôt, 0, 1, z); /**ph·∫£i */
            }
        }
        // (0)c√≥ t·∫°o 4 √¥ li√™n ti·∫øp ko?, (1) m·∫£ng 4 vi√™n li√™n ti·∫øp
        return [bi4x > 0, auto_4x_array]
    }
    //5. ki·ªÉm tra xem c√≥ t·∫°o ƒëc 3 vi√™n li√™n ti·∫øp ko
    function auto_3x(z) {
        auto_3x_array = []; var bi3x = 0
        function bii(xx, x, y, z) {   // z l√† x√°c ƒë·ªãnh l·∫•y true, ko l·∫•y m·∫£ng m√¥ t·∫£
            if (xx) {
                let currImg = board[i][e].src; let otherImg = board[i + x][e + y].src;
                board[i][e].src = otherImg; board[i + x][e + y].src = currImg; checkClass()
                if (checkValid()) {
                    if (readycrush2(3)[0] > 0) {
                        bi3x++
                        // g·ªëc, ƒë·ªïi, s·ªë vi√™n ƒë·∫∑c bi·ªát, s·ªë nh√°nh (vd 5 vi√™n A v√† 3 vi√™n B)
                        if (z > 0) { auto_3x_array.push([board[i][e], board[i + x][e + y], readycrush2(3)[1], readycrush2(3)[2]]) }
                    }
                }
                board[i][e].src = currImg; board[i + x][e + y].src = otherImg; checkClass()
            }
        }
        for (var i = 0; i <= 8; i++) {
            for (var e = 0; e <= 8; e++) {
                var k = board[i][e].id.split("-"); a = Number(k[0]); b = Number(k[1])
                // bii(a - 1 >= 0, -1, 0);/**l√™n*/ bii(b - 1 >= 0, 0, -1); /**tr√°i */
                bii(a + 1 < h√†ng, 1, 0, z);/**xu·ªëng*/bii(b + 1 < c·ªôt, 0, 1, z); /**ph·∫£i */
            }
        } // (0)c√≥ t·∫°o 3 √¥ li√™n ti·∫øp ko?, (1) m·∫£ng 3 vi√™n li√™n ti·∫øp
        return [bi3x > 0, auto_3x_array]
    }
    //6. H·ªó tr·ª£ xem nh√°nh
    function readycrush2(number) {
        listOfArrays = []; l·∫•y_ListArray(); var e = 0     // ? 
        var iNumber = number
        if (iNumber == 5) {
            var n = 0
            for (var i = 0; i < listOfArrays.length; i++) { if (listOfArrays[i].length >= 5) { n++ } }
        } else if (iNumber == 4) {
            var n = 0
            for (var i = 0; i < listOfArrays.length; i++) { if (listOfArrays[i].length == 4) { n++ } }
        } else if (iNumber == 3) {
            var n = 0
            for (var i = 0; i < listOfArrays.length; i++) { if (listOfArrays[i].length == 3) { n++ } }
        };
        for (var i = 0; i < listOfArrays.length; i++) {
            for (var d = 0; d < listOfArrays[i].length; d++) {
                var b = listOfArrays[i][d].classList[2]; if (b != 'Xclass' && b != 'fiveBlock') { e++ }
            } // c√°c vi√™n li√™n ti·∫øp 3/4/5 l√† vi√™n N3D or th∆∞·ªùng
        }; var b = listOfArrays; listOfArrays = []
        return [n, e, b.length]//(0)t·∫°o ƒëc 3/4/5 vi√™n ko,(1)s·ªë N3D trong nh√°nh,(2)m·∫•y nh√°nh
    }
    //6.1 Xem b√†n c·ªù c√≥ nh·ªØng b∆∞·ªõc ƒëi n√†o
    function see_Chess() {
        var a = [], result = []
        var x = document.querySelectorAll(".ch-Chess")
        for (var y of x) { if (y.classList[2] == 'fiveBlock') { a.push(y) } }
        result.push(a.length > 0); a = [] // bom 5x
        result.push(auto_N3D()[0], auto_5x(0)[0], auto_4x(0)[0], auto_3x(0)[0])
        return result
    }
    //7. Qu√°i l·ª±a c·∫•p ƒë·ªô kh√≥ ƒë·ªÉ ƒë√°nh 
    function auto_Fight() {
        //m√¥ h√¨nh: (0)auto_Boom5x, (1)N3D, (2)li√™n5, (3)li√™n4, (4)li√™n3
        var m·∫£ng_Auto = [auto_Boom5x, auto_N3D, auto_5x, auto_4x, auto_3x]
        var m·∫£ng_ƒêi_5_H∆∞·ªõng = see_Chess(), m·∫£ng_True = []
        for (var i = 0; i < m·∫£ng_ƒêi_5_H∆∞·ªõng.length; i++) {
            if (m·∫£ng_ƒêi_5_H∆∞·ªõng[i] == true) { m·∫£ng_True.push(i) }
        } // coi n√†o true, l·∫•y id c·ªßa n√≥ v√¥ m·∫£ng_True ||  vd: true 0, true 1, false 2  ==>  0, 1
        var y = Math.floor(Math.random() * m·∫£ng_True.length)
        var nn = m·∫£ng_True[y] // l·∫•y ƒëc random id  // m·∫£ng_Auto[y]
        // console.log(m·∫£ng_ƒêi_5_H∆∞·ªõng, m·∫£ng_True, nn)
        function mi(x) {
            var randomm = Math.floor(Math.random() * a[x].length)
            var random1_2 = Math.floor(Math.random() * 2) + 1
            if (random1_2 == 1) { currTile = a[x][randomm][0]; otherTile = a[x][randomm][1] }
            else { currTile = a[x][randomm][1]; otherTile = a[x][randomm][0] }
        }
        function mimi(yy) {
            var a = yy(1), N_Vi√™n_ƒêB = [], N_Nh√°nh = [], n = 0 //a[1] l·∫•y all m·∫£ng|
            for (var i = 0; i < a[1].length; i++) { N_Vi√™n_ƒêB.push(a[1][i][2]); N_Nh√°nh.push(a[1][i][3]); if (a[1][i][2] > 0) { n++ } }
            // console.log(N_Nh√°nh)
            if (n > 0) { mi(N_Vi√™n_ƒêB) } else { mi(N_Nh√°nh) }  // a[1][0]|[2],  a[1][1]|[2]   |[0] v√† [1] l·∫•y g·ªëc
            function mi(xx) { //N_Vi√™n_ƒêB, xx
                var maxInNumbers = Math.max.apply(Math, xx), indexes = [];//console.log(xx);console.log("max",maxInNumbers)
                for (var j = 0; j < xx.length; j++) { if (xx[j] == maxInNumbers) { indexes.push(j); } }//console.log(indexes)
                var randomm = Math.floor(Math.random() * indexes.length), random1_2 = Math.floor(Math.random() * 2) + 1
                if (random1_2 == 1) { currTile = a[1][indexes[randomm]][0]; otherTile = a[1][indexes[randomm]][1] }
                else { currTile = a[1][indexes[randomm]][1]; otherTile = a[1][indexes[randomm]][0] }
            }; end(1)// ƒëem cu·ªëi: console.log( currTile.id, otherTile.id)
        }
        if (nn == 0) {
            var a = auto_Boom5x(); if (a[1].length > 0) { console.log("a>0"); mi(1) } else if (a[2].length > 0) { mi(2) } else if (a[3].length > 0) { mi(3) }; end(2)
        }
        else if (nn == 1) { var a = auto_N3D(); mi(1); end(2) }
        else if (nn == 2) { mimi(auto_5x) } else if (nn == 3) { mimi(auto_4x) } else if (nn == 4) { mimi(auto_3x) }
        function end(xx) {
            currTile.classList.replace(currTile.classList[3], 'focus')// m·ªü focus Cur
            setTimeout(function () { currTile.classList.replace(currTile.classList[3], 'fc') }, 900)// t·∫Øt focus Cur
            setTimeout(function () {
                let currImg = currTile.src; let otherImg = otherTile.src;
                currTile.src = otherImg; otherTile.src = currImg
                otherTile.classList.replace(otherTile.classList[3], 'outFocus')// m·ªü focus Other
                // x√≥a 2 √¥ ƒë·∫∑c bi·ªát
                setTimeout(function () { otherTile.classList.replace(otherTile.classList[3], 'fc') }, 400)//t·∫Øt focus Other
                if (xx == 1) { setTimeout(function () {readycrush() }, 700) }
                else { setTimeout(function () {x√≥a_2_√î_ƒê·∫∑c_Bi·ªát_K·ªÅ_Nhau(currTile, otherTile) }, 700) }
            }, 1100)
        }
    }
} // bot play 
{ // üíõ
    var TimeNe = 1; var timePlay = 10
    var meTurn = false; var theyTurn = false
    var timeTogether
    // clearInterval(timeTogether)

    function timePlayy() {
        timeTogether = setInterval(function () {
            if (timePlay >= 0 && meTurn == true) {
                h·ªôp_TimeMe.classList.remove("none")/*m·ªü timeMe*/; h·ªôp_TimeEn.classList.add("none")//t·∫Øt timeEnemy
                gi·ªù_TimeMe.innerHTML = timePlay; timePlay--
                if (timePlay < 0) {
                    if (numbGo > 0) {
                        clearInterval(timeTogether)
                            // (1) m·ªü b·∫£ng l∆∞·ª£t, (2) t·∫Øt b·∫£ng l∆∞·ª£t
                       /*1*/th·∫ª_Cha_L∆∞·ª£t.classList.remove("none")
                       /*2*/setTimeout(function () { th·∫ª_Cha_L∆∞·ª£t.classList.add("none") }, 1700)
                        so_Luot.innerHTML = numbGo; numbGo-- // (3) cho s·ªë l∆∞·ª£t v√† tr·ª´ ƒëi l∆∞·ª£t

                        click1 = true; meTurn = true; theyTurn = false; timePlay = 10; timePlayy()
                    } else {
                        click1 = false; timePlay = 10; meTurn = false; theyTurn = true
                        // ƒë·∫∑t x nhiu ƒë√¢y, v√¨ n√≥ ƒë√¥n l√™n 1 s·ªë
                        var xx = [7, 6, 5, 4, 3]; var random = Math.floor(Math.random() * xx.length)
                        timeEnemyPlay = xx[random]
                    }
                }
            } else if (timePlay >= 0 && theyTurn == true) {
                if (timePlay == timeEnemyPlay) { // ? d√πng sau clear?
                    h·ªôp_TimeEn.classList.add("doiMauTime"); clearInterval(timeTogether); auto_Fight()
                } else {
                    h·ªôp_TimeMe.classList.add("none")/*t·∫Øt timeMe*/; h·ªôp_TimeEn.classList.remove("none")//m·ªü timeEnemy
                    gi·ªù_TimeEn.innerHTML = timePlay; timePlay--
                    if (timePlay < 0) { click1 = true; timePlay = 10; meTurn = true; theyTurn = false }
                }
            }
        }, 1000)
    }
} // ph·∫ßn time cho game
// ƒëi·ªÉm v√† th·ªùi gian ƒë√°nh
function turnFight() { // ‚ú®

    if (meTurn == true) {
        if (numbGo > 0) {// m√¨nh c√≥ nhi·ªÅu l∆∞·ª£t
            c·ªôngƒêi·ªÉmSauCrush(1)
                /*1*/th·∫ª_Cha_L∆∞·ª£t.classList.remove("none")// (1) m·ªü b·∫£ng l∆∞·ª£t, (2) t·∫Øt b·∫£ng l∆∞·ª£t
               /*2*/setTimeout(function () { th·∫ª_Cha_L∆∞·ª£t.classList.add("none") }, 1700)
            so_Luot.innerHTML = numbGo; numbGo-- // (3) cho s·ªë l∆∞·ª£t v√† tr·ª´ ƒëi l∆∞·ª£t

            click1 = true; meTurn = true; theyTurn = false; timePlay = 10
            time_Me.classList.remove("doiMauTime") // t·∫Øt m√†u s√°ng khi ƒë√°nh (1)
            timePlayy()
        } else {// m√¨nh h·∫øt l∆∞·ª£t --> qu√°i ƒë√°nh
            c·ªôngƒêi·ªÉmSauCrush(1)
            meTurn = false; theyTurn = true; timePlay = 10
            var xx = [7, 6, 5, 4, 3];
            var random = Math.floor(Math.random() * xx.length)
            time_Me.classList.remove("doiMauTime")// t·∫Øt m√†u s√°ng khi ƒë√°nh (2)
            timeEnemyPlay = xx[random]; timePlayy()
        }

    } else {
        if (numbGo > 0) { // qu√°i c√≥ nhi·ªÅu l∆∞·ª£t
            // (1) m·ªü b·∫£ng l∆∞·ª£t, (2) t·∫Øt b·∫£ng l∆∞·ª£t
            c·ªôngƒêi·ªÉmSauCrush(1)
                /*1*/th·∫ª_Cha_L∆∞·ª£t.classList.remove("none")
               /*2*/setTimeout(function () { th·∫ª_Cha_L∆∞·ª£t.classList.add("none") }, 1700)
            so_Luot.innerHTML = numbGo; numbGo-- // (3) cho s·ªë l∆∞·ª£t v√† tr·ª´ ƒëi l∆∞·ª£t

            theyTurn = true; meTurn = false; timePlay = 10
            time_Enemy.classList.remove("doiMauTime")// t·∫Øt m√†u s√°ng khi ƒë√°nh (1)
            timePlayy()
        } else {// qu√°i h·∫øt l∆∞·ª£t --> m√¨nh ƒë√°nh
            c·ªôngƒêi·ªÉmSauCrush(1)
            click1 = true; meTurn = true; theyTurn = false; timePlay = 10
            time_Enemy.classList.remove("doiMauTime")// t·∫Øt m√†u s√°ng khi ƒë√°nh (2)
            timePlayy()
        }
    }

}
// xx l√† lv 0 or 100;
function lvPoint(xx) { // yy ko truy·ªÅn m·∫∑c ƒë·ªãnh l√† 0
    var y = [dam, gi√°pPo, hpPo, hpMaxPo]
    function mi(y, lv, ph·∫ßn_TrƒÉm) { // x l√† dame, y m·∫£ng dam, yy l√† special, zz l√† y.length
        i = Math.floor(Math.random() * y.length); x = y[i];  x=x+(x*ph·∫ßn_TrƒÉm/100)*lv; return l√†m_Tr√≤n(x,2)
    } // dam, hpPo gi√°pPo l√† m·∫£ng
    hpMax = mi(y[3], xx, 8); dame = mi(y[0], xx, 7); gi√°pPoint = mi(y[1], xx, 7); hpPoint = mi(y[2], xx, 7)
    return [hpMax, 9, hpPoint, 2, 0.5, gi√°pPoint, dame] /*hpMax  - mana - hp - v√†ng - skill - gi√°p - dame*/
}
function c·ªôngƒêi·ªÉmSauCrush(aa) {
    if (aa == 0) {
        var x = document.querySelectorAll(".ch-Chess")
        for (var y of x) {
            if (y.src == blank) { // t√¨m vi√™n  n√†o tr·ªëng
                if (_6_Class_3x2.includes(y.classList[2])) { allChessPoint4[_6_Class_3x2.indexOf(y.classList[2])] += 1.5 }
                else if (_6_Class_D·ªçc.includes(y.classList[2])) { allChessPoint4[_6_Class_D·ªçc.indexOf(y.classList[2])] += 1.5 }
                else if (_6_Class_Ngang.includes(y.classList[2])) { allChessPoint4[_6_Class_Ngang.indexOf(y.classList[2])] += 1.5 }
                else if (s√°u_Class_Th∆∞·ªùng.includes(y.classList[0])) { allChessPoint4[s√°u_Class_Th∆∞·ªùng.indexOf(y.classList[0])] += 1 }
            }
        } function mi(i) {setTimeout(()=>{m·∫£ng_b·∫£ng_ƒêi·ªÉm[i].innerHTML = 0}, 1700)}
        for (var i = 0; i < m·∫£ng_b·∫£ng_ƒêi·ªÉm.length; i++) {
            if (meTurn == true) {var xx = allChessPoint4[i] * lvPoint(mee.lvInfor())[i + 1]} 
            else { var xx = allChessPoint4[i] * lvPoint(quai.lvInfor())[i+1]}
            m·∫£ng_b·∫£ng_ƒêi·ªÉm[i].innerHTML = l√†m_Tr√≤n(xx, 2); mi(i)       
            m·∫£ng_b·∫£ng_ƒêi·ªÉm_End[i] = l√†m_Tr√≤n(xx, 2);
        }
    }
    if (aa > 0) {
        // for (va)
        if  (meTurn == true) { // mee.mana(2, +m·∫£ng_b·∫£ng_ƒêi·ªÉm[0].innerHTML); m·∫£ng_b·∫£ng_ƒêMe[0].innerHTML = mee.manaInfor()
            mee.mana(2,  m·∫£ng_b·∫£ng_ƒêi·ªÉm_End[0]); m·∫£ng_b·∫£ng_ƒêMe[0].innerHTML = mee.manaInfor()
            mee.hp(2,  m·∫£ng_b·∫£ng_ƒêi·ªÉm_End[1]); m·∫£ng_b·∫£ng_ƒêMe[1].innerHTML = mee.hpInfor()
            mee.xu(2,  m·∫£ng_b·∫£ng_ƒêi·ªÉm_End[2]); m·∫£ng_b·∫£ng_ƒêMe[2].innerHTML = mee.xuInfor()
            mee.h·ªìng_ng·ªçc(2,  m·∫£ng_b·∫£ng_ƒêi·ªÉm_End[3]); m·∫£ng_b·∫£ng_ƒêMe[3].innerHTML = mee.h·ªìng_ng·ªçcInfor()
            if ( m·∫£ng_b·∫£ng_ƒêi·ªÉm_End[4] > 0) {
                mee.gi√°p(1,  m·∫£ng_b·∫£ng_ƒêi·ªÉm_End[4]); m·∫£ng_b·∫£ng_ƒêMe[4].innerHTML = mee.gi√°pInfor()
                m·∫£ng_b·∫£ng_ƒêEnemy[1].innerHTML = quai.hpInfor();  m·∫£ng_b·∫£ng_ƒêEnemy[4].innerHTML = quai.gi√°pInfor(); 
            }
            if ( m·∫£ng_b·∫£ng_ƒêi·ªÉm_End[5] > 0) {
                quai.hp(1,  m·∫£ng_b·∫£ng_ƒêi·ªÉm_End[5]); m·∫£ng_b·∫£ng_ƒêEnemy[4].innerHTML = quai.gi√°pInfor()
                m·∫£ng_b·∫£ng_ƒêEnemy[1].innerHTML = quai.hpInfor()
            }
        } else {
            quai.mana(2,  m·∫£ng_b·∫£ng_ƒêi·ªÉm_End[0]); m·∫£ng_b·∫£ng_ƒêEnemy[0].innerHTML = quai.manaInfor()
            quai.hp(2,  m·∫£ng_b·∫£ng_ƒêi·ªÉm_End[1]); m·∫£ng_b·∫£ng_ƒêEnemy[1].innerHTML = quai.hpInfor()
            quai.xu(2,  m·∫£ng_b·∫£ng_ƒêi·ªÉm_End[2]); m·∫£ng_b·∫£ng_ƒêEnemy[2].innerHTML = quai.xuInfor()
            quai.h·ªìng_ng·ªçc(2,  m·∫£ng_b·∫£ng_ƒêi·ªÉm_End[3]); m·∫£ng_b·∫£ng_ƒêEnemy[3].innerHTML = quai.h·ªìng_ng·ªçcInfor()
            if ( m·∫£ng_b·∫£ng_ƒêi·ªÉm_End[4] > 0) {
                quai.gi√°p(2,  m·∫£ng_b·∫£ng_ƒêi·ªÉm_End[4]); m·∫£ng_b·∫£ng_ƒêEnemy[4].innerHTML = quai.gi√°pInfor()
                m·∫£ng_b·∫£ng_ƒêMe[1].innerHTML = mee.hpInfor(); m·∫£ng_b·∫£ng_ƒêMe[4].innerHTML = mee.gi√°pInfor()
            }
            if ( m·∫£ng_b·∫£ng_ƒêi·ªÉm_End[5] > 0) {
                mee.hp(1,  m·∫£ng_b·∫£ng_ƒêi·ªÉm_End[5]); m·∫£ng_b·∫£ng_ƒêMe[4].innerHTML = mee.gi√°pInfor()
                m·∫£ng_b·∫£ng_ƒêMe[1].innerHTML = mee.hpInfor()
            }
        }
        for(let i =0; i < allChessPoint4.length; i++) {allChessPoint4[i] = 0; m·∫£ng_b·∫£ng_ƒêi·ªÉm_End[i] = 0}
    }
}

</script>
<script>
    if (5) {
    // Bi·∫øn m·∫£ng. vd 6 class
    var s√°u_Class_Th∆∞·ªùng = ['water', 'heart', 'melon', 'star', 'yingyang', 'sword']
    var s√°u_Bi·∫øn_Th∆∞·ªùng = [water, heart, melon, star, yingyang, sword]
    var s√°u_Bi·∫øn_Boom_3x = [water3x3, heart3x3, melon3x3, star3x3, yingyang3x3, sword3x3]
    var s√°u_Bi·∫øn_D·ªçc = [waterDoc, heartDoc, melonDoc, starDoc, yingyangDoc, swordDoc]
    var s√°u_Bi·∫øn_Ngang = [waterNgang, heartNgang, melonNgang, starNgang, yingyangNgang, swordNgang]
    var m∆∞·ªùi_T√°m_Class = ["waterNgang", "heartNgang", "melonNgang", "starNgang", "yingyangNgang", "swordNgang", "waterDoc", "heartDoc", "melonDoc", "starDoc", "yingyangDoc", "swordDoc", "water3x3", "heart3x3", "melon3x3", "star3x3", "yingyang3x3", "sword3x3"]
    var _12_Class_Ngang_D·ªçc = ["waterNgang", "heartNgang", "melonNgang", "starNgang", "yingyangNgang", "swordNgang", "waterDoc", "heartDoc", "melonDoc", "starDoc", "yingyangDoc", "swordDoc"]
    var _6_Class_3x2 = ['water3x2', 'heart3x2', 'melon3x2', 'star3x2', 'yingyang3x2', 'sword3x2']
    var _6_Bi·∫øn_3x2 = [water3x2, heart3x2, melon3x2, star3x2, yingyang3x2, sword3x2]

    var _6_Class_Ngang = ["waterNgang", "heartNgang", "melonNgang", "starNgang", "yingyangNgang", "swordNgang"]
    var _6_Class_D·ªçc = ["waterDoc", "heartDoc", "melonDoc", "starDoc", "yingyangDoc", "swordDoc"]
    var _6_Class_3x3 = ["water3x3", "heart3x3", "melon3x3", "star3x3", "yingyang3x3", "sword3x3"]
    var _25_Bi·∫øn_ƒê·∫∑c_Bi·ªát = [fiveBlock, waterNgang, heartNgang, melonNgang, starNgang, yingyangNgang, swordNgang, waterDoc, heartDoc, melonDoc, starDoc, yingyangDoc, swordDoc, water3x3, heart3x3, melon3x3, star3x3, yingyang3x3, sword3x3, water3x2, heart3x2, melon3x2, star3x2, yingyang3x2, sword3x2]
    var _25_ClassList_0 = ['haha', 'water', 'heart', 'melon', 'star', 'yingyang', 'sword', 'water', 'heart', 'melon', 'star', 'yingyang', 'sword', 'water', 'heart', 'melon', 'star', 'yingyang', 'sword', 'waterg', 'heartg', 'melong', 'starg', 'yingyangg', 'swordg']
    var _25_ClassList_2 = ['fiveBlock', 'waterNgang', 'heartNgang', 'melonNgang', 'starNgang', 'yingyangNgang', 'swordNgang', 'waterDoc', 'heartDoc', 'melonDoc', 'starDoc', 'yingyangDoc', 'swordDoc', 'water3x3', 'heart3x3', 'melon3x3', 'star3x3', 'yingyang3x3', 'sword3x3', 'water3x2', 'heart3x2', 'melon3x2', 'star3x2', 'yingyang3x2', 'sword3x2']
}

// m·∫£ng ƒë·ªÉ c·ªông ƒëi·ªÉm b·∫£ng
{
    var allChessPoint = ["waterNgang", "heartNgang", "melonNgang", "starNgang", "yingyangNgang", "swordNgang",
        "waterDoc", "heartDoc", "melonDoc", "starDoc", "yingyangDoc", "swordDoc",
        "water3x2", "heart3x2", "melon3x2", "star3x2", "yingyang3x2", "sword3x2"
    ]
    var allChessPointBT = ["water", "heart", "melon", "star", "yingyang", "sword"]
    var manaTog = 0, heartTog = 0, goldTog = 0, skillPoint = 0, giapTog = 0, dameTog = 0
    var allChessPoint4 = [manaTog, heartTog, goldTog, skillPoint, giapTog, dameTog]
    var allChessPoint44=[lvPoint/*mana*/,lvPoint/*hp*/,lvPoint/*v√†ng*/,lvPoint/*skill*/,lvPoint/*giap*/,lvPoint/*dame*/]
    var m·∫£ng_b·∫£ng_ƒêi·ªÉm = [document.querySelector(".manaBoard1"), document.querySelector(".hpBoard1"), document.querySelector(".vangBoard1"), document.querySelector(".HNBoard1"), document.querySelector(".giapBoard1"), document.querySelector(".dameBoard1")]
    var m·∫£ng_b·∫£ng_ƒêMe = [document.querySelector(".manaMe1"), document.querySelector(".hpMe1"), document.querySelector(".vangMe1"), document.querySelector(".HNMe1"), document.querySelector(".giapMe1")]
    var m·∫£ng_b·∫£ng_ƒêEnemy = [document.querySelector(".manaEnemy1"), document.querySelector(".hpEnemy1"), document.querySelector(".vangEnemy1"), document.querySelector(".HNEnemy1"), document.querySelector(".giapEnemy1")]
    var m·∫£ng_b·∫£ng_ƒêi·ªÉm_End = [0,0,0,0,0,0]
}


// th·∫Øc m·∫Øc
{// ???  x√≥a b·∫£ng l√† x√≥a h·∫øt 81 √¥ ?
    // ??? cho outfocus l√† rem
    // ??? v√≠ d·ª• ch·ªØ L l√† n√≥ c·ªông 2 l∆∞·ª£t
    // ??? cho ƒÉn 3x l√† c·ªông l∆∞·ª£t
    // ??? r·ªõt c·ªù ch·ª© T, n√≥ t·∫°o ra vi√™n ngang v√† 3x
    //x·ª≠ ƒëi·ªÉm gi√°p board

    // ??? sao ƒÉn 3 vi√™n hangf ƒë·∫ßu
    // ??? sao ƒÉn l√† m·∫•t ƒëi ti·∫øp


    // ??? crush xon g r∆°i c√≥ t·∫°o vi√™n 4x 
    function bbbb() {

        var bbb = ['https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/water.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/sword.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/star.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/yingyang.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/melon.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/star.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/star.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/heart.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/yingyang.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/melon.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/heart.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/melon.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/star.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/heart.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/heart.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/water.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/water.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/heart.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/sword.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/sword.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/heart.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/water.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/yingyang.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/water.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/heart.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/yingyang.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/heart.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/heart.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/water.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/yingyang.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/water.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/sword.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/sword.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/heart.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/melon.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/melon.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/sword.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/yingyang.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/sword.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/melon.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/yingyang.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/water.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/yingyang.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/heart.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/heart.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/star.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/star33.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/melon.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/melon.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/bomb5.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/melon.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/sword.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/water.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/melonNgang.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/melon.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/melon.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/yingyang.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/star.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/water.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/star.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/yingyang.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/star.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/water.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/yingyang.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/melon.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/yingyang.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/heart.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/heart.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/melon.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/star.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/melon.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/star.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/yingyang.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/yingyang.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/melon.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/sword.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/melon.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/heart.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/heart.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/sword.png?raw=true', 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/star.png?raw=true']
        var x = document.querySelectorAll(".ch-Chess")
        for (var i = 0; i < x.length; i++) {
            x[i].src = bbb[i]
        }
        checkClass()
    }


  

    // var maTran = [] // Kh·ªüi t·∫°o ma tr·∫≠n
    // for (var i = 0; i < h√†ng; i++) {
    //     maTran[i] = []; // Kh·ªüi t·∫°o m·ªói h√†ng l√† m·ªôt m·∫£ng con
    //     for (var j = 0; j < c·ªôt; j++) {
    //         let tile = document.createElement("img");
    //         tile.src = randomCandy(); tile.style.opacity = "1" // th√™m ·∫£nh v√† ƒë·ªô m·ªù 1
    //         for (var i = 0; i < s√°u_Bi·∫øn_Th∆∞·ªùng.length; i++) {
    //             if (tile.src == s√°u_Bi·∫øn_Th∆∞·ªùng[i]) { tile.className = s√°u_Class_Th∆∞·ªùng[i] }
    //         } // cho class v√†o c·ªù. v√≠ d·ª• c·ªù melon class "melon"
    //         tile.classList.add("ch-Chess", "Xclass", "fc", "i3", "absolute")
    //         tile.addEventListener("click", click_Other); tile.addEventListener("click", click_Curr);
    //         tile.id = i.toString() + "-" + j.toString(); // set id     
    //         maTran[i].push(tile); //board_table.append(tile); // !!! append th√™m nhi·ªÅu con 1 l√∫c ƒëc
    //     }
        // board.push(maTran[i])
    // }
}
</script>
<script>
    
// m·ªü ƒë·∫ßu
{
    // th√™m sao sai nh·ªâ?

    const windowWidth = window.innerWidth;
    const windowHeight = window.innerHeight;
    document.querySelector(".wrap").style.width = '320px'
    document.querySelector(".wrap").style.height = '650px'
  
    // document.querySelector(".wrap").style.width = window.innerWidth + 'px'
    // document.querySelector(".wrap").style.height = window.innerHeight + 'px'
    document.documentElement.style.fontSize = Number(document.querySelector(".wrap").style.width.slice(0, -2)) / 15 + 'px'

    document.querySelector(".screen").style.width = 14.2 + 'rem'
    document.querySelector(".screen").style.height = 29.8 +'rem'
    document.querySelector(".body").style.width = 14.2 + 'rem'
    document.querySelector(".body").style.height = 29.8 +'rem'

    var element = document.querySelector(".keyBoard")
    element.style.pointerEvents = "auto";

    var element = document.querySelector(".keyBoard2")
    element.style.pointerEvents = "auto";
    var element = document.querySelector(".infor_battle")
    element.style.pointerEvents = "auto";
    // document.querySelector(".haha").addEventListener("click", function() {
    //     startMap()
    // })
}

// map
{
    var mapBassic = [
        // '#00bbff96'
        ['68', '61', '', '0', '0', '#00bbff96', 'blue', 'red', "pink", 'brown'],
        [['3', '3', "exit1", '1', '32', 'black'], ['3', '3', "exit2", '56', '30', 'black'], ['3', '3', "exit3", '26', '63', 'black']]

    ]

    var mapBassic = [
        // '#00bbff96'
        ['68', '61', '', '0', '0', '#00bbff96', 'blue', 'red', "pink", 'brown'],
        [['3', '3', "exit1", '1', '32', 'black'], ['3', '3', "exit2", '56', '30', 'black'], ['3', '3', "exit3", '26', '63', 'black']]

    ]


    var vitriMap = 0
    function createMap(width, height, name, top, left, color) {

        if (name == '') {
            var map = document.createElement('div')
            map.classList.add('map')
            var fullclassApp = document.querySelector(".body")
            fullclassApp.append(map);

            // -----------
            var miniMap = document.createElement('div')
            miniMap.classList.add('miniM')
            var fullclassApp2 = document.querySelector(".miniMap")
            fullclassApp2.append(miniMap);

            var khungMap = document.createElement('div')
            khungMap.classList.add('khungMap')
            var fullclassApp3 = document.querySelector(".miniMap")
            fullclassApp3.append(khungMap);

            // -----------
            this.transMap = function (b) {
                if (b == 1 || b == 3) {
                    map.style.height = this.height + 'rem'
                    map.style.width = this.width + 'rem'

                    miniMap.style.height = this.height2 + 'rem'
                    miniMap.style.width = this.width2 + 'rem'


                } else if (b == 2 || b == 4) {

                    map.style.height = this.width + 'rem'
                    map.style.width = this.height + 'rem'

                    miniMap.style.height = this.width2 + 'rem'
                    miniMap.style.width = this.height2 + 'rem'
                }
            }

            miniMap.style.width = width / 5 + 'rem'
            miniMap.style.height = height / 5 + 'rem'
            miniMap.style.top = top / 5 + 'rem'
            miniMap.style.left = left / 5 + 'rem'

            miniMap.style.backgroundColor = color




        } else {
            var map = document.createElement('div')
            map.classList.add('itemMap')
            map.classList.add(name)
            var fullclassApp = document.querySelector(".map")
            fullclassApp.append(map);


            var miniExit = document.createElement('div')
            miniExit.classList.add('miniExit')
            var fullclassApp4 = document.querySelector(".miniM")
            fullclassApp4.append(miniExit);

            miniExit.style.width = 1 + 'rem'
            miniExit.style.height = 1 + 'rem'
            miniExit.style.top = top / 5 + 'rem'
            miniExit.style.left = left / 5 + 'rem'

            miniExit.style.backgroundColor = color

            this.transMap = function (b, c, cc) {

                if (b == 1) {
                    map.style.top = this.top + 'rem'
                    map.style.left = this.left + 'rem'

                    miniExit.style.top = this.top2 + 'rem'
                    miniExit.style.left = this.left2 + 'rem'
                    vitriMap = 1
                } else if (b == 2) {
                    map.style.top = this.left + 'rem'
                    map.style.left = c - this.height - this.top + 'rem'

                    miniExit.style.top = this.left2 + 'rem'
                    miniExit.style.left = c / 5 - this.height2 - this.top2 + 'rem'
                    vitriMap = 2
                } else if (b == 3) {
                    map.style.top = c - this.height - this.top + 'rem'
                    map.style.left = cc - this.width - this.left + 'rem'

                    miniExit.style.top = c / 5 - this.height2 - this.top2 + 'rem'
                    miniExit.style.left = cc / 5 - this.width2 - this.left2 + 'rem'
                    vitriMap = 3
                } else if (b == 4) {
                    map.style.top = c - this.width - this.left + 'rem'
                    map.style.left = this.top + 'rem'

                    miniExit.style.top = c / 5 - this.width2 - this.left2 + 'rem'
                    miniExit.style.left = this.top2 + 'rem'
                    vitriMap = 4
                }
            }
        }
        this.height = height
        this.width = width
        this.top = top
        this.left = left

        this.height2 = height / 5
        this.width2 = width / 5
        this.top2 = top / 5
        this.left2 = left / 5
        // map.style.width = width + 'px'
        // map.style.height = height + 'px'
        map.style.width = width + 'rem'
        map.style.height = height + 'rem'
        map.style.top = top + 'rem'
        map.style.left = left + 'rem'

        map.style.backgroundColor = color
        // 2.1 h√†m l·∫•y gi√° tr·ªã top
        this.topp = function () {
            return Number(map.style.top.slice(0, -3))
        }
        // 2.2 h√†m l·∫•y gi√° tr·ªã left
        this.leftt = function () {
            return Number(map.style.left.slice(0, -3))
        }



        // h√†m cho map, khi nh√¢n v·∫≠t qua ph·∫£i
        this.moveRight = function () {
            var leftt = this.left()
            leftt -= 9
            map.style.left = leftt + 'px'
        }

        // h√†m cho map, khi nh√¢n v·∫≠t qua tr√°i
        this.moveLeft = function () {
            var leftt = this.left()
            leftt += 9
            map.style.left = leftt + 'px'
        }


        this.moveTop = function () {
            var topp = this.top()
            topp += 9
            map.style.top = topp + 'px'


        }
        this.moveBottom = function () {
            var topp = this.top()
            topp -= 9
            map.style.top = topp + 'px'

        }

    }

    // nh√¢n v·∫≠t
    function nhanvat(widthDe, heightDe, topDe, leftDe,
        widthKhung, heightKhung, bottomKhung, widthAnh, heightAnh, topAnh, leftAnh,
        name, numberName, textMons, classMons) {


        // x√¢y n·ªÅn
        {
            var de = document.createElement('div')
            de.classList.add('divDe')
            if (name == 'me') {
                de.classList.add(name)
            } else {
                de.classList.add("X" + numberName)
            }
            var map = document.querySelector(".map") //g·ªçi bi·∫øn qua Dom
            map.append(de);

            var khung = document.createElement('div')
            khung.classList.add('divKhung')
            de.append(khung);

            var anh = document.createElement('div')
            anh.classList.add('divAnh')
            khung.append(anh);
            var nameBox = document.createElement('div')
            nameBox.classList.add('nameBoxDe')
            nameBox.innerHTML = name
            de.append(nameBox);


            de.style.width = widthDe + 'rem'
            de.style.height = heightDe + 'rem'
            de.style.top = topDe + 'rem'
            de.style.left = leftDe + 'rem'

            khung.style.background = 'none'
            khung.style.width = widthKhung + 'rem'
            khung.style.height = heightKhung + 'rem'
            khung.style.bottom = bottomKhung + 'rem'

            anh.style.backgroundColor = 'none'
            anh.style.width = widthAnh + 'rem'
            anh.style.height = heightAnh + 'rem'
            anh.style.top = topAnh + 'rem'
            anh.style.left = leftAnh + 'rem'


            this.widthDe = widthDe
            this.heightDe = heightDe
            this.widthKhung = widthKhung
            this.heightKhung = heightKhung
            // this.nameChar = name
            this.numberName = numberName

            // if (numberName != 0) {

            // }
            this.topp = function () {
                return Number(de.style.top.slice(0, -3))
            }
            // 2.2 h√†m l·∫•y gi√° tr·ªã left
            this.leftt = function () {
                return Number(de.style.left.slice(0, -3))
            }
            // background
            this.backgroundImage = function (src, po, re, size) {  //h√†m ƒë·ªïi m√†u n·ªÅn
                anh.style.backgroundImage = src
                anh.style.backgroundPosition = po
                anh.style.backgroundRepeat = re
                anh.style.backgroundSize = size

            }
            // 1, mapp.height, map.width, z
            this.transMap = function (b, c, cc, ccc) {

                if (b == 1) {
                    console.log("wrong")
                    if (ccc == 2) {
                        var a = this.topp()
                        // console.log(c, this.widthDe / 2, this.heightDe / 2)
                        de.style.top = c - this.leftt() - this.widthDe / 2 - this.heightDe / 2 + 'rem'
                        de.style.left = a + this.heightDe / 2 - this.widthDe / 2 + 'rem'
                    }
                    else if (ccc == 3) {
                        // console.log(c, cc, this.widthDe, this.heightDe, this.leftt())
                        de.style.top = c - this.topp() - this.heightDe + 'rem'
                        de.style.left = cc - this.widthDe - this.leftt() + 'rem'

                    }
                    else if (ccc == 4) {
                        var a = this.topp()
                        // console.log(c, this.widthDe / 2, this.heightDe / 2)
                        de.style.top = this.leftt() + this.widthDe / 2 - this.heightDe / 2 + 'rem'
                        de.style.left = cc - a - this.heightDe / 2 - this.widthDe / 2 + 'rem'

                    }

                } else if (b == 2) {
                    if (ccc == 1) {
                        var a = this.topp()
                        de.style.top = this.leftt() + this.widthDe / 2 - this.heightDe / 2 + 'rem'
                        de.style.left = c - a - this.heightDe / 2 - this.widthDe / 2 + 'rem'
                    } else {
                        this.transMap(1, mapp.height, mapp.width, z)
                        var a = this.topp()
                        de.style.top = this.leftt() + this.widthDe / 2 - this.heightDe / 2 + 'rem'
                        de.style.left = c - a - this.heightDe / 2 - this.widthDe / 2 + 'rem'
                    }
                } else if (b == 3) {

                    if (ccc == 1) {
                        de.style.top = c - this.topp() - this.heightDe + 'rem'
                        de.style.left = cc - this.leftt() - this.widthDe + 'rem'
                    } else {
                        this.transMap(1, mapp.height, mapp.width, z)
                        de.style.top = c - this.topp() - this.heightDe + 'rem'
                        de.style.left = cc - this.leftt() - this.widthDe + 'rem'
                    }
                } else if (b == 4) {

                    if (ccc == 1) {
                        var a = this.topp()
                        console.log(cc, this.leftt(), this.widthDe / 2, this.heightDe / 2)
                        de.style.top = cc - this.leftt() - this.widthDe / 2 - this.heightDe / 2 + 'rem'
                        de.style.left = a + this.heightDe / 2 - this.widthDe / 2 + 'rem'

                    } else {
                        this.transMap(1, mapp.height, mapp.width, z)
                        var a = this.topp()

                        de.style.top = cc - this.leftt() - this.widthDe / 2 - this.heightDe / 2 + 'rem'
                        de.style.left = a + this.heightDe / 2 - this.widthDe / 2 + 'rem'

                    }
                }
            }

        }
    }
}
// map. me v√† exit v√† qu√°i
{
    var mapp = 0, me = 0
    var exit1, exit2, exit3, exit4, exit5, exit6, exit7, exit8, exit9, exit10
    var exitArray = [exit1, exit2, exit3, exit4, exit5, exit6, exit7, exit8, exit9, exit10]
    var exitArrayOfficial = []

    var quai1, quai2, quai3, quai4, quai5, quai6, quai7, quai8, quai9, quai10
    var quaiArray = [quai1, quai2, quai3, quai4, quai5, quai6, quai7, quai8, quai9, quai10]
    var quaiArrayOfficial = []
}
var vitri1 = 0
function startMap() {
    
    mapp = new createMap(mapBassic[0][0], mapBassic[0][1], mapBassic[0][2], mapBassic[0][3], mapBassic[0][4], mapBassic[0][5])
    for (var i = 0; i < mapBassic[1].length; i++) {
        exitArray[i] = new createMap(mapBassic[1][i][0], mapBassic[1][i][1], mapBassic[1][i][2], mapBassic[1][i][3], mapBassic[1][i][4], mapBassic[1][i][5])
        exitArrayOfficial.push(exitArray[i])
    }
    vitriMap = 1
    document.querySelector(".upKey2").classList.add("colorButton")


    // nh√¢n v·∫≠t
    me = new  nhanvat(2.88, 1.6, 10, 0,      3, 4.7, 0.8,      9, 10, -3, -3,    'me')
    me.backgroundImage("url('https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/me.png?raw=true')", '38px 51px', 'no-repeat', '4.5rem')

    
    for (var i = 0; i < quaiArray.length; i++) {
        var a = Math.floor(Math.random() * (randomTopLeft(mapp, me)[0] + 1))
        var b = Math.floor(Math.random() * (randomTopLeft(mapp, me)[1] + 1))
        quaiArray[i] = new nhanvat(2.88, 1.6, a, b,      3, 4.7, 0.8,      9, 10, -3, -3, 'Qu√°i V·∫≠t ' + (i + 1), (i + 1))
        quaiArrayOfficial.push(quaiArray[i])
        quaiArray[i].backgroundImage("url('https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/they.png?raw=true')", '30px 50px', 'no-repeat', '5.1rem')
    }
}

function randomTopLeft(x, y) {
    // top 
    return [Math.floor(x.height - y.heightDe / 2 - y.heightKhung), Math.floor(x.width - y.widthDe)]
}



    
// ph√≠m b·∫•m ƒë·ªïi map 
{

    function cancellColor() {
        document.querySelector(".upKey2").classList.remove("colorButton")
        document.querySelector(".downKey2").classList.remove("colorButton")
        document.querySelector(".leftKey2").classList.remove("colorButton")
        document.querySelector(".rightKey2").classList.remove("colorButton")
    }
    document.querySelector(".rightKey2").addEventListener("click", rightMap)
    function rightMap() {
        if (vitriMap != 2) {
            z = vitriMap
            cancellColor()
            document.querySelector(".rightKey2").classList.add("colorButton")
            mapp.transMap(2)
            for (var i = 0; i < exitArrayOfficial.length; i++) {
                exitArrayOfficial[i].transMap(2, mapp.height)
            }

            me.transMap(2, mapp.height, mapp.width, z)
            for (var i = 0; i < quaiArrayOfficial.length; i++) {
                quaiArrayOfficial[i].transMap(2, mapp.height, mapp.width, z)
            }
        }
    }
    
    document.querySelector(".leftKey2").addEventListener("click", leftMap)
    function leftMap() {
        if (vitriMap != 4) {
            z = vitriMap
            cancellColor()
            document.querySelector(".leftKey2").classList.add("colorButton")
            mapp.transMap(4)
            for (var i = 0; i < exitArrayOfficial.length; i++) {
                exitArrayOfficial[i].transMap(4, mapp.width)
            }

            me.transMap(4, mapp.height, mapp.width, z)
            for (var i = 0; i < quaiArrayOfficial.length; i++) {
                quaiArrayOfficial[i].transMap(4, mapp.height, mapp.width, z)
            }
        }
    }
    
    document.querySelector(".downKey2").addEventListener("click", downMap)
    function downMap() {
        if (vitriMap != 3) {
            z = vitriMap
            cancellColor()
            document.querySelector(".downKey2").classList.add("colorButton")
            mapp.transMap(3)
            for (var i = 0; i < exitArrayOfficial.length; i++) {
                exitArrayOfficial[i].transMap(3, mapp.height, mapp.width)
                // c, cc
            }
            me.transMap(3, mapp.height, mapp.width, z)
            for (var i = 0; i < quaiArrayOfficial.length; i++) {
                quaiArrayOfficial[i].transMap(3, mapp.height, mapp.width, z)
            }
        }
    }
    
    document.querySelector(".upKey2").addEventListener("click", upMap)
    function upMap() {
        if (vitriMap != 1) {
            // clearInterval(vitri1)
            z = vitriMap
            cancellColor()
            document.querySelector(".upKey2").classList.add("colorButton")
            mapp.transMap(1)
            for (var i = 0; i < exitArrayOfficial.length; i++) {
                exitArrayOfficial[i].transMap(1)
            }
            me.transMap(1, mapp.height, mapp.width, z)
            for (var i = 0; i < quaiArrayOfficial.length; i++) {
                quaiArrayOfficial[i].transMap(1, mapp.height, mapp.width, z)
            }

        }
    }
}

// nh√¢n v·∫≠t di chuy·ªÉn
{
    var topMe, leftMe
    var numGo = 0.13
    // var y = Math.floor(heightScreen - me.height)
    // var z = Math.floor(widthScreen - me.width)
    // 3.1 n√∫t ƒëi xu·ªëng
    var numRun = 0
    var id
    function moveBottomButton() {

        numRun++
        if (vitriMap != 0) {
            if (numRun == 1) {
                id = setInterval(function () {
                    topMe = me.topp()
                    topMe += numGo
                    document.querySelector(".me").style.top = topMe + 'rem'
                    screenMe()
                    if (topMe + me.heightDe > mapp.height) {
                        document.querySelector(".me").style.top = mapp.height - me.heightDe - 0.2 + 'rem'
                        clearInterval(id); numRun = 0
                    }
                }, 25)
            } else {
                clearInterval(id); numRun = 0
            }
        }
    }
    document.querySelector(".downKey").addEventListener('click', moveBottomButton)

    function moveLeftButton() {

        numRun++
        if (vitriMap != 0) {
            if (numRun == 1) {
                id = setInterval(function () {
                    leftMe = me.leftt()
                    leftMe -= numGo
                    document.querySelector(".me").style.left = leftMe + 'rem'
                    screenMe()
                    // if (leftMe - me.heightKhung - me.heightDe / 2 < 0) {
                    if (leftMe < 0) {
                        document.querySelector(".me").style.left = 0 + 'rem'
                        clearInterval(id); numRun = 0
                    }
                }, 25)
            } else {
                clearInterval(id); numRun = 0
            }
        }
    }
    document.querySelector(".leftKey").addEventListener('click', moveLeftButton)


    function moveRightButton() {

        numRun++
        if (vitriMap != 0) {
            if (numRun == 1) {
                id = setInterval(function () {
                    leftMe = me.leftt()
                    leftMe += numGo
                    document.querySelector(".me").style.left = leftMe + 'rem'
                    screenMe()
                    if (leftMe + me.widthDe > mapp.width) {
                        document.querySelector(".me").style.left = mapp.width - me.widthDe - 0.06 + 'rem'
                        clearInterval(id); numRun = 0
                    }
                }, 25)
            } else {
                clearInterval(id); numRun = 0
            }
        }
    }
    document.querySelector(".rightKey").addEventListener('click', moveRightButton)


    function moveTopButton() {

        numRun++
        if (vitriMap != 0) {
            if (numRun == 1) {
                id = setInterval(function () {
                    topMe = me.topp()
                    topMe -= numGo
                    document.querySelector(".me").style.top = topMe + 'rem'
                    screenMe()

                    // sai
                    // if (leftMe - me.heightKhung - me.heightDe / 2 < 0) {
                    if (topMe < me.heightKhung - me.heightDe / 2) {
                        document.querySelector(".me").style.top = me.heightKhung - me.heightDe / 2 + 'rem'
                        clearInterval(id); numRun = 0
                    }
                }, 25)
            } else {
                clearInterval(id); numRun = 0
            }
        }
    }
    document.querySelector(".upKey").addEventListener('click', moveTopButton)




    function screenMe() {

        var widthS = (document.querySelector(".screen").style.width.slice(0, -3) - me.widthDe) / 2
        var heightS = (document.querySelector(".screen").style.height.slice(0, -3) - me.heightDe) / 2
        if (me.leftt() >= widthS && mapp.width - me.leftt() - me.widthDe >= widthS) {
            document.querySelector(".map").style.left = - (me.leftt() - widthS) + 'rem'
        } else if (me.leftt() < widthS) {

            document.querySelector(".map").style.left = 0 + 'rem'
        } else if (mapp.width - me.leftt() - me.widthDe < widthS) {
            document.querySelector(".map").style.left = - (mapp.width - Number(document.querySelector(".screen").style.width.slice(0, -3))) + 'rem'
        }


        if (me.topp() >= heightS && mapp.height - me.topp() - me.heightDe >= heightS) {
            document.querySelector(".map").style.top = - (me.topp() - heightS) + 'rem'
        } else if (me.topp() < heightS) {
            document.querySelector(".map").style.top = 0 + 'rem'
        } else if (mapp.height - me.topp() - me.heightDe < heightS) {
            document.querySelector(".map").style.top = - (mapp.height - Number(document.querySelector(".screen").style.height.slice(0, -3))) + 'rem'
        }


       
    }
}
var b, zz = 4
var monsterBreak = []
function findMotOrNhieu() {
    b = setInterval(function() {
        monsterBreak = []
        for (var i = 0; i < quaiArrayOfficial.length; i++) {
            if (quaiArrayOfficial[i].leftt() - me.leftt() - me.widthDe <= zz && me.leftt() - quaiArrayOfficial[i].leftt() - quaiArrayOfficial[i].widthDe <= zz && me.topp() - quaiArrayOfficial[i].topp() - quaiArrayOfficial[i].heightDe <= zz && quaiArrayOfficial[i].topp() - me.topp() - me.heightDe <= zz) {
                monsterBreak.push(quaiArrayOfficial[i])
            }
        }

        if (monsterBreak.length == 1) {
            document.querySelector(".tancong1Dich").classList.remove("none")
            document.querySelector(".tancong1Dich_Number").innerHTML = monsterBreak[0].numberName
            // ----
            document.querySelector(".doiDich").classList.add("none")
            document.querySelector(".tancongDaDich").classList.add("none")
        } 
        else if (monsterBreak.length > 1) {
            document.querySelector(".tancong1Dich").classList.add("none")
            // ----
            document.querySelector(".doiDich").classList.remove("none")
            // document.querySelector(".tancongDaDich").classList.remove("none")
        } 
        else {
            document.querySelector(".tancong1Dich").classList.add("none")
            document.querySelector(".doiDich").classList.add("none")
            document.querySelector(".tancongDaDich").classList.add("none")
        }
    },20)
}

var iDoi = 0
var cDoi = 0, testDoiDich = 0, cz = 0, czz
function clickDoiDich() {
    if (!document.querySelector(".doiDich").classList.contains("none") && monsterBreak.length > 1) {
        
        document.querySelector(".tancongDaDich").classList.remove("none")
        if (iDoi + 1 <= monsterBreak.length) {
            document.querySelector(".tancongDaDich_Number").innerHTML = monsterBreak[iDoi].numberName
            iDoi++
        } else {
            iDoi = 0
            document.querySelector(".tancongDaDich_Number").innerHTML = monsterBreak[iDoi].numberName
            iDoi++
        }
    }

    if (testDoiDich == 0) {
        testDoiDich++
        cz = setInterval(function() {
            if (!document.querySelector(".tancongDaDich").classList.contains("none")) {
                if (monsterBreak.length < 2) {
                    document.querySelector(".tancongDaDich").classList.add("none")
                } else {
                    for (var i = 0; i < monsterBreak.length; i++) {
                        if (monsterBreak[i].numberName == Number(document.querySelector(".tancongDaDich_Number").innerHTML)) {
                            cDoi ++
                        } 
                    }
                    if (cDoi == 0) {
                        if (monsterBreak.length > 1) {
                            clickDoiDich()
                        }
                    }
                    cDoi = 0
    
                }
    
            }
        },20)
    }
}
document.querySelector(".doiDich").addEventListener("click", clickDoiDich)





function fightMot() {
    document.querySelector(".keyBoard").classList.add("none")
    document.querySelector(".keyBoard2").classList.add("none")
    document.querySelector(".miniMap").classList.add("none")
    document.querySelector(".haha").classList.add("none")


    clearInterval(b)
    if (cz != 0) {clearInterval(cz); testDoiDich == 0}
    document.querySelector(".tancong1Dich").classList.add("none")
    document.querySelector(".doiDich").classList.add("none")
    document.querySelector(".tancongDaDich").classList.add("none")


    document.querySelector(".infor_battle").classList.remove("none")
    

    startGame()
    if (checkValid()) {
        chiso()
        // setTimeout(function () { readycrush(); }, 1000)
    }
    czz = setInterval(function() {
        if (document.querySelector(".hpEnemy1").innerHTML < 0 || document.querySelector(".hpMe1").innerHTML < 0) {
            document.querySelector(".keyBoard").classList.remove("none")
            document.querySelector(".keyBoard2").classList.remove("none")
            document.querySelector(".miniMap").classList.remove("none")
            document.querySelector(".haha").classList.remove("none")

            clearInterval(timeTogether)
            meTurn = false
        theyTurn = false
        timeEnemyPlay = 0
        timePlay = 0

        specialFirstArray = []

        listOfArrays = [];
        listOfArraysC = []
        diSlide = true
    
    
        tiep = 0
        dayTh = 0
    
        specialArraymini = []
    
        slide5 = false
    
        specialArraymini2 = []
    
        yyy = 0
        tiPlay = 0
        click1 = true
        click2 = true
        board = []
          clearInterval(slideLoop)  
          
          clearInterval(czz)  
    document.querySelector(".infor_battle").classList.add("none")
        }
    },30)

    
}
document.querySelector(".tancong1Dich").addEventListener("click", fightMot)
document.querySelector(".tancongDaDich").addEventListener("click", clickDoiDich)


function chiso() {
    document.querySelector(".hpEnemy1").innerHTML = 200
    document.querySelector(".hpEnemy2").innerHTML = 200

    document.querySelector(".hpMe1").innerHTML = 200
    document.querySelector(".hpMe2").innerHTML = 200

    document.querySelector(".manaMe2").innerHTML = 200
    document.querySelector(".manaEnemy2").innerHTML = 200
}









































// ?
{
    var vvvleft, vvvtop
// function miniMap(width, height, name, top, left, color) {
//     if (name == '') {
//         var miniMap = document.createElement('div')
//         miniMap.classList.add('miniMap')
//         var fullclassApp = document.querySelector(".miniMap") 
//         fullclassApp.append(miniMap); 
    
//         // this.transMap = function(b) {
//         //     if (b == 1 || b == 3) {
//         //         map.style.height = this.height + 'rem'
//         //         map.style.width = this.width + 'rem'
//         //     } else if (b == 2 || b == 4) {
                
//         //         map.style.height = this.width + 'rem'
//         //         map.style.width = this.height + 'rem'
//         //     } 
//         // }
//     }

//       // map.styule
//       this.height = height / 10
//       this.width = width / 10
//       this.top = top / 10
//       this.left = left / 10
//       // map.style.width = width / 10 + 'px'
//       // map.style.height = height / 10 + 'px'
//       miniMap.style.width = width / 10 + 'rem'
//       miniMap.style.height = height / 10 + 'rem'
//       miniMap.style.top = top / 10 + 'rem'
//       miniMap.style.left = left / 10 + 'rem'

//       miniMap.style.backgroundColor = color
//      // 2.1 h√†m l·∫•y gi√° tr·ªã top
//      this.topp = function () {
//        return Number(map.style.top.slice(0, -3))
//    }
//    // 2.2 h√†m l·∫•y gi√° tr·ªã left
//    this.leftt = function () {
//        return Number(map.style.left.slice(0, -3))
//    }
// }

}



</script>
</html>