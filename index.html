<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <style>
        * {
            margin: 0;
            padding: 0;
        }
    
        .wrap {
            /* width: 320px;
            height: 650px; */
            position: relative;
            background-color: red;
        }
    
        .body {
            /* width: 95%;
                height: 97.8%; */
            width: 14.2rem;
            height: 29.8rem;
            margin-left: 0.4rem;
            margin-top: 0.4rem;
            position: absolute;
            background-color: blue;
        }
    
        .box1 {
            width: 60px;
            height: 60px;
            position: absolute;
            background-color: blue;
        }
    
        .screen {
            /* width: 100%;
                height: 100%; */
                width: 14.2rem;
            height: 29.8rem;
            /* background: yellow; */
            /* margin-left: 2.5%;
                margin-top: 2.1%; */
            pointer-events: none;
            border: 1px solid #000;
    
        }
    </style>
    <div class="wrap">
        <div class="body">
            <div class="haha">
    
            </div>
            <style>
                .screen {
                    z-index: 3;
                    position: absolute;
                }
    
                .haha {
                    position: absolute;
                    width: 4rem;
                    height: 3rem;
                    top: 2rem;
                    background-color: yellow;
                    left: 2rem;
                }
            </style>
            <div class="screen">
                <style>
                    .keyBoard {
                        width: 41.33%;
                        height: 15.09%;
                        background-color: #10a17691;
                        position: absolute;
                        bottom: 1.5rem;
                        left: 50%;
                        border-radius: 0.5rem;
                        transform: translateX(-50%);
                        border: 2px solid #000;
                    }
    
                    .ac {
                        left: 13px;
                        background: #4a008b;
                        top: -100px;
                        font-size: 37px;
                        min-width: 251px;
                        height: 72px;
                        line-height: 72px;
                        position: absolute;
                        text-align: center;
                        box-sizing: border-box;
                        border-radius: 20px;
                        border: 3px solid #000000b5;
                    }
    
                    .ad {
                        text-align: center;
                        box-sizing: border-box;
                        border-radius: 20px;
                        border: 3px solid #000000b5;
                        right: 0px;
                        background: #ff375e;
                        top: -100px;
                        font-size: 35px;
                        min-width: 77px;
                        height: 72px;
                        line-height: 72px;
                        position: absolute;
                    }
    
                    .focusKey {
                        width: 1.9rem;
                        height: 1.9rem;
                        position: absolute;
                        font-size: 10px;
                        line-height: 1.9rem;
                        text-align: center;
                        box-sizing: border-box;
                        background-color: #00d49b;
                        border-radius: 0.4rem;
                        border: 2px solid #000000b5;
                    }
    
                    .aa {
                        left: 126px;
                        background: #4a008b;
                        top: -129px;
                        font-size: 37px;
                    }
    
                    .upKey {
                        margin-left: 5px;
                        margin-top: 5px;
                        cursor: pointer;
                    }
    
                    .downKey {
                        top: 0;
                        right: 0;
                        margin-right: 5px;
                        margin-top: 5px;
                        cursor: pointer;
                    }
    
                    .leftKey {
                        bottom: 0;
                        margin-left: 5px;
                        margin-bottom: 5px;
                        cursor: pointer;
                    }
    
                    /* .rightkey {
                                                                            bottom: 0;
                                                            right: 0;
                                                            margin-right: 5px;
                                                            margin-bottom: 5px;
                                                            cursor: pointer;
                                                                        } */
                    .rightKey.focusKey {
                        bottom: 0;
                        right: 0;
                        margin-right: 5px;
                        margin-bottom: 5px;
                        cursor: pointer;
                    }
    
                    .okKey {
                        transform: translateY(-50%);
                        top: 51%;
                        right: -66%;
                        margin-right: 125px;
                        background: #ed030d;
                        /* border-radius: 20px; */
                        cursor: pointer;
                    }
    
                    .optionLocation1 {
                        left: 36px;
                    }
    
    
    
    
    
                    .infor {
                        line-height: 54px;
                        font-size: 39px;
                        top: 0;
                        min-width: 558px;
                        height: 242px;
                        /* background: red;#ff000057 */
                        background: #ff000057;
                        position: absolute;
                        padding: 23px;
                    }
    
                    .none {
                        display: none;
                    }
                </style>
                <style>
                    /* hiệu ứng gặp địch */
.doiDich {
    left: 76%;
    background: #ff375e;
    top: -2rem;
    font-size: 0.7rem;
    min-width: 2rem;
    height: 1.5rem;
    line-height: 1.5rem;
    position: absolute;
    text-align: center;
    box-sizing: border-box;
    border-radius: 20px;
    /* transform: translateX(-50%); */
    border: 0.1rem solid #000000b5;
    border-radius: 0.6rem;
}
.tancongDaDich {
   
    left: -4%;
    background: #4a008b;
    top: -2rem;
    font-size: 0.7rem;
    min-width: 4.5rem;
    height: 1.5rem;
    line-height: 1.5rem;
    position: absolute;
    text-align: center;
    box-sizing: border-box;
    border-radius: 20px;
    /* transform: translateX(-50%); */
    border: 0.1rem solid #000000b5;
    border-radius: 0.6rem;
    
}
.vaoMap {
    background: #4a008b !important;
    left: 50%;
    top: -2.4rem;
    font-size: 0.7rem;
    min-width: 2rem;
    height: 1.8rem;
    line-height: 1.8rem;
    position: absolute;
    text-align: center;
    box-sizing: border-box;
    transform: translateX(-50%);
    border: 0.1rem solid #000000b5;
    border-radius: 0.5rem;
}
.vaoMap2 {
    left: 126px;
    background: #4a008b !important;
    top: -223px;
    font-size: 37px;
}

.tancong1Dich {
   
    left: 50%;
    background: #4a008b;
    top: -2rem;
    font-size: 0.7rem;
    min-width: 6rem;
    height: 1.5rem;
    line-height: 1.5rem;
    position: absolute;
    text-align: center;
    box-sizing: border-box;
    border-radius: 20px;
    transform: translateX(-50%);
    border: 0.1rem solid #000000b5;
    border-radius: 0.6rem;

}
                </style>
                <div class="keyBoard">
                     <div class="tancongDaDich none">Tấn công (<span class="tancongDaDich_Number"></span>)</div>
                    <div class="doiDich none">Đổi</div>
                    <div class="focusKey vaoMap none">Vào</div> 
                    <div class="tancong1Dich none">Tấn công (<span class="tancong1Dich_Number"></span>)</div> 
                    
                    <div class="upKey focusKey">LÊN</div>
                    <div class="downKey  focusKey">XUỐNG</div>
                    <div class="leftKey focusKey">TRÁI</div>
                    <div class="rightKey focusKey">PHẢI</div>
                    <div class="okKey focusKey">OK</div>
                </div>


                <div class="blackLayout none"></div>
                <div class="infor_battle none">
                    <style>
                        .blackLayout {
                            z-index: 1;
                            width: 100%;
                            height: 100%;
                            background-color: #000000b5;
                            position: absolute;
                        }
                    
                        .timeEnemy {
                            right: 18%;
                        }
                    
                        .timeMe {
                            left: 18%;
                        }
                    
                        .timee {
                            min-width: 139px;
                            position: absolute;
                            background: red;
                            /* min-height: 78px; */
                            line-height: 78px;
                            font-size: 52px;
                            top: 1243px;
                            transform: translateX(-50%);
                            text-align: center;
                        }
                    
                        .boardPoint {
                            min-width: 6rem;
                            position: absolute;
                            background: red;
                            min-height: 6rem;
                            /* line-height: 70px; */
                            font-size: 0.8rem;
                            top: 19rem;
                            transform: translateX(-50%);
                            left: 50%;
                            /* padding: 0 30px 0 30px; */
                            z-index: 3;
                        }
                    
                        .turn {
                            line-height: 2rem;
                            height: 2rem;
                            min-width: 6rem;
                            /* bottom: 83px; */
                            top: 0rem;
                            left: 7rem;
                            font-size: .8rem;
                        }
                    
                        .option {
                            min-width: 150px;
                            height: 150px;
                            background: red;
                            position: absolute;
                            bottom: 60px;
                            font-size: 49px;
                            text-align: center;
                            line-height: 140px;
                        }
                    
                        .Skill {
                            line-height: 2rem;
                            height: 2rem;
                            min-width: 2rem;
                            /* bottom: 83px; */
                            top: 2rem;
                            left: -2rem;
                            font-size: .8rem;
                        }
                    
                        .timeMe {
                            line-height: 2rem;
                            height: 2rem;
                            min-width: 2rem;
                            left: 2rem;
                            top: 0rem;
                            /* display: none; */
                            font-size: 0.8rem;
                        }
                    
                        .timeEnemy {
                            line-height: 2rem;
                            height: 2rem;
                            min-width: 2rem;
                            right: 2rem;
                            top: 0rem;
                            /* display: none; */
                            font-size: 0.8rem;
                        }
                    
                        .outGame {
                            line-height: 2rem;
                            height: 2rem;
                            min-width: 2rem;
                            /* bottom: 83px; */
                            top: 2rem;
                            right: -2rem;
                            font-size: .8rem;
                        }
                    
                        .starEnemy {
                            line-height: 2rem;
                            height: 2rem;
                            min-width: 2rem;
                            right: 2rem;
                            top: 2rem;
                            /* display: none; */
                            font-size: 0.8rem;
                        }
                    
                        .starEnemy1 {
                            line-height: 66px;
                            height: 40px;
                            min-width: calc(40px * 9);
                            right: 7px;
                            /* display: none; */
                            top: 139px;
                            font-size: 43px;
                        }
                    
                        .starMe1 {
                            line-height: 66px;
                            height: 40px;
                            min-width: calc(40px * 9);
                            left: 7px;
                            /* display: none; */
                            top: 139px;
                            font-size: 43px;
                        }
                    
                        .starMe {
                            line-height: 2rem;
                            height: 2rem;
                            min-width: 2rem;
                            left: 2rem;
                            top: 2rem;
                            /* display: none; */
                            font-size: 0.8rem;
                        }
                    
                        #board {
                            width: 13.5rem;
                            height: 13.5rem;
                            background-color: red;
                            border: 2px solid slategray;
                            left: 50%;
                            top: 4rem;
                            transform: translateX(-50%);
                            position: absolute;
                        }
                    
                      
                    
                        .petMe {
                            line-height: 2rem;
                            height: 2rem;
                            min-width: 2rem;
                            left: 2rem;
                            bottom: 2rem;
                            font-size: 0.8rem;
                        }
                    
                        .petEnemy {
                            line-height: 2rem;
                            height: 2rem;
                            min-width: 2rem;
                            right: 2rem;
                            bottom: 2rem;
                            font-size: 0.8rem;
                        }
                    
                        .manaMe {
                            line-height: 2rem;
                            height: 2rem;
                            min-width: 2rem;
                            left: 0rem;
                            bottom: 6rem;
                            font-size: 0.8rem;
                        }
                    
                        .manaEnemy {
                            line-height: 2rem;
                            height: 2rem;
                            min-width: 2rem;
                            right: 0rem;
                            bottom: 6rem;
                            font-size: 0.8rem;
                        }
                    
                        .lvMe {
                            line-height: 2rem;
                            height: 2rem;
                            min-width: 2rem;
                            left: 0rem;
                            bottom: 0rem;
                            font-size: 0.8rem;
                        }
                    
                        .lvEnemy {
                            line-height: 2rem;
                            height: 2rem;
                            min-width: 2rem;
                            right: 0rem;
                            bottom: 0rem;
                            font-size: 0.8rem;
                        }
                    
                        .GiapMe {
                            line-height: 2rem;
                            height: 2rem;
                            min-width: 2rem;
                            left: 0rem;
                            bottom: 8rem;
                            font-size: 0.8rem;
                    
                        }
                    
                        .GiapEnemy {
                            line-height: 2rem;
                            height: 2rem;
                            min-width: 2rem;
                            right: 0rem;
                            bottom: 8rem;
                            font-size: 0.8rem;
                        }
                    
                        .hpEnemy {
                            line-height: 2rem;
                            height: 2rem;
                            min-width: 2rem;
                            right: 0rem;
                            bottom: 4rem;
                            font-size: 0.8rem;
                        }
                    
                        .hpMe {
                            line-height: 2rem;
                            height: 2rem;
                            min-width: 2rem;
                            left: 0rem;
                            bottom: 4rem;
                            font-size: 0.8rem;
                        }
                    
                        .focus {
                            border: 13px solid #14842f;
                            box-sizing: border-box;
                        }
                    
                        .outFocus {
                            border: 13px solid #eb0808;
                            box-sizing: border-box;
                        }
                    </style>
                    
                    <style>
                        .boxOut {
                    
                            min-width: 713px;
                            min-height: 447px;
                            top: 500px;
                            z-index: 3;
                            left: 50%;
                            transform: translateX(-50%);
                            /* box-sizing: content-box; */
                            border: 20px solid #f64e4ea8;
                            /* border: 20px solid black; */
                    
                        }
                    
                        .askOut {
                            position: absolute;
                            top: 60px;
                            font-size: 39px;
                            text-align: center;
                            line-height: 129px;
                            min-width: 500px;
                            min-height: 133px;
                            left: 50%;
                            text-align: center;
                            transform: translateX(-50%);
                            background: yellow;
                            padding: 0 30px 0 30px;
                            color: blue;
                        }
                    
                        .yesOut {
                            position: absolute;
                            top: 234px;
                            font-size: 39px;
                            text-align: center;
                            line-height: 129px;
                            min-width: 170px;
                            min-height: 133px;
                            left: 11%;
                            text-align: center;
                            /* transform: translateX(-50%); */
                            background: yellow;
                            padding: 0 30px 0 30px;
                            color: blue;
                        }
                    
                        .noOut {
                            position: absolute;
                            top: 234px;
                            font-size: 39px;
                            text-align: center;
                            line-height: 129px;
                            min-width: 170px;
                            min-height: 133px;
                            right: 11%;
                            text-align: center;
                            /* transform: translateX(-50%); */
                            background: yellow;
                            padding: 0 30px 0 30px;
                            color: blue;
                        }
                    </style>
                    <div class="option boxOut none">
                        <div class="askOut">Bạn Có Muốn Thoát Trận?</div>
                    
                        <div class="yesOut">
                            Có
                        </div>
                        <div class="noOut">
                            Không
                        </div>
                    </div>
                    <div class="option timeMe none"><span class="timeMe1"></span>s</div>
                    <div class="option timeEnemy none"><span class="timeEnemy1"></span>s</div>
                    <div class="option petMe ">PetMe</div>
                    <div class="option petEnemy  ">PetDemon</div>
            
                    <!-- <div class="meI">
                    
                       
                    
                        
                        <div class="informMe dame">dame: <span class="dameMe1">0</span></div>
                    </div> -->

                    <div class="boardPoint">
                        <div class="informMe hp">Máu + <span class="hpBoard1">0</span></div>
                        <div class="informMe mana">Mana + <span class="manaBoard1">0</span></div>
                        <div class="informMe giap">Giáp + <span class="giapBoard1">0</span></div>
                        <div class="informMe exp">Vàng: + <span class="expBoard1">0</span></div>
                    
                        <div class="informMe exp9">exp9 + <span class="exp9Board1">0</span></div>
                        <div class="informMe dame">dame - <span class="dameBoard1">0</span> Máu</div>
                    </div> 
                    
                        <div class="timee turn none">Còn <span class="turnNumber">0</span> lượt</div>
                    
                    
                    <!-- lưu -->
                    <!-- <div class="option starMe  ">99</div>
                    <div class="option starEnemy  ">0</div>
                    <div class="option starMe1  "></div>
                    <div class="option starEnemy1  "></div> -->
            
                    <!-- <div class="timee timeMe none"><span class="timeMe1"></span>s</div>
                    <div class="timee timeEnemy none"><span class="timeEnemy1"></span>s</div> -->
                    <div class="option hpMe  ">Hp: <span class="hpMe1">0</span>/<span class="hpMe2">0</span></div>
                    <div class="option hpEnemy ">Hp: <span class="hpEnemy1">0</span>/<span class="hpEnemy2">0</span></div>
            
                    <div class="option manaMe ">Mana: <span class="manaMe1">0</span>/<span class="manaMe2">0</span></div>
                    <div class="option manaEnemy ">Mana: <span class="manaEnemy1">0</span>/<span class="manaEnemy2">0</span></div>
                    
            
            
            
                    <!-- <div class="option lvMe ">LV 0 (81%)</div>
                    <div class="option lvEnemy ">LV 0 (81%)</div> -->
                    <div class="option starMe exp9"><span class="exp9Me1">0</span></div>
                    <div class="option starEnemy exp9"><span class="exp9Enemy1">0</span></div>

                    <div class="option lvMe exp">Vàng: <span class="expMe1">0</span></div>
                    <div class="option lvEnemy exp">Vàng: <span class="expEnemy1">0</span></div>



                    <div class="option GiapMe "><span class="giapMe1">0</span></div>
                    <div class="option GiapEnemy"><span class="giapEnemy1">0</span></div>
            
            
                    <div class="option Button  outGame">Đầu Hàng</div>
                    <div class="option Button  Skill">Tùy Chọn</div>
            
                    <!-- cho cờ -->
                    <style>
                        .absolute {
                            position: absolute;
                        }
                
                        #board img {
                            width: calc(13.5rem / 9);
                            height: calc(13.5rem / 9);
                            padding: 0px;
                            margin: 0px 
                        }
                
                        .focus {
                            border: 5px solid #14842f;
                            box-sizing: border-box;
                        }
                        .i3 {
                            z-index: 3;
                        }
                
                        .outFocus {
                            border: 5px solid #eb0808;
                            box-sizing: border-box;
                        }
                        .Blur {
                           
                            animation-name: tangHinh;
                            animation-duration: 0.500s;
                        }
                
                        @keyframes tangHinh {
                            0% {
                                opacity: 1;
                            }
                
                            100% {
                                opacity: 0;
                                /* display: none */
                            }
                        }
                
                    /* #board {
                            width: 450px;
                            top: 28px;
                            height: 450px;
                            background-color: lightblue;
                            border: 5px solid slategray;
                            border-radius: 10px;
                            margin: 0 auto;
                            display: flex;
                            flex-wrap: wrap;
                            position: relative; 
                        } */
                
                        .board2 {
                            width: 450px;
                            top: 0px;
                            left: 0px;
                            height: 450px;
                            position: absolute;
                        }
                
                    </style>
                    <div class="board " id="board"></div>
                    <style>
                        .meMe {
                            background: none;
                            width: 160px;
                            height: 260px;
                            bottom: 25px;
                            /* background-color: black; */
                        }
                    
                        .meMe_Anh {
                            width: 400px;
                            height: 400px;
                          
                            position: absolute;
                            top: -70px;
                            left: -120px;
                         
                        }
                    
                        .mePosition {
                            bottom: 64px;
                            left: 23px;
                            /* z-index: -1; */
                        }
                    
                        .enemyPosition {
                            bottom: 64px;
                            right: 23px;
                            /* z-index: -1; */
                        }
                    </style>
                    <div class="option  meMe mePosition none">
                        <div class="meMe_Anh meMe_Me"></div>
                    </div>
                    <div class="option  meMe enemyPosition none">
                        <div class="meMe_Anh meMe_Enemy"></div>
                    </div>
            
            
            
                </div>

                <style>
                    .keyBoard2 {
                        width: 26.6%;
                        height: 12.6%;
                        background-color: #10a17691;
                        position: absolute;
                        bottom: 1.85rem;
                        right: -1.79rem;
                        border-radius: 0.5rem;
                        transform: translateX(-50%);
                        border: 2px solid #000;
                    }
                
                
                    .focusKey2 {
                        width: 1.7rem;
                        height: 1.7rem;
                        position: absolute;
                        font-size: 8.5px;
                        line-height: 1.7rem;
                        text-align: center;
                        box-sizing: border-box;
                        background-color: #00d49b;
                        border-radius: 0.5rem;
                        border: 2px solid #000000b5;
                    }
                
                
                
                    .upKey2 {
                        margin-left: 3px;
                        margin-top: 3px;
                        cursor: pointer;
                    }
                
                    .downKey2 {
                        top: 0;
                        right: 0;
                        margin-right: 3px;
                        margin-top: 3px;
                        cursor: pointer;
                    }
                
                    .leftKey2 {
                        bottom: 0;
                        margin-left: 3px;
                        margin-bottom: 3px;
                        cursor: pointer;
                    }
                
                    /* .rightkey {
                                                                                        bottom: 0;
                                                                        right: 0;
                                                                        margin-right: 3px;
                                                                        margin-bottom: 3px;
                                                                        cursor: pointer;
                                                                                    } */
                    .rightKey2.focusKey2 {
                        bottom: 0;
                        right: 0;
                        margin-right: 3px;
                        margin-bottom: 3px;
                        cursor: pointer;
                    }
                
                    .okKey2 {
                        transform: translateY(-50%);
                        top: 52%;
                        right: -67%;
                        margin-right: 125px;
                        background: #ed030d;
                        /* border-radius: 20px; */
                        cursor: pointer;
                    }
                </style>
                <div class="keyBoard2">
                    <div class="upKey2 focusKey2">LÊN</div>
                    <div class="downKey2  focusKey2">XUỐNG</div>
                    <div class="leftKey2 focusKey2">TRÁI</div>
                    <div class="rightKey2 focusKey2">PHẢI</div>
                </div>
            </div>
           
            <!-- end: bàn phím -->
    
            <!-- mini map -->
            <style>
                .miniMap {
                    width: 39%;
                    height: 14%;
                    position: absolute;
                    right: 0px;
                    /* background: #0093ffa3; */
                    border: 1px solid #000;
                }
            
                .miniM {
                    position: absolute;
                    z-index: 2;
                }
                .miniExit {
                    position: absolute;
                }
                .khungMap {
                    width: 100%;
                    height: 100%;
                    position: absolute;
                   
                    /* background: #0093ffa3; */
                    z-index: 5;
                    border: 1px solid #000;
                    pointer-events: none;
                }
            </style>
            <div class="miniMap">
    
            </div>
             <!-- end: mini map  -->
        </div>
       
    </div>
</body>

<script>


const windowWidth = window.innerWidth;
    const windowHeight = window.innerHeight;
    document.querySelector(".wrap").style.width = windowWidth + 'px'
    document.querySelector(".wrap").style.height = windowHeight + 'px'
  
    // document.querySelector(".wrap").style.width = window.innerWidth + 'px'
    // document.querySelector(".wrap").style.height = window.innerHeight + 'px'
    document.documentElement.style.fontSize = Number(document.querySelector(".wrap").style.width.slice(0, -2)) / 15 + 'px'

    document.querySelector(".screen").style.width = 14.2 + 'rem'
    document.querySelector(".screen").style.height = 29.8 +'rem'
    document.querySelector(".body").style.width = 14.2 + 'rem'
    document.querySelector(".body").style.height = 29.8 +'rem'

    var element = document.querySelector(".keyBoard")
    element.style.pointerEvents = "auto";

    var element = document.querySelector(".keyBoard2")
    element.style.pointerEvents = "auto";
    var element = document.querySelector(".infor_battle")
    element.style.pointerEvents = "auto";
    document.querySelector(".haha").addEventListener("click", function() {
    fightMot()
    var zeroArray = [document.getElementById("0-*0"), document.getElementById("0-*1"), document.getElementById("0-*2"), document.getElementById("0-*3"), document.getElementById("0-*4"), document.getElementById("0-*5"), document.getElementById("0-*6"), document.getElementById("0-*7"), document.getElementById("0-*8")]
    
    for (var i = 0; i < zeroArray.length; i++) { cotArray[i].push(zeroArray[i]) }
    for (var i = 0; i < columns; i++) {
        for (var j = 0; j < rows; j++) {
            cotArray[i].push(board[j][i])
        }
    }
    readycrush()
})
if (1) {
    /// Các biến cho viên đặc biệt
    if ('biến cờ') {
        var melonNgang = 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/melonNgang.png?raw=true'
        var melonDoc = 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/melonDoc.png?raw=true'

        var heartNgang = 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/heartNgang.png?raw=true'
        var heartDoc = 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/heartDoc.png?raw=true'

        var waterNgang = 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/waterNgang.png?raw=true'
        var waterDoc = 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/waterDoc.png?raw=true'

        var yingyangNgang = 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/yinyangNgang.png?raw=true'
        var yingyangDoc = 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/yinyangDoc.png?raw=true'

        var swordNgang = 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/swordNgang.png?raw=true'
        var swordDoc = 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/swordDoc.png?raw=true'

        var starNgang = 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/starNgang.png?raw=true'
        var starDoc = 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/starDoc.png?raw=true'

        var fiveBlock = 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/bomb5.png?raw=true'
        var melon3x3 = 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/melon33.png?raw=true'
        var heart3x3 = 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/heart33.png?raw=true'
        var sword3x3 = 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/sword33.png?raw=true'
        var yingyang3x3 = 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/yinyang33.png?raw=true'
        var star3x3 = 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/star33.png?raw=true'
        var water3x3 = 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/water33.png?raw=true'

        var heart3x2 = 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/New%20folder/heart333.png?raw=true'
        var melon3x2 = 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/New%20folder/melon333.png?raw=true'
        var sword3x2 = 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/New%20folder/sword333.png?raw=true'
        var yingyang3x2 = 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/New%20folder/yinyang333.png?raw=true'
        var star3x2 = 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/New%20folder/star333.png?raw=true'
        var water3x2 = 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/New%20folder/water333.png?raw=true'


        // các biến cho các viên bình thường 
        var star = 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/star.png?raw=true'
        var yingyang = 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/yingyang.png?raw=true'
        var sword = 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/sword.png?raw=true'
        var water = 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/water.png?raw=true'
        var heart = 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/heart.png?raw=true'
        var melon = 'https://github.com/kun18911/gameBenhVienQuyDu/blob/main/asset/img/melon.png?raw=true'
        var blank = 'https://github.com/ImKennyYip/candy-crush/blob/master/images/blank.png?raw=true'

    }


    //     // ----------------

    // phần chuẩn bị game
    {
        // function inforBattle() {
        //     this.hpMe = function (hpMe, hpMeToida, manaMe, manaMeToida,
        //         giapMe, dameMe, exp9Me, expMe
        //     ) {
        //         // hpMe = 
        //         // hpMeToida = 

        //         document.querySelector(".hpMe1").innerHTML = hpMe
        //         document.querySelector(".hpMe2").innerHTML = hpMeToida

        //         // manaMe = 
        //         // manaMeToida = 
        //         document.querySelector(".manaMe1").innerHTML = manaMe
        //         document.querySelector(".manaMe2").innerHTML = manaMeToida

        //         // giapMe = 
        //         // dameMe = 
        //         // exp9Me = exp9 là nvat

        //         document.querySelector(".giapMe1").innerHTML = giapMe
        //         document.querySelector(".dameMe1").innerHTML = dameMe
        //         document.querySelector(".exp9Me1").innerHTML = exp9Me




        //         // expMe = exp là biến hình
        //         // expMeToida = 
        //         document.querySelector(".expMe1").innerHTML = expMe
        //         // document.querySelector(".expMe2").innerHTML = expMeToida




        //     }

        //     this.hpEnemy = function (hpEnemy, hpEnemyToida, manaEnemy, manaEnemyToida,
        //         giapEnemy, dameEnemy, exp9Enemy, expEnemy
        //     ) {
        //         // hpEnemy = 
        //         // hpEnemyToida = 
        //         document.querySelector(".hpEnemy1").innerHTML = hpEnemy
        //         document.querySelector(".hpEnemy2").innerHTML = hpEnemyToida

        //         // manaEnemy = 
        //         // manaEnemyToida = 
        //         document.querySelector(".manaEnemy1").innerHTML = manaEnemy
        //         document.querySelector(".manaEnemy2").innerHTML = manaEnemyToida

        //         // giapEnemy = 
        //         // dameEnemy = 
        //         // exp9Enemy = exp9 là nvat

        //         document.querySelector(".giapEnemy1").innerHTML = giapEnemy
        //         document.querySelector(".dameEnemy1").innerHTML = dameEnemy
        //         document.querySelector(".exp9Enemy1").innerHTML = exp9Enemy




        //         // expEnemy = exp là biến hình
        //         // expEnemyToida = 
        //         document.querySelector(".expEnemy1").innerHTML = expEnemy
        //         // document.querySelector(".expEnemy2").innerHTML = expEnemyToida




        //     }
        // }
        // var meChar = new inforBattle()
        // var enemyChar = new inforBattle()

        // var hpMeMax = 300
        // var hpEnemyMax = 300
        // meChar.hpMe(300, hpMeMax, 0, 300, 0, 0, 0, 0 )
        // enemyChar.hpEnemy(300, hpEnemyMax, 300, 300, 0, 0, 0, 0)
        // window.onload = function () {
        //     startGame();
        //     // clickFirst = false
        //     if (checkValid()) {
        //         setTimeout(function () { readycrush(); }, 1000)
        //     }

        // }
    }


    function randomCandy() {
        return chess[Math.floor(Math.random() * chess.length)]; //0 - 5.99
    }
    function startGame() {
        var board_table = document.getElementById("board");
        for (let r = 0; r < rows; r++) {
            let row = [];
            for (let c = 0; c < columns; c++) {
                // <img id="0-0" src="./images/Red.png">
                let tile = document.createElement("img");
                tile.src = randomCandy(); tile.style.opacity = "1" // thêm ảnh và độ mờ 1
                switch (tile.src) {
                    case yingyang: {
                        tile.className = "yingyang"
                        break;
                    }
                    case melon: {
                        tile.className = "melon"
                        break;
                    }
                    case star: {

                        tile.className = "star"
                        break;
                    }
                    case heart: {
                        tile.className = "heart"
                        break;
                    }
                    case water: {
                        tile.className = "water"

                        break;
                    }
                    case sword: {
                        tile.className = "sword"
                        break;
                    }
                }
                tile.classList.add("ch-Chess", "Xclass", "fc", "i3", "absolute")
                tile.addEventListener("click", click_Other); tile.addEventListener("click", click_Curr);
                tile.id = r.toString() + "-" + c.toString();

                board_table.append(tile);
                row.push(tile);
            }
            board.push(row);
        }
        {
            function createE(a, b) {
                let x = a

                x = document.createElement("img");

                board_table.append(x)

                x.style.top = (-nammuoi) + 'rem'
                x.classList.add("absolute")
                x.id = 0 + "-" + '*' + b;
                if (b == 0) {
                    x.style.left = '0rem'
                } else {
                    x.style.left = nammuoi * b + 'rem'
                }
            }
            var tile1, tile2, tile3, tile4, tile5, tile6, tile7, tile8, tile9
            var tileArray = [tile1, tile2, tile3, tile4, tile5, tile6, tile7, tile8, tile9]
            for (var i = 0; i < tileArray.length; i++) {
                createE(tileArray[i], i)
            }
            // cài vị trí
            for (var i = 0; i <= 8; i++) {
                for (var e = 0; e <= 8; e++) {
                    var b = nammuoi * i
                    var c = nammuoi * e
                    board[i][e].style.top = b + 'rem'
                    board[i][e].style.left = c + 'rem'
                }
            }
        }
    }

    // phần click cờ
    {
        var a_Focus, b_Focus
        function focuc(xu, x, y) {
            if (xu == 1) {
                // console.log(document.getElementById(x))
                document.getElementById(x).classList.replace(document.getElementById(x).classList[3], 'focus')
            }
            else if (xu == 2) {
                // 2, 0, y
                document.getElementById(y).classList.replace(document.getElementById(y).classList[3], 'outFocus')
            } else if (xu == 3) {
                document.getElementById(x).classList.replace(document.getElementById(x).classList[3], 'fc')
            } else if (xu == 4) {
                setTimeout(function () {
                    document.getElementById(y).classList.replace(document.getElementById(y).classList[3], 'fc')
                }, 300)
            }
        }
        function click_Curr() {
            if (click1 == true) {
                click1 = false; click2 = false // chặn ko cho 1 click  nữa
                currTile = this; a_Focus = currTile.id; focuc(1, a_Focus) // đem đi focus nè
            }
        }

        function click_Other() {
            if (click2 == false) {
                otherTile = this; b_Focus = otherTile.id; click2 = true // cho click về bình thường; 
                focuc(3, a_Focus); focuc(2, 0, b_Focus); focuc(4, 0, b_Focus) // tắt 1, mở 2 tắt 2
                dragEnd()
            }
        }
    }

    function dragEnd() {

        // if (currTile.src.includes(blank) || otherTile.src.includes(blank)) {
        //     return;
        // }
        let currCoords = currTile.id.split("-"); // id="0-0" -> ["0", "0"]
        let r = parseInt(currCoords[0]);
        let c = parseInt(currCoords[1]);

        let otherCoords = otherTile.id.split("-");
        let r2 = parseInt(otherCoords[0]);
        let c2 = parseInt(otherCoords[1]);

        let moveLeft = c2 == c - 1 && r == r2;
        let moveRight = c2 == c + 1 && r == r2;

        let moveUp = r2 == r - 1 && c == c2;
        let moveDown = r2 == r + 1 && c == c2;

        let isAdjacent = moveLeft || moveRight || moveUp || moveDown;

        if (isAdjacent) {
            function mi(x, y, z, zz) {
                setTimeout(function () {
                    let currImg = z; let otherImg = zz;
                    x.src = otherImg; y.src = currImg;
                    checkClass(); var go = true; 

                    // xóa 2 ô đặc biệt
                    function delete_2_Special() {
                        for (var i = 0; i < mangCoNgangDoc.length; i++) { // xóa cho ô Ngang/Dọc và Ngang/Dọc
                            if (x.classList[2] == mangCoNgangDoc[i]) {
                                for (var i = 0; i < mangCoNgangDoc.length; i++) {
                                    if (y.classList[2] == mangCoNgangDoc[i]) {
                                        setTimeout(function () { xoaNgangDoc() }, 300); return go = false
                                    }
                                }
                            }
                        } // xóa cho ô Ngang/Dọc và Ngang/Dọc 
                        // ---------------
                        var jj = 0, otherTT = 0; for (var i = 0; i < mangCoBoom3x3.length; i++) {
                            if (x.classList[2] == mangCoBoom3x3[i] || y.classList[2] == mangCoBoom3x3[i]) {
                                for (var j = 0; j < mangCoNgang.length; j++) { if (y.classList[2] == mangCoNgang[j] || x.classList[2] == mangCoNgang[j]) { jj++; otherTT = "Ngang" } }
                                if (jj == 0) { for (var j = 0; j < mangCoDoc.length; j++) { if (y.classList[2] == mangCoDoc[j] || x.classList[2] == mangCoDoc[j]) { jj++; otherTT = "Doc" } } }
                            }
                        } // xóa cho ô 3x3 và Ngang/Dọc
                        if (jj > 0) { setTimeout(function () { xoaNgang3x3(otherTT) }, 300); return go = false }


                        for (var i = 0; i < mangCoBoom3x3.length; i++) {
                            if (x.classList[2] == mangCoBoom3x3[i]) {
                                for (var i = 0; i < mangCoBoom3x3.length; i++) { if (y.classList[2] == mangCoBoom3x3[i]) { setTimeout(function () { xoa3x3vs3x3() }, 300); return go = false } }
                            }
                        } // xóa cho ô 3x3 và 3x3

                        // ---------------
                        if ((x.classList[2] == "fiveBlock" || y.classList[2] == "fiveBlock") && (x.classList[2] == "Xclass" || y.classList[2] == "Xclass")) {
                            if (x.classList[2] == 'fiveBlock') { setTimeout(function () { xoa5xThuong(y) }, 300); return go = false }
                            else { setTimeout(function () { xoa5xThuong(x) }, 300); return go = false }
                        } // xóa cho ô 5x và ô thường (Xclass)

                        if ((x.classList[2] == "fiveBlock") || (y.classList[2] == "fiveBlock")) {
                            for (var i = 0; i < mangCo.length; i++) {
                                if ((y.classList[2] == mangCo[i]) || (x.classList[2] == mangCo[i])) {
                                    if (x.classList[2] == "fiveBlock") { setTimeout(function () { xoa5xDacbiet(y) }, 300) }
                                    else { setTimeout(function () { xoa5xDacbiet(x) }, 300) }
                                    return go = false
                                }
                            }
                        }// xóa cho ô 5x và ô đặc biệt (3x3, ngang, dọc)

                        if (y.classList[2] == "fiveBlock" && x.classList[2] == "fiveBlock") {
                            setTimeout(function () { xoa5x5x(0) }, 300); return go = false
                        } // khi cả 2 đều là 5x
                    }
                    delete_2_Special()

                    //nếu ko có viên đặc biệt (go == true) thì đi tiếp. 
                    if (go == true) {
                        setTimeout(function () { 
                            clearInterval(timeTogether); 
                            document.querySelector(".timeMe").classList.add("doiMauTime")
                            readycrush()
                            // click1 = true
                         }, 300)
                    }
                    // if (checkValid()) {

                    // } else {
                    //     setTimeout(function () {

                    //         currTile.src = currImg;
                    //         otherTile.src = otherImg;

                    //     }, 100);

                    // }
                    // setTimeout(function() {

                    //     checkClass()
                    //     readycrush()
                    // }, 300)
                }, 100)
            }
            mi(currTile, otherTile, currTile.src, otherTile.src)
        } else { setTimeout(function () { click1 = true }, 200) }

    }

    // khâu này cho biết tọa độ của viên 3x và tọa độ các viên cần xóa
    var numbGo = 0
    function readycrush() {
        //check rows
        let listOfArraysA = []; //ngang
        let listOfArraysB = []; // dọc
        for (let r = 0; r < rows; r++) {
            let array = [];
            let candy1 = board[r][0];
            array.push(candy1);

            for (let c = 1; c < columns; c++) {
                if (candy1.classList[0] == board[r][c].classList[0]) {
                    array.push(board[r][c]);
                } else {
                    candy1 = board[r][c];
                    if (array.length >= 3) {
                        listOfArrays.push(array); listOfArraysA.push(array)
                    }
                    array = [];
                    array.push(candy1);
                }
                if (c == (columns - 1)) { if (array.length >= 3) { listOfArrays.push(array); listOfArraysA.push(array) } }
            }
        }
        //check columns
        for (let c = 0; c < columns; c++) {
            let candy1 = board[0][c];
            let array = [];
            array.push(candy1);
            for (let r = 1; r < rows; r++) {
                if (candy1.classList[0] == board[r][c].classList[0]) {
                    array.push(board[r][c]);
                } else {
                    candy1 = board[r][c];
                    if (array.length >= 3) { listOfArrays.push(array); listOfArraysB.push(array) }
                    array = [];
                    array.push(candy1);
                }
                if (r == (rows - 1)) { if (array.length >= 3) { listOfArrays.push(array); listOfArraysB.push(array) } }
            }
        }


        // lo cho 3x3 
        let listOfArraysAA = []
        let listOfArraysBB = []

        for (var i = 0; i < listOfArraysB.length; i++) {
            for (var d = 0; d < listOfArraysB[i].length; d++) {
                listOfArraysBB.push(listOfArraysB[i][d].id)
            }
        }

        for (var i = 0; i < listOfArraysA.length; i++) {
            for (var d = 0; d < listOfArraysA[i].length; d++) {
                listOfArraysAA.push(listOfArraysA[i][d].id)
            }
        }

        for (var i = 0; i < listOfArraysAA.length; i++) {
            for (var d = 0; d < listOfArraysBB.length; d++) {
                if (listOfArraysAA[i] == listOfArraysBB[d]) {
                    listOfArraysC.push(listOfArraysAA[i])
                }
            }
        }
        // ------------- 
        if (yyy > 0) {
            for (var i = 0; i < listOfArrays.length; i++) {
                if (listOfArrays[i].length >= 4) {numbGo++}
            }
        }
        // console.log(numbGo)
        crushCandy()
    }

    // khâu này sẽ thực hiện xóa
    function crushCandy() { 
        // --------------
        // khâu này tạo lấy tọa độ để chuẩn bị tạo hình viên đặc biệt
        var Mang_5_Chess_Ne = []
        var Mang_4_Chess_Ne = []
        var Mang_3_Chess_Ne = []
        for (var i = 0; i < listOfArrays.length; i++) {
            if (listOfArrays[i].length == 3) {for (var d = 0; d < listOfArrays[i].length; d++) { Mang_3_Chess_Ne.push(listOfArrays[i][d].id) }}
            if (listOfArrays[i].length == 4) {Mang_4_Chess_Ne.push(listOfArrays[i])}
            if (listOfArrays[i].length >= 5) {Mang_5_Chess_Ne.push(listOfArrays[i])}
        }


        // thực hiện tạo ô đặc biệt
        function create4x_and3x() {
            setTimeout(function () {

                for (var i = 0; i < Mang_5_Chess_Ne.length; i++) {
                    if (Mang_5_Chess_Ne[i].indexOf(otherTile) != -1 || Mang_5_Chess_Ne[i].indexOf(currTile) != -1) {

                        for (var d = 0; d < Mang_5_Chess_Ne[i].length; d++) {
                            if (Mang_5_Chess_Ne[i][d].id == otherTile.id || Mang_5_Chess_Ne[i][d].id == currTile.id) {
                                Mang_5_Chess_Ne[i][d].src = fiveBlock


                            }
                        }
                    } else {
                        var d = Math.floor(Math.random() * Mang_5_Chess_Ne[i].length)
                        Mang_5_Chess_Ne[i][d].src = fiveBlock
                    }

                }

                Mang_5_Chess_Ne = []
            }, 30)
            setTimeout(function () {
                for (var i = 0; i < Mang_4_Chess_Ne.length; i++) {
                    if (Mang_4_Chess_Ne[i].indexOf(otherTile) != -1 || Mang_4_Chess_Ne[i].indexOf(currTile) != -1) {

                        for (var d = 0; d < Mang_4_Chess_Ne[i].length; d++) {
                            if (Mang_4_Chess_Ne[i][d].id == otherTile.id || Mang_4_Chess_Ne[i][d].id == currTile.id) {

                                var k = Mang_4_Chess_Ne[i][1].id.split("-")
                                a = Number(k[0])
                                b = Number(k[1])
                                var k2 = Mang_4_Chess_Ne[i][2].id.split("-")
                                a2 = Number(k2[0])
                                b2 = Number(k2[1])
                                var k3 = Mang_4_Chess_Ne[i][3].id.split("-")
                                a3 = Number(k3[0])
                                b3 = Number(k3[1])
                                if (a == a2 && a2 == a3) {
                                    switch (Mang_4_Chess_Ne[i][d].classList[0]) {
                                        case 'sword': {
                                            Mang_4_Chess_Ne[i][d].src = swordDoc
                                            break;
                                        }
                                        case 'water': {
                                            Mang_4_Chess_Ne[i][d].src = waterDoc
                                            break;
                                        }
                                        case 'yingyang': {
                                            Mang_4_Chess_Ne[i][d].src = yingyangDoc
                                            break;
                                        }
                                        case 'star': {
                                            Mang_4_Chess_Ne[i][d].src = starDoc
                                            break;
                                        }
                                        case 'melon': {
                                            Mang_4_Chess_Ne[i][d].src = melonDoc
                                            break;
                                        }
                                        case 'heart': {
                                            Mang_4_Chess_Ne[i][d].src = heartDoc
                                            break;
                                        }
                                    }
                                } else {
                                    switch (Mang_4_Chess_Ne[i][d].classList[0]) {
                                        case 'sword': {
                                            Mang_4_Chess_Ne[i][d].src = swordNgang
                                            break;
                                        }
                                        case 'water': {
                                            Mang_4_Chess_Ne[i][d].src = waterNgang
                                            break;
                                        }
                                        case 'yingyang': {
                                            Mang_4_Chess_Ne[i][d].src = yingyangNgang
                                            break;
                                        }
                                        case 'star': {
                                            Mang_4_Chess_Ne[i][d].src = starNgang
                                            break;
                                        }
                                        case 'melon': {
                                            Mang_4_Chess_Ne[i][d].src = melonNgang
                                            break;
                                        }
                                        case 'heart': {
                                            Mang_4_Chess_Ne[i][d].src = heartNgang
                                            break;
                                        }
                                    }
                                }
                            }
                        }
                    } else {
                        var d = Math.floor(Math.random() * Mang_4_Chess_Ne[i].length)
                        var k = Mang_4_Chess_Ne[i][0].id.split("-")
                        a = Number(k[0])
                        b = Number(k[1])
                        var k2 = Mang_4_Chess_Ne[i][1].id.split("-")
                        a2 = Number(k2[0])
                        b2 = Number(k2[1])
                        var k3 = Mang_4_Chess_Ne[i][2].id.split("-")
                        a3 = Number(k3[0])
                        b3 = Number(k3[1])
                        if (a == a2 && a2 == a3) {
                            switch (Mang_4_Chess_Ne[i][d].classList[0]) {
                                case 'sword': {
                                    Mang_4_Chess_Ne[i][d].src = swordDoc
                                    break;
                                }
                                case 'water': {
                                    Mang_4_Chess_Ne[i][d].src = waterDoc
                                    break;
                                }
                                case 'yingyang': {
                                    Mang_4_Chess_Ne[i][d].src = yingyangDoc
                                    break;
                                }
                                case 'star': {
                                    Mang_4_Chess_Ne[i][d].src = starDoc
                                    break;
                                }
                                case 'melon': {
                                    Mang_4_Chess_Ne[i][d].src = melonDoc
                                    break;
                                }
                                case 'heart': {
                                    Mang_4_Chess_Ne[i][d].src = heartDoc
                                    break;
                                }
                            }
                        } else {
                            switch (Mang_4_Chess_Ne[i][d].classList[0]) {
                                case 'sword': {
                                    Mang_4_Chess_Ne[i][d].src = swordNgang
                                    break;
                                }
                                case 'water': {
                                    Mang_4_Chess_Ne[i][d].src = waterNgang
                                    break;
                                }
                                case 'yingyang': {
                                    Mang_4_Chess_Ne[i][d].src = yingyangNgang
                                    break;
                                }
                                case 'star': {
                                    Mang_4_Chess_Ne[i][d].src = starNgang
                                    break;
                                }
                                case 'melon': {
                                    Mang_4_Chess_Ne[i][d].src = melonNgang
                                    break;
                                }
                                case 'heart': {
                                    Mang_4_Chess_Ne[i][d].src = heartNgang
                                    break;
                                }
                            }
                        }

                    }

                }

                Mang_4_Chess_Ne = []
            }, 25)
            setTimeout(function () {

                for (var i = 0; i < listOfArraysC.length; i++) {
                    for (var d = 0; d < Mang_3_Chess_Ne.length; d++) {
                        if (listOfArraysC[i] == Mang_3_Chess_Ne[d]) {
                            switch (document.getElementById(Mang_3_Chess_Ne[d]).classList[0]) {
                                case 'sword': {
                                    document.getElementById(Mang_3_Chess_Ne[d]).src = sword3x3
                                    break;
                                }
                                case 'water': {
                                    document.getElementById(Mang_3_Chess_Ne[d]).src = water3x3
                                    break;
                                }
                                case 'yingyang': {
                                    document.getElementById(Mang_3_Chess_Ne[d]).src = yingyang3x3
                                    break;
                                }
                                case 'star': {
                                    document.getElementById(Mang_3_Chess_Ne[d]).src = star3x3
                                    break;
                                }
                                case 'melon': {
                                    document.getElementById(Mang_3_Chess_Ne[d]).src = melon3x3
                                    break;
                                }
                                case 'heart': {
                                    document.getElementById(Mang_3_Chess_Ne[d]).src = heart3x3
                                    break;
                                }
                            }
                        }
                    }
                }

                Mang_3_Chess_Ne = []
                listOfArraysC = []

            }, 20)
            setTimeout(function () {
                dayTh = 0
            }, 40)
        }
        // thực hiện tạo cờ special, xóa 2 click, cộng điểm nhân vật
        function mi(timee) {
            // 460 này là trừ hao crushCande (410)
            setTimeout(function () {
                create4x_and3x()
                setTimeout(function () {
                    otherTile = 0; currTile = 0 // cho 2 click về 0 
                    // lúc xóa cờ, cờ rơi xuống, sẽ tạo viên ngẫu nhiên not do click
                    if (yyy > 0) {checkClass(); allPoint(); boardPoint()}
                    listOfArrays = []; slide1()
                }, 200) // 200ms sau mới rơi cờ
            }, timee)
        }
        crushCande() // xóa cờ trong 410ms

        // -------------
        // kiểm tra xem có viên đặc biệt ko
        var u = 0
        for (var i = 0; i < listOfArrays.length; i++) {
            for (var d = 0; d < listOfArrays[i].length; d++) {
                for (var j = 0; j < mangCo.length; j++) {if (listOfArrays[i][d].classList[2] == mangCo[j]) { u++ }}
            }
        }

        if (u > 0) {// 450 này là trừ hao crushCande (410)
            setTimeout(function () {
                // khâu này nếu special cần nổ sẽ lọt vào
                for (var i = 0; i < listOfArrays.length; i++) {
                    for (var d = 0; d < listOfArrays[i].length; d++) {
                        for (var j = 0; j < mangCoNgang.length; j++) { if (listOfArrays[i][d].classList[2] == mangCoNgang[j]) boomNgang(listOfArrays[i][d]) }
                        for (var j = 0; j < mangCoDoc.length; j++) { if (listOfArrays[i][d].classList[2] == mangCoDoc[j]) boomDoc(listOfArrays[i][d]) }
                        for (var j = 0; j < mangCoBoom3x3.length; j++) { if (listOfArrays[i][d].classList[2] == mangCoBoom3x3[j]) boom3x3(listOfArrays[i][d]) }
                    }
                }
                setTimeout(function () {
                    if (specialArraymini.length > 0) {// nếu special nổ trúng special khác
                        dayTh = create4x_and3x
                        dayChuyen()
                    } else { mi(300) }
                }, 460)
            }, 450)
        } else { mi(460) }
    } // end Hàm crushCandy()

    // khâu này xóa cờ, mờ cờ
    function crushCande() {
        var n = 10
        var mimi = setInterval(function () {
            if (n > 0) {
                n--
                for (var i = 0; i < listOfArrays.length; i++) {
                    for (var d = 0; d < listOfArrays[i].length; d++) {
                        listOfArrays[i][d].style.opacity = Number(listOfArrays[i][d].style.opacity) - 0.1
                        if (Number(listOfArrays[i][d].style.opacity) < 0) {listOfArrays[i][d].style.opacity = 0}
                    }
                }
            } else { clearInterval(mimi) }
        }, 40)
        setTimeout(function () {
            for (var i = 0; i < listOfArrays.length; i++) {
                for (var d = 0; d < listOfArrays[i].length; d++) {
                    listOfArrays[i][d].src = blank
                    listOfArrays[i][d].style.opacity = '1'
                    // listOfArrays[i][d].classList.remove("z4")
                    // chặn bằng 1 vì nhiều khi nó xuống -1
                }
            }
        }, 410)
    } // end Hàm

    // ---------------
    var slideLoop; var timeX = 80; var zeroArray = []
    if ('mảng cột') {
        var cotMot = [], cotHai = [], cotBa = [], cotBon = [], cotNam = [], cotSau = [], cotBay = [], cotTam = [], cotChin = [], cotMuoi = [], cotMuoiMot = [], cotMuoiHai = [], cotMuoiBa = []
        var cotArray = [cotMot, cotHai, cotBa, cotBon, cotNam, cotSau, cotBay, cotTam, cotChin, cotMuoi, cotMuoiMot, cotMuoiHai, cotMuoiBa]
        // zeroArray = [document.getElementById("0-*0"), document.getElementById("0-*1"), document.getElementById("0-*2"), document.getElementById("0-*3"), document.getElementById("0-*4"), document.getElementById("0-*5"), document.getElementById("0-*6"), document.getElementById("0-*7"), document.getElementById("0-*8")]

        // for (var i = 0; i < zeroArray.length; i++) {cotArray[i].push(zeroArray[i])}
        // for (var i = 0; i < columns; i++) {
        //     for (var j = 0; j < rows; j++) {
        //         cotArray[i].push(board[j][i])
        //     }
        // }
    }
    function slide1() {
        function randomChess(b) {
            var x = Math.floor(Math.random() * mangCoBien.length)
            for (var i = 0; i < mangCoBien.length; i++) {
                if (x == i) { document.getElementById(b).src = mangCoBien[i] }
            }
        }
        var hihi = 0
        function haha(cot, id_Ne) {
            var mm = 0
            for (var i = cot.length - 1; i >= 0; i--) {
                if (cot[i].src == blank) {
                    mm++
                    randomChess(id_Ne)
                    var n = 0; var ii = i; var arrayTop = []
                    for (var j = 0; j < ii; j++) {
                        arrayTop.push(cot[j].style.top)
                    }
                    function goo() {
                        n++; //console.log('hehe', n)
                        for (var j = 0; j < ii; j++) {
                            cot[j].classList.replace(cot[j].classList[4], "i4")
                            cot[j].style.top = Number(cot[j].style.top.slice(0, -3)) + nammuoi / 5 + 'rem'
                        }
                        if (n < 5) { setTimeout(function () { goo() }, timeX) }
                        else {
                            for (var j = ii; j >= 0; j--) {
                                if (j > 0) { cot[j].src = cot[j - 1].src }
                                if (j == 0) { cot[0].src = '' }
                                cot[j].classList.replace(cot[j].classList[4], "i3")
                            }
                            for (var j = 0; j < ii; j++) {cot[j].style.top = arrayTop[j]}
                            haha(cot, id_Ne)
                        }
                    }
                    setTimeout(function () { goo() }, timeX); break;
                }
            }
            if (mm == 0) { hihi++ }
        }
        for (var i = 0; i < columns; i++) {
            haha(cotArray[i], "0-*" + i)
        }
        slideLoop = setInterval(function () {
            if (hihi == columns) {
                checkClass(); clearInterval(slideLoop)
                if (checkValid()) { readycrush() } //1. đủ cờ, kiểm tra xem crush ko
                else { //2. ko thì
                    if (slide5 == true) { xoa5x5x(1) } // kiểm tra có 5x5x ko
                    else if (test3x2() > 0) { bang3x2() } //kiểm tra có 3x2 ko
                    else { // ko thì:
                        // mới vô, rớt ngay ngắn, bật time
                        if (yyy == 0) {
                            yyy++; meTurn= true; timePlay = 10; timePlayy()
                        } else {turnFight()} // những lần bật time sau:



                        // if (tiPlay > 0) {
                        //     if (meTurn == true) {
                        //         boardPoint_Blur()
                        //         mePoint_Infor()

                        //         setTimeout(function () {

                        //             if (goPoint > 0) {
                        //                 document.querySelector(".turn").classList.remove('none')
                        //                 document.querySelector(".turnNumber").innerHTML = goPoint
                        //                 setTimeout(function () { document.querySelector(".turn").classList.add('none') }, 2000)
                        //                 goPoint--
                        //                 timePlay = 10; meTurn = true
                        //                 theyTurn = false
                        //                 click1 = true
                        //                 timePlayy()
                        //             } else {
                        //                 theyTurn = true
                        //                 meTurn = false
                        //                 timePlay = 10


                        //                 x = [8, 7, 6, 5]
                        //                 var y = Math.floor(Math.random() * x.length)
                        //                 timeEnemyPlay = x[y]
                        //                 timePlayy()
                        //             }
                        //         }, 1600)


                        //     } else {
                        //         boardPoint_Blur()
                        //         theyPoint_Infor()

                        //         setTimeout(function () {
                        //             if (goPoint > 0) {
                        //                 document.querySelector(".turn").classList.remove('none')
                        //                 document.querySelector(".turnNumber").innerHTML = goPoint
                        //                 setTimeout(function () { document.querySelector(".turn").classList.add('none') }, 2000)
                        //                 goPoint--
                        //                 timePlay = 10; meTurn = false
                        //                 theyTurn = true
                        //                 timePlayy()
                        //             } else {

                        //                 theyTurn = false
                        //                 meTurn = true
                        //                 timePlay = 10
                        //                 click1 = true
                        //                 timePlayy()
                        //             }


                        //         }, 1600)
                        //     }

                        // }
                        // yyy++
                        // heartMini = 0, starMini = 0,
                        //     melonMini = 0, yingyangMini = 0,
                        //     waterMini = 0, swordMini = 0

                        // if (tiPlay == 0) {
                        //     tiPlay++
                        //     meTurn = true
                        //     timePlay = 10
                        //     timePlayy()
                        // }
                    }
                }
            }
        }, 20)
    }
    // ---------------
    function checkValid() {
        //check rows
        for (let r = 0; r < rows; r++) {
            for (let c = 0; c < columns - 2; c++) {
                let candy1 = board[r][c]; let candy2 = board[r][c + 1]; let candy3 = board[r][c + 2];
                if (candy1.classList[0] == candy2.classList[0] && candy2.classList[0] == candy3.classList[0] && !candy1.src.includes(blank)) {
                    return true;
                }
            }
        }

        //check columns
        for (let c = 0; c < columns; c++) {
            for (let r = 0; r < rows - 2; r++) {
                let candy1 = board[r][c]; let candy2 = board[r + 1][c]; let candy3 = board[r + 2][c];
                if (candy1.classList[0] == candy2.classList[0] && candy2.classList[0] == candy3.classList[0] && !candy1.src.includes(blank)) {
                    return true;
                }
            }
        }
        return false;
    }



}
if (2) {
    // mỗi khi đổi cờ, class ko đổi. Nên nó dùng dổi class cờ
    function checkClass() {
        var allChess = document.querySelectorAll(".ch-Chess")
        for (var piece of allChess) {
            for (var i = 0; i < mangCoBien.length; i++) {
                if (piece.src == mangCoBien[i]) {
                    piece.classList.replace(piece.classList[0], mangCoString[i])
                    piece.classList.replace(piece.classList[2], "Xclass")
                }
            }
            for (var i = 0; i < mangCoBienSpecial.length; i++) {
                if (piece.src == mangCoBienSpecial[i]) {
                    piece.classList.replace(piece.classList[0], mangCoStringSpecial1[i])
                    piece.classList.replace(piece.classList[2], mangCoStringSpecial2[i])
                }

            }
        }
    }

    if ('part 1') {
        function xoaNgangDoc() {
            var k = otherTile.id.split("-"); a = Number(k[0]); b = Number(k[1])
            var k2 = currTile.id.split("-"); a2 = Number(k2[0]); b2 = Number(k2[1])
            // add 
                    // 34                     3(a)4
            // 4(a)3  4(a2)4  45     // 43   4(a2)4  45  
                    // 54                      54
            if (a == a2 && b != b2) { addHaha() }
            else if (a != a2 && b == b2) { addHaha2() }
            function mimi(xx, y, z, n) {
                if (xx) {k3 = board[a + y][b + z].id.split("-"); a3 = Number(k3[0]); b3 = Number(k3[1])
                    if (n == 0) { add_blur_3x22(board[a + y][b + z]) }
                    else if (n == 11) { if (b3 != b && b3 != b2) add_blur_3x22(board[a + y][b + z]) }
                    else if (n == 111) {if (a3 != a && a3 != a2) add_blur_3x22(board[a + y][b + z])}
                }
            }
            function addHaha() {
                // hàng dọc
                mimi(a + 1 <= 8, 1, 0, 0); mimi(a + 2 <= 8, 2, 0, 0); mimi(a + 3 <= 8, 3, 0, 0)
                mimi(a - 1 >= 0, -1, 0, 0); mimi(a - 2 >= 0, -2, 0, 0); mimi(a - 3 >= 0, -3, 0, 0)
                // hàng ngang
                mimi(b + 1 <= 8, 0, 1, 11); mimi(b + 2 <= 8, 0, 2, 11); mimi(b + 3 <= 8, 0, 3, 11)
                mimi(b - 1 >= 0, 0, -1, 11); mimi(b - 2 >= 0, 0, -2, 11); mimi(b - 3 >= 0, 0, -3, 11)
            }
            function addHaha2() {
                // hàng dọc
                mimi(a + 1 <= 8, 1, 0, 111); mimi(a + 2 <= 8, 2, 0, 111); mimi(a + 3 <= 8, 3, 0, 111)
                mimi(a - 1 >= 0, -1, 0, 111); mimi(a - 2 >= 0, -2, 0, 111); mimi(a - 3 >= 0, -3, 0, 111)
                // hàng ngang
                mimi(b + 1 <= 8, 0, 1, 0); mimi(b + 2 <= 8, 0, 2, 0); mimi(b + 3 <= 8, 0, 3, 0)
                mimi(b - 1 >= 0, 0, -1, 0); mimi(b - 2 >= 0, 0, -2, 0); mimi(b - 3 >= 0, 0, -3, 0)
            } //-----------------
            
            var k = otherTile.id.split("-"); a = Number(k[0]); b = Number(k[1]) // xóa
            function mi(xx, y, z) { if (xx) {blur_3x22(board[a + y][b + z], otherTile)}}
            mi(a + 1 <= 8, 1, 0); mi(a + 2 <= 8, 2, 0); mi(a + 3 <= 8, 3, 0)
            mi(a - 1 >= 0, -1, 0); mi(a - 2 >= 0, -2, 0); mi(a - 3 >= 0, -3, 0)
            mi(b + 1 <= 8, 0, 1); mi(b + 2 <= 8, 0, 2); mi(b + 3 <= 8, 0, 3)
            mi(b - 1 >= 0, 0, -1); mi(b - 2 >= 0, 0, -2); mi(b - 3 >= 0, 0, -3)
            crushDayChuyen(board[a][b])
            twoChessSpecial(200, 200, 460)
        }
        function xoaNgang3x3(otherT) {
            var k = otherTile.id.split("-"); a = Number(k[0]); b = Number(k[1])
            var k2 = currTile.id.split("-"); a2 = Number(k2[0]); b2 = Number(k2[1])
            // add 
                    // 34                     3(a)4
            // 4(a)3  4(a2)4  45     // 43   4(a2)4  45  
                    // 54                      54
            if (a == a2 && b != b2) {addHaha()} 
            else if (a != a2 && b == b2) {addHaha2()}

            function mimi(xx, y, z, n) {
                if (xx) {k3 = board[a + y][b + z].id.split("-"); a3 = Number(k3[0]); b3 = Number(k3[1])
                    if (n == 0) { add_blur_3x22(board[a + y][b + z]) }
                    else if (n == 11) { if (b3 != b && b3 != b2) add_blur_3x22(board[a + y][b + z]) }
                    else if (n == 111) {if (a3 != a && a3 != a2) add_blur_3x22(board[a + y][b + z])}
                }
            }
            function addHaha() {
                if (otherT == 'Ngang') {
                    mimi(a + 1 <= 8, 1, 0, 0);    mimi(a + 1 <= 8 && b + 2 <= 8, 1, 2, 0)
                    mimi(a - 1 >= 0, -1, 0, 0);   mimi(a - 1 >= 0 && b - 2 >= 0, -1, -2, 0)

                    mimi(b + 1 <= 8, 0, 1, 11);    mimi(a + 1 <= 8 && b - 2 >= 0, 1, -2, 0)
                    mimi(b - 1 >= 0, 0, -1, 11);   mimi(a - 1 >= 0 && b + 2 <= 8, -1, 2, 0)
                } else if (otherT == 'Doc') {
                    mimi(a + 1 <= 8, 1, 0, 0);    mimi(a + 2 <= 8 && b + 1 <= 8, 2, 1, 0)
                    mimi(a - 1 >= 0, -1, 0, 0);   mimi(a - 2 >= 0 && b - 1 >= 0, -2, -1, 0)

                    mimi(b + 1 <= 8, 0, 1, 11);    mimi(a + 2 <= 8 && b - 1 >= 0, 2, -1, 0)
                    mimi(b - 1 >= 0, 0, -1, 11);   mimi(a - 2 >= 0 && b + 1 <= 8, -2, 1, 0)
                }
            }
            function addHaha2() {
                if (otherT == 'Ngang') {
                    mimi(a + 1 <= 8, 1, 0, 111);    mimi(a + 1 <= 8 && b + 2 <= 8, 1, 2, 0)
                    mimi(a - 1 >= 0, -1, 0, 111);   mimi(a - 1 >= 0 && b - 2 >= 0, -1, -2, 0)

                    mimi(b + 1 <= 8, 0, 1, 0);    mimi(a + 1 <= 8 && b - 2 >= 0, 1, -2, 0)
                    mimi(b - 1 >= 0, 0, -1, 0);   mimi(a - 1 >= 0 && b + 2 <= 8, -1, 2, 0)
                } else if (otherT == 'Doc') {
                    mimi(a + 1 <= 8, 1, 0, 111);    mimi(a + 2 <= 8 && b + 1 <= 8, 2, 1, 0)
                    mimi(a - 1 >= 0, -1, 0, 111);   mimi(a - 2 >= 0 && b - 1 >= 0, -2, -1, 0)

                    mimi(b + 1 <= 8, 0, 1, 0);    mimi(a + 2 <= 8 && b - 1 >= 0, 2, -1, 0)
                    mimi(b - 1 >= 0, 0, -1, 0);   mimi(a - 2 >= 0 && b + 1 <= 8, -2, 1, 0)
                }
            }

            var k = otherTile.id.split("-"); a = Number(k[0]); b = Number(k[1])
            function mi(xx, y, z) {if (xx) {blur_3x22(board[a + y][b + z], otherTile)}}
            if (otherT == 'Ngang') {
                mi(a + 1 <= 8, 1, 0); mi(a - 1 >= 0, -1, 0); 
                mi(b + 1 <= 8, 0, 1); mi(b - 1 >= 0, 0, -1);
                create_3x2(board[a][b])
                mi(a + 1 <= 8 && b + 2 <= 8, 1, 2); mi(a - 1 >= 0 && b - 2 >= 0, -1, -2); 
                mi(a + 1 <= 8 && b - 2 >= 0, 1, -2); mi(a - 1 >= 0 && b + 2 <= 8, -1, 2);
            } else if (otherT == 'Doc') {
                mi(a + 1 <= 8, 1, 0); mi(a - 1 >= 0, 1, 0); 
                mi(b + 1 <= 8, 0, 1); mi(b - 1 >= 0, 0, -1);
                create_3x2(board[a][b])
                mi(a + 2 <= 8 && b + 1 <= 8, 2, 1); mi(a - 2 >= 0 && b - 1 >= 0, -2, -1); 
                mi(a + 2 <= 8 && b - 1 >= 0, 2, -1); mi(a - 2 >= 0 && b + 1 <= 8, -2, 1);
            }
            twoChessSpecial(200, 200, 460)
        }
        function twoChessSpecial(xx, yy, zz) {
            setTimeout(function () {
                otherTile = 0; currTile = 0
                if (specialArraymini.length > 0) {
                    setTimeout(function () { dayChuyen() }, xx) //200
                } else {
                    setTimeout(function () {
                        checkClass(); allPoint(); boardPoint(); slide1()
                    }, yy) //200
                }
            }, zz) //460
        } //  dùng để rớt cờ khi ghép đặc biệt

      
        function xoa3x3vs3x3() {
            var k = otherTile.id.split("-"); a = Number(k[0]); b = Number(k[1])
            var k2 = currTile.id.split("-"); a2 = Number(k2[0]); b2 = Number(k2[1])

            // add
            if (a == a2 && b != b2) {addHaha()} else if (a != a2 && b == b2) {addHaha2()}
            function mimi(xx, y, z, n) {
                if (xx) {k3 = board[a + y][b + z].id.split("-"); a3 = Number(k3[0]); b3 = Number(k3[1])
                    if (n == 0) { add_blur_3x22(board[a + y][b + z]) }
                    else if (n == 11) { if (b3 != b && b3 != b2) add_blur_3x22(board[a + y][b + z]) }
                    else if (n == 111) {if (a3 != a && a3 != a2) add_blur_3x22(board[a + y][b + z])}
                }
            }

            function addHaha() {
                mimi(a + 1 <= 8, 1, 0, 0);    mimi(a + 1 <= 8 && b + 2 <= 8, 1, 2, 0);   mimi(a + 1 <= 8 && b - 2 >= 0, 1, -2, 0);    mimi(a - 1 >= 0 && b + 2 <= 8, -1, 2, 0)
                mimi(a - 1 >= 0, -1, 0, 0);   mimi(a + 2 <= 8 && b + 1 <= 8, 2, 1, 0);   mimi(a + 2 <= 8 && b - 1 >= 0, 2, -1, 0);    mimi(a - 2 >= 0 && b + 1 <= 8, -2, 1, 0)   

                mimi(b + 1 <= 8, 0, 1, 11);    mimi(a - 1 >= 0 && b - 2 >= 0, -1, -2, 0); mimi(a + 2 <= 8 && b + 2 <= 8, 2, 2, 0);    mimi(a + 2 <= 8 && b - 2 >= 0, 2, -2, 0)
                mimi(b - 1 >= 0, 0, -1, 11);   mimi(a - 2 >= 0 && b - 1 >= 0, -2, -1, 0); mimi(a - 2 >= 0 && b - 2 >= 0, -2, -2, 0);    mimi(a - 2 >= 0 && b + 2 <= 8, -2, 2, 0)
            }
            function addHaha2() {
                mimi(a + 1 <= 8, 1, 0, 111);    mimi(a + 1 <= 8 && b + 2 <= 8, 1, 2, 0);   mimi(a + 1 <= 8 && b - 2 >= 0, 1, -2, 0);    mimi(a + 2 <= 8 && b + 2 <= 8, 2, 2, 0)
                mimi(a - 1 >= 0, -1, 0, 111);   mimi(a + 2 <= 8 && b + 1 <= 8, 2, 1, 0);   mimi(a + 2 <= 8 && b - 1 >= 0, 2, -1, 0);    mimi(a - 2 >= 0 && b - 2 >= 0, -2, -2, 0)   

                mimi(b + 1 <= 8, 0, 1, 0);    mimi(a - 1 >= 0 && b - 2 >= 0, -1, -2, 0); mimi(a - 1 >= 0 && b + 2 <= 8, -1, 2, 0);    mimi(a + 2 <= 8 && b - 2 >= 0, 2, -2, 0)
                mimi(b - 1 >= 0, 0, -1, 0);   mimi(a - 2 >= 0 && b - 1 >= 0, -2, -1, 0); mimi(a - 2 >= 0 && b + 1 <= 8, -2, 1, 0);    mimi(a - 2 >= 0 && b + 2 <= 8, -2, 2, 0)
            }

            var k = otherTile.id.split("-"); a = Number(k[0]); b = Number(k[1])
            function mi(xx, y, z) {if (xx) {blur_3x22(board[a + y][b + z], currTile)}}
            // sao ko là other?
            mi(a + 1 <= 8, 1, 0); mi(a - 1 >= 0, -1, 0); mi(b + 1 <= 8, 0, 1); mi(b - 1 >= 0, 0, -1);
            mi(a + 1 <= 8 && b + 2 <= 8, 1, 2); mi(a + 2 <= 8 && b + 1 <= 8, 2, 1); mi(a - 1 >= 0 && b - 2 >= 0, -1, -2); mi(a - 2 >= 0 && b - 1 >= 0, -2, -1);
            mi(a + 1 <= 8 && b - 2 >= 0, 1, -2); mi(a + 2 <= 8 && b - 1 >= 0, 2, -1); mi(a - 1 >= 0 && b + 2 <= 8, -1, 2); mi(a - 2 >= 0 && b + 1 <= 8, -2, 1);
            mi(a + 2 <= 8 && b + 2 <= 8, 2, 2); mi(a - 2 >= 0 && b - 2 >= 0, -2, -2); mi(a + 2 <= 8 && b - 2 >= 0, 2, -2); mi(a - 2 >= 0 && b + 2 <= 8, -2, 2);
            crushDayChuyen(otherTile)
            crushDayChuyen(currTile)
            twoChessSpecial(200, 200, 460)
        }

        function xoa5xThuong(otherT) {
            var k = otherT.id.split("-"); a = Number(k[0]); b = Number(k[1])
            crushDayChuyen(otherTile); crushDayChuyen(currTile)

            var x = document.querySelectorAll("." + otherT.classList[0])

            var array_Khac_Xclass = []
            for (var y of x) {if (y.classList[2] != 'Xclass') array_Khac_Xclass.push(y)}
            function aa(xx, y, z) {if (xx) {add_blur_3x22(board[a + y][b + z])}} // add
            function bb(xx, y, z) {if (xx) {blur_3x22(board[a + y][b + z], otherT)}} // xóa
            function bi(y) {
                var n = 0
                for (var i = 0; i < mangCoNgang.length; i++) {
                    if (y.classList[2] == mangCoNgang[i]) {
                        n++
                        var k = y.id.split("-"); a = Number(k[0]); b = Number(k[1])
                        aa(b + 1 <= 8, 0, 1); aa(b - 1 >= 0, 0, -1); aa(b + 2 <= 8, 0, 2); aa(b - 2 >= 0, 0, -2);
                        bb(b + 1 <= 8, 0, 1); bb(b - 1 >= 0, 0, -1); bb(b + 2 <= 8, 0, 2); bb(b - 2 >= 0, 0, -2);
                        blur_3x22N(board[a][b])
                    }
                }
                if (n == 0) {
                    for (var i = 0; i < mangCoDoc.length; i++) {
                        if (y.classList[2] == mangCoDoc[i]) {
                            n++
                            var k = y.id.split("-"); a = Number(k[0]); b = Number(k[1])
                            aa(a + 1 <= 8, 1, 0); aa(a - 1 >= 0, -1, 0); aa(a + 2 <= 8, 2, 0); aa(a - 2 >= 0, -2, 0);
                            bb(a + 1 <= 8, 1, 0); bb(a - 1 >= 0, -1, 0); bb(a + 2 <= 8, 2, 0); bb(a - 2 >= 0, -2, 0);
                            blur_3x22N(board[a][b])
                        }
                    }
                } 
                if (n == 0) {

                    for (var i = 0; i < mangCoBoom3x3.length; i++) {
                        if (y.classList[2] == mangCoBoom3x3[i]) {
                            var k = y.id.split("-"); a = Number(k[0]); b = Number(k[1])
                            aa(a + 1 <= 8, 1, 0); aa(a - 1 >= 0, -1, 0); aa(ab + 1 <= 8, 0, 1); aa(b - 1 >= 0, 0, -1);
                            bb(a + 1 <= 8, 1, 0); bb(a - 1 >= 0, -1, 0); bb(b + 1 <= 8, 0, 1); bb(b - 1 >= 0, 0, -1);
                            blur_3x22N(board[a][b])
                        }
                    }
                }
            }
            for (var yy of x) {
                if (yy.classList[2] == 'Xclass') {crushDayChuyen(yy)}
                bi(yy)
            }

            if (specialArraymini.length > 0) {
                var result = []
                if (array_Khac_Xclass.length > 0) {
                    const array_Khac_XclassCount = {};
                    // Đếm số lượng mỗi phần tử trong mảng y
                    array_Khac_Xclass.forEach(element => {
                        if (array_Khac_XclassCount[element]) {
                            array_Khac_XclassCount[element]++;
                        } else {
                            array_Khac_XclassCount[element] = 1;
                        }
                    });
                    result = [];
                    specialArraymini.forEach(element => {
                        // Kiểm tra số lượng phần tử trong yCount
                        if (array_Khac_XclassCount[element] > 0) {
                            // Giảm số lượng phần tử trong array_Khac_XclassCount
                            array_Khac_XclassCount[element]--;
                        } else {
                            // Thêm phần tử vào mảng kết quả nếu nó không có trong yCount
                            result.push(element);
                        }
                    });
                }
                specialArraymini = []
                specialArraymini = result
                console.log(specialArraymini);
            }
            twoChessSpecial(200, 200, 460)
        }

        function xoa5xDacbiet(otherT) {
            var k = otherT.id.split("-"); a = Number(k[0]); b = Number(k[1])
            crushDayChuyen(otherTile); crushDayChuyen(currTile)
            var array_Xclass = []; var array_Khac_Xclass = []
             var x = document.querySelectorAll("." + otherT.classList[0]); var b = Array.from(x)
            b.splice(b.indexOf(document.getElementById(otherT.id)), 1)
            for (var y of b) {
                if (y.classList[2] == 'Xclass') {array_Xclass.push(y)} 
                else {array_Khac_Xclass.push(y)}
            }
            
            // Biến hình
            var nn = 0
            for (var i = 0; i < mangCoNgangDoc.length; i++) {
                if (otherT.classList[2] == mangCoNgangDoc[i]) {
                    nn++
                    for (var y of array_Xclass) {
                        for (var j = 0; j < mangCoNgang.length; j++) {
                            if (otherT.classList[2] == mangCoNgang[j]) {
                                var x = Math.floor(Math.random() * 2) + 1
                                if (x == 1) {
                                    y.src = mangCoNgangBien[j]
                                } else { y.src = mangCoDocBien[j] }
                            }
                        }

                        for (var j = 0; j < mangCoDoc.length; j++) {
                            if (otherT.classList[2] == mangCoDoc[j]) {
                                var x = Math.floor(Math.random() * 2) + 1
                                if (x == 1) {
                                    y.src = mangCoDocBien[j]
                                } else { y.src = mangCoNgangBien[j] }
                            }
                        }
                    }
                }
            }
            if (nn = 0) {
                for (var i = 0; i < mangCoBoom3x3.length; i++) {
                    if (otherT.classList[2] == mangCoBoom3x3[i]) {
                        for (var y of array_Xclass) {
                            y.src = mangCoBoom3x3Bien[i] }
                        }
                }
            }
            checkClass()
            function aa(xx, y, z) {if (xx) {add_blur_3x22(board[a + y][b + z])}} // add
            function bb(xx, y, z) {if (xx) {blur_3x22(board[a + y][b + z], otherT)}} // xóa
            function bi(y) {
                var n = 0
                for (var i = 0; i < mangCoNgang.length; i++) {
                    if (y.classList[2] == mangCoNgang[i]) {
                        n++
                        var k = y.id.split("-"); a = Number(k[0]); b = Number(k[1])
                        aa(b + 1 <= 8, 0, 1); aa(b - 1 >= 0, 0, -1); aa(b + 2 <= 8, 0, 2); aa(b - 2 >= 0, 0, -2);
                        bb(b + 1 <= 8, 0, 1); bb(b - 1 >= 0, 0, -1); bb(b + 2 <= 8, 0, 2); bb(b - 2 >= 0, 0, -2);
                        blur_3x22N(board[a][b])
                    }
                }
                if (n == 0) {
                    for (var i = 0; i < mangCoDoc.length; i++) {
                        if (y.classList[2] == mangCoDoc[i]) {
                            n++
                            var k = y.id.split("-"); a = Number(k[0]); b = Number(k[1])
                            aa(a + 1 <= 8, 1, 0); aa(a - 1 >= 0, -1, 0); aa(a + 2 <= 8, 2, 0); aa(a - 2 >= 0, -2, 0);
                            bb(a + 1 <= 8, 1, 0); bb(a - 1 >= 0, -1, 0); bb(a + 2 <= 8, 2, 0); bb(a - 2 >= 0, -2, 0);
                            blur_3x22N(board[a][b])
                        }
                    }
                } 
                if (n == 0) {

                    for (var i = 0; i < mangCoBoom3x3.length; i++) {
                        if (y.classList[2] == mangCoBoom3x3[i]) {
                            var k = y.id.split("-"); a = Number(k[0]); b = Number(k[1])
                            aa(a + 1 <= 8, 1, 0); aa(a - 1 >= 0, -1, 0); aa(ab + 1 <= 8, 0, 1); aa(b - 1 >= 0, 0, -1);
                            bb(a + 1 <= 8, 1, 0); bb(a - 1 >= 0, -1, 0); bb(b + 1 <= 8, 0, 1); bb(b - 1 >= 0, 0, -1);
                            blur_3x22N(board[a][b])
                        }
                    }
                }
            }
            if (array_Xclass.length > 0) {for (var yy of array_Xclass) {bi(yy)}}
            if (array_Khac_Xclass.length > 0) {for (var yy of array_Khac_Xclass) {bi(yy)}}
            if (specialArraymini.length > 0) {
                var result = [], result2 = []
                if (array_Xclass.length > 0) {
                    const array_XclassCount = {};
                    // Đếm số lượng mỗi phần tử trong mảng y
                    array_Xclass.forEach(element => {
                        if (array_XclassCount[element]) {
                            array_XclassCount[element]++;
                        } else {
                            array_XclassCount[element] = 1;
                        }
                    });
                    result = [];
                    specialArraymini.forEach(element => {
                        // Kiểm tra số lượng phần tử trong yCount
                        if (array_XclassCount[element] > 0) {
                            // Giảm số lượng phần tử trong array_XclassCount
                            array_XclassCount[element]--;
                        } else {
                            // Thêm phần tử vào mảng kết quả nếu nó không có trong yCount
                            result.push(element);
                        }
                    });
                }
                if (array_Khac_Xclass.length > 0) {
                    const array_Khac_XclassCount = {};
                    // Đếm số lượng mỗi phần tử trong mảng y
                    array_Khac_Xclass.forEach(element => {
                        if (array_Khac_XclassCount[element]) {
                            array_Khac_XclassCount[element]++;
                        } else {
                            array_Khac_XclassCount[element] = 1;
                        }
                    });
                    result.forEach(element => {
                        // Kiểm tra số lượng phần tử trong yCount
                        if (array_Khac_XclassCount[element] > 0) {
                            // Giảm số lượng phần tử trong array_Khac_XclassCount
                            array_Khac_XclassCount[element]--;
                        } else {
                            // Thêm phần tử vào mảng kết quả nếu nó không có trong yCount
                            result2.push(element);
                        }
                    });
                }
                specialArraymini = []
                specialArraymini = result2
                console.log(specialArraymini);
            }


            twoChessSpecial(200, 200, 460)
        }


        function xoa5x5x(a) {
            if (a == 0) {
                crushDayChuyen(otherTile); crushDayChuyen(currTile); otherTile = 0; currTile = 0
                setTimeout(function () {slide5 = true; slide1()}, 450)}
            if (a > 0) {slide5 = false
                var x = [board[0][0],board[0][8],board[8][8],board[8][0],board[0][4],board[4][8],board[4][0],board[8][4],board[1][1],board[1][7],board[7][1],board[7][7],board[2][3],board[3][2],board[2][5],board[3][6],board[5][2],board[6][3],board[6][5],board[5][6],board[3][4],board[4][3],board[5][4],board[4][5],board[4][4]]
                for (var y of x) {add_blur_3x22(y)}; for (var y of x) {blur_3x22N(y)}
                twoChessSpecial(450, 450, 5)}
        }
        var boom3x2Array = []
        function test3x2() {
            var x = document.querySelectorAll(".ch-Chess")
            for (var piece of x) {
                for (var i = 0; i < mangCoBien3.length; i++) {if (piece.classList[2] == mangCoBien3[i]) {boom3x2Array.push(piece)}}
            }; return boom3x2Array.length
        }
        function bang3x2() {
                for (var i = 0; i < boom3x2Array.length; i++) {
                    var k = boom3x2Array[i].id.split("-"); a = Number(k[0]); b = Number(k[1])// add
                    function mi(xx, y, z) {if (xx) {add_blur_3x22(board[a + y][b + z])}}
                    mi(a - 1 >= 0 && b - 1 >= 0, -1, -1); mi(a - 1 >= 0 && b + 1 <= 8, -1, 1); mi(a + 1 <= 8 && b + 1 <= 8, 1,  1); mi(a + 1 <= 8 && b - 1 >= 0, 1, -1);
                    crushDayChuyen(board[a][b])
                    function mimi(xx, y, z) {if (xx) {blur_3x22(board[a + y][b + z], document.getElementById(board[a][b]))}}
                    mimi(a + 1 <= 8 && b + 1 <= 8, 1, 1); mimi(a - 1 >= 0 && b - 1 >= 0, -1, -1); mimi(a + 1 <= 8 && b - 1 >= 0, 1, -1); mimi(a - 1 >= 0 && b + 1 <= 8, -1, +1)
                }
                boom3x2Array = []; twoChessSpecial(200, 200, 460)
        }
        // --------------------

        // thực hiện tạo hàm cho viên 3x2
        function create_3x2(x) { // ? sao blank ta
            for (var i = 0; i < mangCoString.length; i++) {
                if (x.classList[0] == mangCoString[i]) {x.src = mangCoBien2[i]}}
        }
        function blur_3x22(x, othersTile) {
            for (var j = 0; j < mangCoBien2.length; j++) {
                if (x.src != mangCoBien2[j] && x.src != blank) {
                    var n = 10 // test khác 3x2 và blank
                    var mimi = setInterval(function () {
                        if (n >= 0) {
                            n--
                            x.style.opacity = Number(x.style.opacity) - 0.1
                            if (Number(x.style.opacity) < 0) {x.style.opacity = 0}
                        } else { clearInterval(mimi) }
                    }, 40)
                    setTimeout(function () { x.src = blank; x.style.opacity = '1' }, 410)
                }
            }
            if (x.classList[2] == 'fiveBlock') {
                var xx = document.querySelectorAll("." + othersTile.classList[0])
                for (var y of xx) {
                    if (y.src != blank && y.classList[2] != 'sword3x2' && y.classList[2] != 'yingyang3x2' && y.classList[2] != 'melon3x2' && y.classList[2] != 'heart3x2' && y.classList[2] != 'water3x2' && y.classList[2] != 'star3x2') {
                        specialArraymini.push(y)
                    }
                }
            }
        }
        function blur_3x22N(x) {
            for (var j = 0; j < mangCoBien2.length; j++) {
                if (x.src != mangCoBien2[j] && x.src != blank && x.classList[2] != 'fiveBlock') {
                    var n = 10 // test khác 3x2 và 5x và blank
                    var mimi = setInterval(function () {
                        if (n >= 0) {
                            n--
                            x.style.opacity = Number(x.style.opacity) - 0.1
                            if (Number(x.style.opacity) < 0) {x.style.opacity = 0}
                        } else { clearInterval(mimi) }
                    }, 40)
                    setTimeout(function () { x.src = blank; x.style.opacity = '1' }, 410)
                }
            }
        }
        function add_blur_3x22(x) {
            for (var i = 0; i < mangCo.length; i++) {
                if (x.classList[2] == mangCo[i]) { if (x.src != blank) specialArraymini.push(x) }
            }
        }
        // -------------------
        function boom3x3(othersTile) {
            var k = othersTile.id.split("-"); a = Number(k[0]); b = Number(k[1])
            function mimi(xx, y, z) {if (xx) {add_blur_3x22(board[a + y][b + z])}} // add
            mimi(a + 1 <= 8, 1, 0); mimi(a - 1 >= 0, -1, 0); mimi(b + 1 <= 8, 0, 1); mimi(b - 1 >= 0, 0, -1); 
                // 34
            // 43  44  45  [a.b]    a là nói về rows ??
                // 54
            function mi(xx, y, z) {if (xx) {blur_3x22(board[a + y][b + z], othersTile)}}
            mi(a + 1 <= rows - 1, 1, 0); mi(a - 1 >= rows - rows, -1, 0); mi(b + 1 <= columns - 1, 0, 1); mi(b - 1 >= columns - columns, 0, -1); 
            create_3x2(board[a][b])
            checkClass()
        } // a là rows (Dọc)
        function boomDoc(othersTile) {
            var k = othersTile.id.split("-"); a = Number(k[0]); b = Number(k[1])// add
            var d = a
            function mi(x) {
                k = board[x][b].id.split("-"); a = Number(k[0])
                if (a != d) { add_blur_3x22(board[x][b]) }
            }
            for (var i = 0; i < rows; i++) { mi(i) }

            var k = othersTile.id.split("-"); a = Number(k[0]); b = Number(k[1]) // xóa
            function mi2(x) { blur_3x22(board[x][b], othersTile) }
            for (var i = 0; i < rows; i++) { mi2(i) }
        }

        function boomNgang(othersTile) {
            var k = othersTile.id.split("-"); a = Number(k[0]); b = Number(k[1]) // add
            var d = b
            function mi(x) {
                k = board[a][x].id.split("-"); b = Number(k[1])
                if (b != d) { add_blur_3x22(board[a][x]) }
            }
            for (var i = 0; i < columns; i++) { mi(i) }

            var k = othersTile.id.split("-"); a = Number(k[0]); b = Number(k[1])
            function mi2(x) { blur_3x22(board[a][x], othersTile) } // xóa
            for (var i = 0; i < columns; i++) { mi2(i) }
        }
        // --------------------
        function crushDayChuyen(a) {
            var n = 10
            var mimi = setInterval(function () {
                if (n > 0) {
                    n--
                    a.style.opacity = Number(a.style.opacity) - 0.1
                    if (Number(a.style.opacity) < 0) {a.style.opacity = 0}
                } else { clearInterval(mimi) }
            }, 40)
            setTimeout(function () { a.src = blank; a.style.opacity = '1' }, 410)
        }
        function dayChuyen() {
            var day = 0
            // nếu special nổ trúng special 2 sẽ ra mini
            for (var i = 0; i < specialArraymini.length; i++) {
                for (var j = 0; j < mangCoNgang.length; j++) { if (specialArraymini[i].classList[2] == mangCoNgang[j]) day++; boomNgangH(specialArraymini[i]) }
                for (var j = 0; j < mangCoDoc.length; j++) { if (specialArraymini[i].classList[2] == mangCoDoc[j]) day++; boomDocH(specialArraymini[i]) }
                for (var j = 0; j < mangCoBoom3x3.length; j++) { if (specialArraymini[i].classList[2] == mangCoBoom3x3[j]) day++; boom3x3H(specialArraymini[i]) }
                if (specialArraymini[i].classList[2] == 'Xclass') { crushDayChuyen(specialArraymini[i]) }
            }
            if (day == 0) { mimi(300, 650) }
            else if (day != 0) {
                setTimeout(function () { //450 là bù trừ cho lúc nó đang xóa (410ms)
                    //test có trúng 3x2 và blank ko. 
                    //specialArraymini = [board[3][6], board[3][7], board[3][8]]
                    for (var i = 0; i < specialArraymini.length; i++) {
                        var n = 0
                        for (var j = 0; j < mangCoBien2.length; j++) {
                            if (n == 0 && specialArraymini.length > 0) {
                            if ((specialArraymini[i].src == mangCoBien2[j] || specialArraymini[i].src == blank) && n == 0)
                                {n++
                                specialArraymini.splice(specialArraymini.indexOf(specialArraymini[i]), 1)
                            }}
                        }
                    }
                    specialArraymini = specialArraymini.concat(specialArraymini2)
                    var b = [... new Set(specialArraymini)]
                    specialArraymini2 = []; specialArraymini = b
                    setTimeout(function () {
                        if (specialArraymini.length > 0) { dayChuyen() }
                        else { mimi(300, 0, slide5 = false) }
                    }, 200)
                }, 450)
            }
            // ---------- hàm dùng lại
            function mimi(xx, yy, zz) {
                setTimeout(function () {
                    specialArraymini = []
                    if (dayTh != 0) { dayTh() }
                    setTimeout(function () {
                        otherTile = 0; currTile = 0; zz
                        checkClass(); allPoint(); boardPoint()
                        listOfArrays = []; slide1()
                    }, xx)
                }, yy)
            }
        }
    }
    if ('part 2') {
        function blur_3x22H(x, othersTile) {
            for (var j = 0; j < mangCoBien2.length; j++) {
                if (x.src != mangCoBien2[j] && x.src != blank) {
                    var n = 10 // test khác 3x2 và blank
                    var mimi = setInterval(function () {
                        if (n >= 0) {
                            n--
                            x.style.opacity = Number(x.style.opacity) - 0.1
                            if (Number(x.style.opacity) < 0) {x.style.opacity = 0}
                        } else { clearInterval(mimi) }
                    }, 40)
                    setTimeout(function () { x.src = blank; x.style.opacity = '1' }, 410)
                }
            }
            if (x.classList[2] == 'fiveBlock') {
                var xx = document.querySelectorAll("." + othersTile.classList[0])
                for (var y of xx) {
                    if (y.src != blank && y.classList[2] != 'sword3x2' && y.classList[2] != 'yingyang3x2' && y.classList[2] != 'melon3x2' && y.classList[2] != 'heart3x2' && y.classList[2] != 'water3x2' && y.classList[2] != 'star3x2') {
                        specialArraymini2.push(y)
                    }
                }
            }
        }
        function add_blur_3x22H(x) {
            for (var i = 0; i < mangCo.length; i++) {
                if (x.classList[2] == mangCo[i]) { if (x.src != blank) specialArraymini2.push(x) }
            }
        }
        function boom3x3H(othersTile) {
            var k = othersTile.id.split("-"); a = Number(k[0]); b = Number(k[1])
            function mimi(xx, y, z) {if (xx) {add_blur_3x22H(board[a + y][b + z])}} // add
            mimi(a + 1 <= 8, 1, 0); mimi(a - 1 >= 0, -1, 0); mimi(b + 1 <= 8, 0, 1); mimi(b - 1 >= 0, 0, -1); 
    
            function mi(xx, y, z) {if (xx) {blur_3x22H(board[a + y][b + z], othersTile)}}
            mi(a + 1 <= rows - 1, 1, 0); mi(a - 1 >= rows - rows, -1, 0); mi(b + 1 <= columns - 1, 0, 1); mi(b - 1 >= columns - columns, 0, -1); 
            create_3x2(board[a][b])
            checkClass()
        }
        function boomDocH(othersTile) {
            var k = othersTile.id.split("-"); a = Number(k[0]); b = Number(k[1])// add
            var d = a
            function mi(x) {
                k = board[x][b].id.split("-"); a = Number(k[0])
                if (a != d) { add_blur_3x22H(board[x][b]) }
            }
            for (var i = 0; i < rows; i++) { mi(i) }
            var k = othersTile.id.split("-"); a = Number(k[0]); b = Number(k[1]) // xóa
            function mi2(x) { blur_3x22H(board[x][b], othersTile) }
            for (var i = 0; i < rows; i++) { mi2(i) }
        }
        function boomNgangH(othersTile) {
            var k = othersTile.id.split("-"); a = Number(k[0]); b = Number(k[1]) // add
            var d = b
            function mi(x) {
                k = board[a][x].id.split("-"); b = Number(k[1])
                if (b != d) { add_blur_3x22H(board[a][x]) }
            }
            for (var i = 0; i < columns; i++) { mi(i) }
           
            var k = othersTile.id.split("-"); a = Number(k[0]); b = Number(k[1])
            function mi2(x) { blur_3x22H(board[a][x], othersTile) } // xóa
            for (var i = 0; i < columns; i++) { mi2(i) }
        }
    }
}
// biến
if (3) {
    var nammuoi = 13.5 / 9
    var chess = [star, yingyang, sword, water, heart, melon]
    var board = [], rows = 9, columns = 9;
    var currTile = undefined, otherTile = undefined, othersTile = undefined;

    var specialFirstArray = [], listOfArrays = [], listOfArraysC = [], diSlide = true
    var tiep = 0, dayTh = 0, specialArraymini = [], slide5 = false,
        specialArraymini2 = [], yyy = 0, tiPlay = 0, click1 = true, click2 = true
    slideLoop
}
if (4) {
// kiểm tra xem bàn cờ có đi đc ko?
{
    function testValid() {
        var bi = 0
       
        function bii(xx, y, z) {
            if (xx) {
                let currImg = board[i][e].src; let otherImg = board[i + y][e + z].src;
                board[i][e].src = otherImg; board[i + y][e + z].src = currImg;
                checkClass(); if (checkValid()) { bi++ }
                board[i][e].src = currImg; board[i + y][e + z].src = otherImg;
            }
        }
        for (var i = 0; i <= rows - 1; i++) {
            for (var e = 0; e <= columns - 1; e++) {
                var k = board[i][e].id.split("-"); a = Number(k[0]); b = Number(k[1])
                bii(a - 1 >= 0, -1, 0)/*lên*/; bii(a+1<=rows-1, 1, 0)/*xuống*/
                bii(b+1<=columns-1, 0, 1)/*phải*/;bii(b-1>=0, 0, -1)/*trái*/
            }
        }
        var mi = 0
        if (bi > 0) {console.log('bi', bi); return true}
        else if (bi == 0) {
            var x = document.querySelectorAll(".ch-Chess")
            for (y of x) {
                if (y.classList[2] != 'Xclass' && y.classList[2] != 'fivebBlock') {
                    var k = y.id.split("-"); a = Number(k[0]); b = Number(k[1])
                    
                    function pi(xx, y, z) { if (xx) { if (board[a + y][b + z].classList[2] != "Xclass" && board[a + y][b + z].classList[2] != "fiveBlock") { mi++ } } }
                    pi(a-1>=0, -1, 0)/*lên*/;pi(a+1<=rows-1, 1, 0)/*xuống*/
                    pi(b+1<=columns-1, 0, 1)/*phải*/;pi(b-1>=0, 0, -1)/*trái*/
                }
            }
            for (y of x) {
                if (y.classList[2] == 'fiveBlock') {mi++}
            }
        }
        if (mi > 0) {console.log('mi', mi); return true} else {return false}
        
    } // kiểm tra xem bàn cờ có đi đc ko?  
    function replay() {
        document.querySelector(".board").parentNode.removeChild(document.querySelector(".board"))

        board = []; listOfArrays = []
        var banCo = document.createElement('div')
        banCo.classList.add('board')
        banCo.id = 'board'
        // map.classList.add('mapBassic')
        var fullclassApp = document.querySelector(".wrap")
        fullclassApp.append(banCo);
        startGame()
    } // đổi cờ
}
// bot play 
{
var auto_Boom5x_N3D = []; var auto_Boom5x_5x = []; var auto_Boom5x_Thuong = []
//1. kiểm tra xem có viên boom5x ko
    function auto_Boom5x() {
        auto_Boom5x_Thuong = []; auto_Boom5x_N3D = []; auto_Boom5x_5x = []
        var mang5x = []
        var x = document.querySelectorAll(".ch-Chess")
/** 1.*/for (var y of x) {
            if (y.classList[2] == 'fiveBlock') { mang5x.push(y) }
        }
            /**Hàm chung */
        function bii(xx, y, x, z) { // y là gốc
            if (xx) {
                if (board[a + x][b + z].classList[2] == 'fiveBlock') {
                    auto_Boom5x_5x.push([mang5x[y], board[a + x][b + z]])
                } //nếu gốc và x đều là 5x
                if (board[a + x][b + z].classList[2] != 'Xclass' && board[a + x][b + z].classList[2] != 'fiveBlock') {
                    auto_Boom5x_N3D.push([mang5x[y], board[a + x][b + z]])
                } // nếu gốc là 5x và x là N3D
                if (board[a + x][b + z].classList[2] == 'Xclass') {
                    auto_Boom5x_Thuong.push([mang5x[y], board[a + x][b + z]])
                } // nếu gốc là 5x và x là thường
            }
        }
/** 2.*/for (var i = 0; i < mang5x.length; i++) {
            var k = mang5x[i].id.split("-"); a = Number(k[0]); b = Number(k[1])
            bii(a - 1 >= 0, i, -1, 0);/**lên*/bii(b + 1 <= columns - 1, i, 0, 1); /**phải */
            bii(a + 1 <= rows - 1, i, 1, 0);/**xuống*/bii(b - 1 >= 0, i, 0, -1); /**trái */
        }

        // (0)có 5x ko, (1)có 2 viên 5x, (2)có 5x và N3D, (3) có 5x và thường
        return [mang5x.length > 0, auto_Boom5x_5x, auto_Boom5x_N3D, auto_Boom5x_Thuong]
    }
//2. kiểm tra xem có 2 viên N3D kề nhau ko
    var auto_N3D_last = []
    function auto_N3D() {
        var auto_N3D_first = []; auto_N3D_last = []
        var x = document.querySelectorAll(".ch-Chess")
        for (var y of x) {
            if (y.classList[2] != 'Xclass' && y.classList[2] != 'fiveBlock') {
                auto_N3D_first.push(y)
            }
        } // Kiểm tra xem có N3D ko
        function bii(xx, y, x, z) {
            if (xx) {
                if (board[a + x][b + z].classList[2] != 'Xclass' && board[a + x][b + z].classList[2] != 'fiveBlock') {
                    auto_N3D_last.push([auto_N3D_first[y], board[a + x][b + z]])
                }
            }
        }

        for (var i = 0; i < auto_N3D_first.length; i++) {
            var k = auto_N3D_first[i].id.split("-"); a = Number(k[0]); b = Number(k[1])
            bii(a - 1 >= 0, i, -1, 0);/**lên*/bii(b + 1 <= columns - 1, i, 0, 1); /**phải */
            bii(a + 1 <= rows - 1, i, 1, 0);/**xuống*/bii(b - 1 >= 0, i, 0, -1); /**trái */
        } // Kiểm tra xem có N3D kề nhau ko
        // (0) có N3D kề nhau ko, (1)list kề nhau
        return [auto_N3D_last.length > 0, auto_N3D_last]
    }
//3. kiểm tra xem có tạo đc 5 viên liên tiếp ko
    var auto_5x_array = []
    function auto_5x() {
        auto_5x_array = []
        var bi5x = 0
        function bii(xx, x, y) {
            if (xx) {
                let currImg = board[i][e].src; let otherImg = board[i + x][e + y].src;
                board[i][e].src = otherImg; board[i + x][e + y].src = currImg;
                checkClass()
                if (checkValid()) {
                    if (readycrush2(5)[0] > 0) {
                        bi5x++
                        // gốc, đổi, số viên đặc biệt, số nhánh (vd 5 viên A và 3 viên B)
                        auto_5x_array.push([board[i][e], board[i + x][e + y], readycrush2(5)[1], readycrush2(5)[2]])
                    }
                }
                board[i][e].src = currImg; board[i + x][e + y].src = otherImg; checkClass()
            }
        }
        for (var i = 0; i <= 8; i++) {
            for (var e = 0; e <= 8; e++) {
                var k = board[i][e].id.split("-"); a = Number(k[0]); b = Number(k[1])
                bii(a - 1 >= 0, -1, 0);/**lên*/bii(b + 1 <= columns - 1, 0, 1); /**phải */
                bii(a + 1 <= rows - 1, 1, 0);/**xuống*/bii(b - 1 >= 0, 0, -1); /**trái */
            }
        }// (0)có tạo 5 ô liên tiếp ko?, (1) mảng 5 viên liên tiếp
        return [bi5x > 0, auto_5x_array]
    }
//4. kiểm tra xem có tạo đc 4 viên liên tiếp ko
    var auto_4x_array = []
    function auto_4x() {
        auto_4x_array = []
        var bi4x = 0
        function bii(xx, x, y) {
            if (xx) {
                let currImg = board[i][e].src; let otherImg = board[i + x][e + y].src;
                board[i][e].src = otherImg; board[i + x][e + y].src = currImg;
                checkClass()
                if (checkValid()) {
                    if (readycrush2(4)[0] > 0) {
                        bi4x++
                        // gốc, đổi, số viên đặc biệt, số nhánh (vd 4 viên A và 3 viên B)
                        auto_4x_array.push([board[i][e], board[i + x][e + y], readycrush2(4)[1], readycrush2(4)[2]])
                    }
                }
                board[i][e].src = currImg; board[i + x][e + y].src = otherImg; checkClass()
            }
        }
        for (var i = 0; i <= 8; i++) {
            for (var e = 0; e <= 8; e++) {
                var k = board[i][e].id.split("-");  a = Number(k[0]); b = Number(k[1])
                bii(a - 1 >= 0, -1, 0);/**lên*/bii(b + 1 <= columns - 1, 0, 1); /**phải */
                bii(a + 1 <= rows - 1, 1, 0);/**xuống*/bii(b - 1 >= 0, 0, -1); /**trái */
            }
        }
        // (0)có tạo 4 ô liên tiếp ko?, (1) mảng 4 viên liên tiếp
        return [bi4x > 0, auto_4x_array]
    }
//5. kiểm tra xem có tạo đc 3 viên liên tiếp ko
    var auto_3x_array = []
    function auto_3x() {
            auto_3x_array = []
            var bi3x = 0
            function bii(xx, x, y) {
                if (xx) {
                    let currImg = board[i][e].src; let otherImg = board[i + x][e + y].src;
                    board[i][e].src = otherImg; board[i + x][e + y].src = currImg;
                    checkClass()
                    if (checkValid()) {
                        if (readycrush2(3)[0] > 0) {
                            bi3x++
                            // gốc, đổi, số viên đặc biệt, số nhánh (vd 5 viên A và 3 viên B)
                            auto_3x_array.push([board[i][e], board[i + x][e + y], readycrush2(3)[1], readycrush2(3)[2]])
                        }
                    }
                    board[i][e].src = currImg; board[i + x][e + y].src = otherImg; checkClass()
                }
            }
            for (var i = 0; i <= 8; i++) {
                for (var e = 0; e <= 8; e++) {
                    var k = board[i][e].id.split("-");  a = Number(k[0]); b = Number(k[1])
                    bii(a - 1 >= 0, -1, 0);/**lên*/bii(b + 1 <= columns - 1, 0, 1); /**phải */
                    bii(a + 1 <= rows - 1, 1, 0);/**xuống*/bii(b - 1 >= 0, 0, -1); /**trái */
                }
            } // (0)có tạo 3 ô liên tiếp ko?, (1) mảng 3 viên liên tiếp
            return [bi3x > 0, auto_3x_array]
    }
//6. Hỗ trợ xem nhánh
    function readycrush2(number) {
        //check rows
        listOfArrays = [] // ? 
        for (let r = 0; r < rows; r++) {
            let array = []; let candy1 = board[r][0];
            array.push(candy1);
            for (let c = 1; c < columns; c++) {
                if(candy1.classList[0]==board[r][c].classList[0]){array.push(board[r][c])}
                else {
                    candy1 = board[r][c];
                    if (array.length >= 3) { listOfArrays.push(array) }
                    array = []; array.push(candy1)  
                }
                if (c == (columns-1)) {if(array.length >= 3) listOfArrays.push(array)}
            }
        }
        //check columns
        for (let c = 0; c < columns; c++) {
            let candy1 = board[0][c]; let array = [];
            array.push(candy1);
            for (let r = 1; r < rows; r++) {
                if(candy1.classList[0]==board[r][c].classList[0]){array.push(board[r][c])} 
                else {
                    candy1 = board[r][c];
                    if (array.length >= 3) { listOfArrays.push(array) }
                    array = []; array.push(candy1);
                }
                if (r==(rows - 1)) { if (array.length >= 3) listOfArrays.push(array)}
            }
        }

        var iNumber = number
        if (iNumber == 5) {var n = 0
            for (var i = 0; i < listOfArrays.length; i++) {
                if (listOfArrays[i].length >= 5) {n++}
            }
        } else if (iNumber == 4) {var n = 0
            for (var i = 0; i < listOfArrays.length; i++) {
                if (listOfArrays[i].length == 4) {n++}
            }
        } else if (iNumber == 3) {var n = 0
            for (var i = 0; i < listOfArrays.length; i++) {
                if (listOfArrays[i].length == 3) {n++}
            }
        }

        e = 0
        for (var i = 0; i < listOfArrays.length; i++) {
            for (var d = 0; d < listOfArrays[i].length; d++) {
                var b = listOfArrays[i][d].classList[2]
                if (b != 'Xclass' && b != 'fiveBlock') {e++}
            } // các viên liên tiếp 3/4/5 là viên N3D or thường
        }
        var b = listOfArrays; listOfArrays = []
        return [n, e, b.length]//(0)tạo đc 3/4/5 viên ko,(1)số N3D trong nhánh,(2)mấy nhánh
    }
//7. Quái lựa cấp độ khó để đánh 
    function auto_Fight() {
        //mô hình: (0)auto_Boom5x, (1)N3D, (2)liên5, (3)liên4, (4)liên3
        var bb = [auto_Boom5x()[0], auto_N3D()[0], auto_5x()[0], auto_4x()[0], auto_3x()[0]]
        var cc = []
        for (var i = 0; i < bb.length; i++) {
            if (bb[i] == true) {cc.push(i)} 
        } // coi nào true, lấy id của nó vô cc
        var y = Math.floor(Math.random() * cc.length) 
        var nn = cc[y] // lấy đc random id


        function endd(xx) {
            currTile.classList.replace(currTile.classList[3], 'focus')// mở focus Cur
            setTimeout(function () { 
                currTile.classList.replace(currTile.classList[3], 'fc')
            }, 900)// tắt focus Cur

            setTimeout(function () {
                let currImg = currTile.src; let otherImg = otherTile.src;
                currTile.src = otherImg; otherTile.src = currImg
                // mở focus Other
                otherTile.classList.replace(otherTile.classList[3], 'outFocus')

                // xóa 2 ô đặc biệt
                function delete_2_Special(x,y) {
                    for (var i = 0; i < mangCoNgangDoc.length; i++) { // xóa cho ô Ngang/Dọc và Ngang/Dọc
                        if (x.classList[2] == mangCoNgangDoc[i]) {
                            for (var i = 0; i < mangCoNgangDoc.length; i++) {
                                if (y.classList[2] == mangCoNgangDoc[i]) {
                                    setTimeout(function () { xoaNgangDoc() }, 300); return go = false
                                }
                            }
                        }
                    } // xóa cho ô Ngang/Dọc và Ngang/Dọc 
                    // ---------------
                    var jj = 0, otherTT = 0; for (var i = 0; i < mangCoBoom3x3.length; i++) {
                        if (x.classList[2] == mangCoBoom3x3[i] || y.classList[2] == mangCoBoom3x3[i]) {
                            for (var j = 0; j < mangCoNgang.length; j++) { if (y.classList[2] == mangCoNgang[j] || x.classList[2] == mangCoNgang[j]) { jj++; otherTT = "Ngang" } }
                            if (jj == 0) { for (var j = 0; j < mangCoDoc.length; j++) { if (y.classList[2] == mangCoDoc[j] || x.classList[2] == mangCoDoc[j]) { jj++; otherTT = "Doc" } } }
                        }
                    } // xóa cho ô 3x3 và Ngang/Dọc
                    if (jj > 0) { setTimeout(function () { xoaNgang3x3(otherTT) }, 300); return go = false }


                    for (var i = 0; i < mangCoBoom3x3.length; i++) {
                        if (x.classList[2] == mangCoBoom3x3[i]) {
                            for (var i = 0; i < mangCoBoom3x3.length; i++) { if (y.classList[2] == mangCoBoom3x3[i]) { setTimeout(function () { xoa3x3vs3x3() }, 300); return go = false } }
                        }
                    } // xóa cho ô 3x3 và 3x3

                    // ---------------
                    if ((x.classList[2] == "fiveBlock" || y.classList[2] == "fiveBlock") && (x.classList[2] == "Xclass" || y.classList[2] == "Xclass")) {
                        if (x.classList[2] == 'fiveBlock') { setTimeout(function () { xoa5xThuong(y) }, 300); return go = false }
                        else { setTimeout(function () { xoa5xThuong(x) }, 300); return go = false }
                    } // xóa cho ô 5x và ô thường (Xclass)

                    if ((x.classList[2] == "fiveBlock") || (y.classList[2] == "fiveBlock")) {
                        for (var i = 0; i < mangCo.length; i++) {
                            if ((y.classList[2] == mangCo[i]) || (x.classList[2] == mangCo[i])) {
                                if (x.classList[2] == "fiveBlock") { setTimeout(function () { xoa5xDacbiet(y) }, 300) }
                                else { setTimeout(function () { xoa5xDacbiet(x) }, 300) }
                                return go = false
                            }
                        }
                    }// xóa cho ô 5x và ô đặc biệt (3x3, ngang, dọc)

                    if (y.classList[2] == "fiveBlock" && x.classList[2] == "fiveBlock") {
                        setTimeout(function () { xoa5x5x(0) }, 300); return go = false
                    } // khi cả 2 đều là 5x
                }
                setTimeout(function () { // tắt focus Other
                    otherTile.classList.replace(otherTile.classList[3], 'fc')
                }, 400)
                if (xx == 1) {setTimeout(function () {readycrush()}, 700)} 
                else {setTimeout(function () {delete_2_Special(currTile, otherTile)}, 700)}

            }, 1100)
        }
        function startt(yy) {
            if (yy < 5) {
                // yy là vị trí ô đặc biệt, rd là n cặp ô đặc biệt, 0 1 là ô cần tìm
                var rd = Math.floor(Math.random() * auto_Boom5x()[yy].length)  
                var random = Math.floor(Math.random() * 2) + 1 
                if (random == 1) {console.log(111);currTile = auto_Boom5x()[yy][rd][0]; otherTile = auto_Boom5x()[yy][rd][1]} 
                else {console.log(222); currTile = auto_Boom5x()[yy][rd][1]; otherTile = auto_Boom5x()[yy][rd][0]}
            } else {
                var rd = Math.floor(Math.random() * auto_N3D()[1].length)  
                var random = Math.floor(Math.random() * 2) + 1 
                if (random == 1) {currTile = auto_N3D()[1][rd][0]; otherTile = auto_N3D()[1][rd][1]} 
                else {currTile = auto_N3D()[1][rd][1]; otherTile = auto_N3D()[1][rd][0]}
            }
        }
        if (/**auto_Boom5x()[0]*/ nn == 0) {
            if (auto_Boom5x()[1].length > 0) {startt(1)} // 2 viên 5x
            else if (auto_Boom5x()[2].length > 0) {startt(2)} // viên N3D
            else {startt(3)} // ô thường
            endd(2)
        }
        else if (/**auto_N3D()[0]*/ nn == 1) {
            startt(6); endd(2)
        }
        else if (/**auto_5x()[0]*/ nn == 2) {    
            // 0, 1 , 2/readycrush2(5)[1], 3/readycrush2(5)[2]]
            var array_N3D = [], array_N3D_id = [], array_N3D_Max = [], array_N3D_id_Max = []
            for (var y of auto_5x_array) {
                if (y[2] > 0) {
                    array_N3D.push(y[2])
                    array_N3D_id.push([y[0], y[1]])
                } 
            }
            if (array_N3D.length > 0) {
                var maxInNumbers = Math.max.apply(Math, array_N3D)
                for (var i = 0; i < array_N3D.length; i++) {
                    if (array_N3D[i] == maxInNumbers) {
                        array_N3D_Max.push(array_N3D[i])
                        array_N3D_id_Max.push(array_N3D_id[i])
                    }
                }
                        var random = Math.floor(Math.random() * array_N3D_Max.length) 
                        currTile = array_N3D_id_Max[random][0]
                        otherTile = array_N3D_id_Max[random][1]
            } else {
                for (var y of auto_5x_array) {
                        array_N3D.push(y[3])
                        array_N3D_id.push([y[0], y[1]])
                }

                var maxInNumbers = Math.max.apply(Math, array_N3D)

                for (var i = 0; i < array_N3D.length; i++) {
                    if (array_N3D[i] == maxInNumbers) {
                        array_N3D_Max.push(array_N3D[i])
                        array_N3D_id_Max.push(array_N3D_id[i])
                    }
                }
                        var random = Math.floor(Math.random() * array_N3D_Max.length) 
                        currTile = array_N3D_id_Max[random][0]
                        otherTile = array_N3D_id_Max[random][1]
            }
        
            // console.log(array_N3D_Max, array_N3D_id_Max)
            
            endd(1)

        }
        else if (/**auto_4x()[0]*/ nn == 3) {    
            // 0, 1 , 2/readycrush2(5)[1], 3/readycrush2(5)[2]]
            var array_N3D = [], array_N3D_id = [], array_N3D_Max = [], array_N3D_id_Max = []
            for (var y of auto_4x_array) {
                if (y[2] > 0) {
                    array_N3D.push(y[2])
                    array_N3D_id.push([y[0], y[1]])
                } 
            }
            if (array_N3D.length > 0) {
                var maxInNumbers = Math.max.apply(Math, array_N3D)
                for (var i = 0; i < array_N3D.length; i++) {
                    if (array_N3D[i] == maxInNumbers) {
                        array_N3D_Max.push(array_N3D[i])
                        array_N3D_id_Max.push(array_N3D_id[i])
                    }
                }
                        var random = Math.floor(Math.random() * array_N3D_Max.length) 
                        currTile = array_N3D_id_Max[random][0]
                        otherTile = array_N3D_id_Max[random][1]
            } else {
                for (var y of auto_4x_array) {
                        array_N3D.push(y[3])
                        array_N3D_id.push([y[0], y[1]])
                }

                var maxInNumbers = Math.max.apply(Math, array_N3D)

                for (var i = 0; i < array_N3D.length; i++) {
                    if (array_N3D[i] == maxInNumbers) {
                        array_N3D_Max.push(array_N3D[i])
                        array_N3D_id_Max.push(array_N3D_id[i])
                    }
                }
                        var random = Math.floor(Math.random() * array_N3D_Max.length) 
                        currTile = array_N3D_id_Max[random][0]
                        otherTile = array_N3D_id_Max[random][1]
            }
        
            // console.log(array_N3D_Max, array_N3D_id_Max)
            
            endd(1)

        } 
        else if (/**auto_3x()[0]*/ nn == 4) {    
            // 0, 1 , 2/readycrush2(5)[1], 3/readycrush2(5)[2]]
            var array_N3D = [], array_N3D_id = [], array_N3D_Max = [], array_N3D_id_Max = []
            for (var y of auto_3x_array) {
                if (y[2] > 0) {
                    array_N3D.push(y[2])
                    array_N3D_id.push([y[0], y[1]])
                } 
            }
            if (array_N3D.length > 0) {
                var maxInNumbers = Math.max.apply(Math, array_N3D)
                for (var i = 0; i < array_N3D.length; i++) {
                    if (array_N3D[i] == maxInNumbers) {
                        array_N3D_Max.push(array_N3D[i])
                        array_N3D_id_Max.push(array_N3D_id[i])
                    }
                }
                        var random = Math.floor(Math.random() * array_N3D_Max.length) 
                        currTile = array_N3D_id_Max[random][0]
                        otherTile = array_N3D_id_Max[random][1]
            } else {
                for (var y of auto_3x_array) {
                        array_N3D.push(y[3])
                        array_N3D_id.push([y[0], y[1]])
                }

                var maxInNumbers = Math.max.apply(Math, array_N3D)

                for (var i = 0; i < array_N3D.length; i++) {
                    if (array_N3D[i] == maxInNumbers) {
                        array_N3D_Max.push(array_N3D[i])
                        array_N3D_id_Max.push(array_N3D_id[i])
                    }
                }
                        var random = Math.floor(Math.random() * array_N3D_Max.length) 
                        currTile = array_N3D_id_Max[random][0]
                        otherTile = array_N3D_id_Max[random][1]
            }
        
            // console.log(array_N3D_Max, array_N3D_id_Max)
            
            endd(1)

        }
    }
}

    // tính điểm
    var heartPoint = 0, starPoint = 0,
        melonPoint = 0, yingyangPoint = 0, waterPoint = 0, swordPoint = 0

    var heartMini = 0, starMini = 0,
        melonMini = 0, yingyangMini = 0, waterMini = 0, swordMini = 0

    var goPoint = 0
    function Point() {
        heartMini = 8;
        starMini = 1;
        melonMini = 10;
        yingyangMini = 6;
        waterMini = 10;
        swordMini = 10
    }

    function allPoint() {
        var x = document.querySelectorAll(".ch-Chess")
        for (var y of x) {
            if (y.src == blank) {
                if (y.classList[2] == 'Xclass') {
                    switch (y.classList[0]) {


                        case 'yingyang': {
                            yingyangMini += 6
                            break;
                        }

                        case 'melon': {
                            melonMini += 10
                            break;
                        }

                        case 'heart': {
                            heartMini += 8
                            break;
                        }

                        case 'sword': {
                            swordMini += 10
                            break;
                        }

                        case 'water': {
                            waterMini += 10
                            break;
                        }

                        case 'star': {
                            starMini += 1
                            break;
                        }
                    }
                } else {
                    switch (y.classList[2]) {
                        case 'yingyang3x3':
                        case 'yingyang3x2': {
                            yingyangMini += 6 * 1.5
                            break;
                        }

                        case 'melon3x3':
                        case 'melon3x2': {
                            melonMini += 10 * 1.5
                            break;
                        }

                        case 'heart3x3':
                        case 'heart3x2': {
                            heartMini += 8 * 1.5
                            break;
                        }

                        case 'sword3x3':
                        case 'sword3x2': {
                            swordMini += 10 * 1.5
                            break;
                        }

                        case 'water3x3':
                        case 'water3x2': {
                            waterMini += 10 * 1.5
                            break;
                        }

                        case 'star3x3':
                        case 'star3x2': {
                            starMini += 1 * 1.5
                            break;
                        }


                        // case 'fiveBlock':


                        case 'yingyangDoc':
                        case 'yingyangNgang': {
                            yingyangMini += 6 * 1.5
                            break;
                        }

                        case 'melonDoc':
                        case 'melonNgang': {
                            melonMini += 10 * 1.5
                            break;
                        }

                        case 'heartDoc':
                        case 'heartNgang': {
                            heartMini += 8 * 1.5
                            break;
                        }

                        case 'swordDoc':
                        case 'swordNgang': {
                            swordMini += 10 * 1.5
                            break;
                        }

                        case 'waterDoc':
                        case 'waterNgang': {
                            waterMini += 10 * 1.5
                            break;
                        }

                        case 'starDoc':
                        case 'starNgang': {
                            starMini += 1 * 1.5
                            break;
                        }
                    }
                }

            }
        }

        for (var i = 0; i < listOfArrays.length; i++) {
            if (listOfArrays[i].length >= 4) {
                goPoint++
            }
        }
    }


    function boardPoint() {
        document.querySelector(".hpBoard1").innerHTML = Number(document.querySelector(".hpBoard1").innerHTML) + heartMini
        document.querySelector(".manaBoard1").innerHTML = Number(document.querySelector(".manaBoard1").innerHTML) + waterMini
        document.querySelector(".giapBoard1").innerHTML = Number(document.querySelector(".giapBoard1").innerHTML) + yingyangMini
        document.querySelector(".expBoard1").innerHTML = Number(document.querySelector(".expBoard1").innerHTML) + melonMini
        document.querySelector(".exp9Board1").innerHTML = Number(document.querySelector(".exp9Board1").innerHTML) + starMini
        document.querySelector(".dameBoard1").innerHTML = Number(document.querySelector(".dameBoard1").innerHTML) + swordMini
        heartMini = 0, starMini = 0,
            melonMini = 0, yingyangMini = 0,
            waterMini = 0, swordMini = 0
    }
    function boardPoint_Blur() {
        setTimeout(function () {
            document.querySelector(".hpBoard1").innerHTML = 0
            document.querySelector(".manaBoard1").innerHTML = 0
            document.querySelector(".giapBoard1").innerHTML = 0
            document.querySelector(".expBoard1").innerHTML = 0
            document.querySelector(".exp9Board1").innerHTML = 0
            document.querySelector(".dameBoard1").innerHTML = 0
        }, 1500)
    }

    function mePoint_Infor() {
        document.querySelector(".hpMe1").innerHTML = Number(document.querySelector(".hpMe1").innerHTML) + Number(document.querySelector(".hpBoard1").innerHTML)
        document.querySelector(".manaMe1").innerHTML = Number(document.querySelector(".manaMe1").innerHTML) + Number(document.querySelector(".manaBoard1").innerHTML)
        document.querySelector(".exp9Me1").innerHTML = Number(document.querySelector(".exp9Me1").innerHTML) + Number(document.querySelector(".exp9Board1").innerHTML)
        document.querySelector(".expMe1").innerHTML = Number(document.querySelector(".expMe1").innerHTML) + Number(document.querySelector(".expBoard1").innerHTML)
        document.querySelector(".giapMe1").innerHTML = Number(document.querySelector(".giapMe1").innerHTML) + Number(document.querySelector(".giapBoard1").innerHTML)

        if (Number(document.querySelector(".giapEnemy1").innerHTML) > 0) {
            document.querySelector(".giapEnemy1").innerHTML = Number(document.querySelector(".giapEnemy1").innerHTML) - Number(document.querySelector(".giapBoard1").innerHTML) - Number(document.querySelector(".dameBoard1").innerHTML)
            if (Number(document.querySelector(".giapEnemy1").innerHTML) < 0) {
                document.querySelector(".hpEnemy1").innerHTML = Number(document.querySelector(".hpEnemy1").innerHTML) - Math.abs(Number(document.querySelector(".giapEnemy1").innerHTML))
                document.querySelector(".giapEnemy1").innerHTML = 0
                // if (Number(document.querySelector(".hpEnemy1").innerHTML) < 0) {
                //     document.querySelector(".hpEnemy1").innerHTML = 0
                // }
            }
        } else {
            document.querySelector(".hpEnemy1").innerHTML = Number(document.querySelector(".hpEnemy1").innerHTML) - Number(document.querySelector(".giapBoard1").innerHTML) - Number(document.querySelector(".dameBoard1").innerHTML)
            // if (Number(document.querySelector(".hpEnemy1").innerHTML) < 0) {
            //     document.querySelector(".hpEnemy1").innerHTML = 0
            // }
        }

    }

    function theyPoint_Infor() {
        document.querySelector(".hpEnemy1").innerHTML = Number(document.querySelector(".hpEnemy1").innerHTML) + Number(document.querySelector(".hpBoard1").innerHTML)
        document.querySelector(".manaEnemy1").innerHTML = Number(document.querySelector(".manaEnemy1").innerHTML) + Number(document.querySelector(".manaBoard1").innerHTML)
        document.querySelector(".exp9Enemy1").innerHTML = Number(document.querySelector(".exp9Enemy1").innerHTML) + Number(document.querySelector(".exp9Board1").innerHTML)
        document.querySelector(".expEnemy1").innerHTML = Number(document.querySelector(".expEnemy1").innerHTML) + Number(document.querySelector(".expBoard1").innerHTML)
        document.querySelector(".giapEnemy1").innerHTML = Number(document.querySelector(".giapEnemy1").innerHTML) + Number(document.querySelector(".giapBoard1").innerHTML)

        if (Number(document.querySelector(".giapMe1").innerHTML) > 0) {
            document.querySelector(".giapMe1").innerHTML = Number(document.querySelector(".giapMe1").innerHTML) - Number(document.querySelector(".giapBoard1").innerHTML) - Number(document.querySelector(".dameBoard1").innerHTML)
            if (Number(document.querySelector(".giapMe1").innerHTML) < 0) {
                document.querySelector(".hpMe1").innerHTML = Number(document.querySelector(".hpMe1").innerHTML) - Math.abs(Number(document.querySelector(".giapMe1").innerHTML))
                document.querySelector(".giapMe1").innerHTML = 0
                // if (Number(document.querySelector(".hpMe1").innerHTML) < 0) {
                //     document.querySelector(".hpMe1").innerHTML = 0
                // }
            }
        } else {
            document.querySelector(".hpMe1").innerHTML = Number(document.querySelector(".hpMe1").innerHTML) - Number(document.querySelector(".giapBoard1").innerHTML) - Number(document.querySelector(".dameBoard1").innerHTML)
            // if (Number(document.querySelector(".hpMe1").innerHTML) < 0) {
            //     document.querySelector(".hpMe1").innerHTML = 0
            // }
        }

    }
// phần time cho game
{
    var TimeNe = 1; var timePlay = 10
    var meTurn = false; var theyTurn = false
    var timeTogether
    // clearInterval(timeTogether)
    var timeEnemyPlay = 0, yyy = 0

    function timePlayy() {
        timeTogether = setInterval(function () {
            if (timePlay >= 0 && meTurn == true) {
                document.querySelector(".timeMe").classList.remove("none") // mở timeMe
                document.querySelector(".timeEnemy").classList.add("none") // tắt timeEnemy

                document.querySelector(".timeMe1").innerHTML = timePlay; timePlay--
                if (timePlay < 0) {
                    if (numbGo > 0) { clearInterval(timeTogether)
                        // (1) mở bảng lượt, (2) tắt bảng lượt
                   /*1*/thẻ_Cha_Lượt.classList.remove("none")
                   /*2*/setTimeout(function () { thẻ_Cha_Lượt.classList.add("none") }, 1700)
                        so_Luot.innerHTML = numbGo; numbGo-- // (3) cho số lượt và trừ đi lượt

                        click1 = true; meTurn = true; theyTurn = false; timePlay = 10
                        timePlayy()
                    } else {
                        click1=false;timePlay=10;
                        meTurn=false;theyTurn = true
                        // đặt x nhiu đây, vì nó đôn lên 1 số
                        var xx = [7,6,5,4,3];var random=Math.floor(Math.random()*xx.length) 
                        timeEnemyPlay = xx[random]
                    }
                }
            } else if (timePlay >= 0 && theyTurn == true) {
                if (timePlay == timeEnemyPlay) { 
                    // ? dùng sau clear?
                    document.querySelector(".timeEnemy").classList.add("doiMauTime")
                    clearInterval(timeTogether); auto_Fight()
                } else {
                    document.querySelector(".timeMe").classList.add("none")// tắt timeMe
                    document.querySelector(".timeEnemy").classList.remove("none") // mở timeEnemy
    
                    document.querySelector(".timeEnemy1").innerHTML = timePlay; timePlay--
                    if (timePlay < 0) {click1 = true; timePlay = 10; 
                        meTurn = true; theyTurn = false}
                }
            }
        }, 1000)
    }
}

var so_Luot = document.querySelector(".turnNumber")
var time_Me = document.querySelector(".timeMe")
var time_Enemy = document.querySelector(".timeEnemy")
var thẻ_Cha_Lượt = document.querySelector(".turn")
// điểm và thời gian đánh
    function turnFight() {
       
        if (meTurn == true) {
            if (numbGo > 0) {// mình có nhiều lượt
                // (1) mở bảng lượt, (2) tắt bảng lượt
            /*1*/thẻ_Cha_Lượt.classList.remove("none")
           /*2*/setTimeout(function () { thẻ_Cha_Lượt.classList.add("none") }, 1700)
                so_Luot.innerHTML = numbGo; numbGo-- // (3) cho số lượt và trừ đi lượt

                click1 = true; meTurn = true; theyTurn = false; timePlay = 10
                time_Me.classList.remove("doiMauTime") // tắt màu sáng khi đánh (1)
                timePlayy()
            } else {// mình hết lượt --> quái đánh
                meTurn = false; theyTurn = true; timePlay = 10
                var xx = [7, 6, 5, 4, 3];
                var random = Math.floor(Math.random() * xx.length)
                time_Me.classList.remove("doiMauTime")// tắt màu sáng khi đánh (2)
                timeEnemyPlay = xx[random]; timePlayy()
            }

        } else {
            if (numbGo > 0) { // quái có nhiều lượt
                // (1) mở bảng lượt, (2) tắt bảng lượt
            /*1*/thẻ_Cha_Lượt.classList.remove("none")
           /*2*/setTimeout(function () { thẻ_Cha_Lượt.classList.add("none") }, 1700)
                so_Luot.innerHTML = numbGo; numbGo-- // (3) cho số lượt và trừ đi lượt

                theyTurn = true; meTurn = false; timePlay = 10
                time_Enemy.classList.remove("doiMauTime")// tắt màu sáng khi đánh (1)
                timePlayy()
            } else {// quái hết lượt --> mình đánh
                click1 = true; meTurn = true; theyTurn = false; timePlay = 10
                time_Enemy.classList.remove("doiMauTime")// tắt màu sáng khi đánh (2)
                timePlayy()
            }
        }

    }
}


if (5) {
    // bao gồm 3x3, Ngang, Dọc
    var mangCo = ["waterNgang", "heartNgang", "melonNgang", "starNgang", "yingyangNgang", "swordNgang", "waterDoc", "heartDoc", "melonDoc", "starDoc", "yingyangDoc", "swordDoc", "water3x3", "heart3x3", "melon3x3", "star3x3", "yingyang3x3", "sword3x3"]
    var mangCoNgangDoc = ["waterNgang", "heartNgang", "melonNgang", "starNgang", "yingyangNgang", "swordNgang", "waterDoc", "heartDoc", "melonDoc", "starDoc", "yingyangDoc", "swordDoc"]


    var mangCoBienSpecial = [fiveBlock, waterNgang, heartNgang, melonNgang, starNgang, yingyangNgang, swordNgang, waterDoc, heartDoc, melonDoc, starDoc, yingyangDoc, swordDoc, water3x3, heart3x3, melon3x3, star3x3, yingyang3x3, sword3x3, water3x2, heart3x2, melon3x2, star3x2, yingyang3x2, sword3x2]
    var mangCoStringSpecial1 = ['haha', 'water', 'heart', 'melon', 'star', 'yingyang', 'sword', 'water', 'heart', 'melon', 'star', 'yingyang', 'word', 'water', 'heart', 'melon', 'star', 'yingyang', 'sword', 'waterg', 'heartg', 'melong', 'starg', 'yingyangg', 'swordg']
    var mangCoStringSpecial2 = ['fiveBlock', 'waterNgang', 'heartNgang', 'melonNgang', 'starNgang', 'yingyangNgang', 'swordNgang', 'waterDoc', 'heartDoc', 'melonDoc', 'starDoc', 'yingyangDoc', 'wordDoc', 'water3x3', 'heart3x3', 'melon3x3', 'star3x3', 'yingyang3x3', 'sword3x3', 'water3x2', 'heart3x2', 'melon3x2', 'star3x2', 'yingyang3x2', 'sword3x2']
    var mangCoBien = [water, heart, melon, star, yingyang, sword]
    var mangCoString = ['water', 'heart', 'melon', 'star', 'yingyang', 'sword']
    var mangCoBien1 = [water3x3, heart3x3, melon3x3, star3x3, yingyang3x3, sword3x3]
    var mangCoBien2 = [water3x2, heart3x2, melon3x2, star3x2, yingyang3x2, sword3x2]
    var mangCoBien3 = ['water3x2', 'heart3x2', 'melon3x2', 'star3x2', 'yingyang3x2', 'sword3x2']

    var mangCoNgangDoc = ["waterNgang", "heartNgang", "melonNgang", "starNgang", "yingyangNgang", "swordNgang", "waterDoc", "heartDoc", "melonDoc", "starDoc", "yingyangDoc", "swordDoc"]
    var mangCoNgang = ["waterNgang", "heartNgang", "melonNgang", "starNgang", "yingyangNgang", "swordNgang"]
    var mangCoNgangBien = [waterNgang, heartNgang, melonNgang, starNgang, yingyangNgang, swordNgang]
    var mangCoDocBien = [waterDoc, heartDoc, melonDoc, starDoc, yingyangDoc, swordDoc]
    var mangCoDoc = ["waterDoc", "heartDoc", "melonDoc", "starDoc", "yingyangDoc", "swordDoc"]
    var mangCoBoom3x3 = ["water3x3", "heart3x3", "melon3x3", "star3x3", "yingyang3x3", "sword3x3"]
    var mangCoBoom3x3Bien = [water3x3, heart3x3, melon3x3, star3x3, yingyang3x3, sword3x3]
}

</script>
</html>